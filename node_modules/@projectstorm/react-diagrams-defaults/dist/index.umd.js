!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["projectstorm/react-diagrams-defaults"]=t():e["projectstorm/react-diagrams-defaults"]=t()}(self,(()=>(()=>{"use strict";var e={418:function(e,t,o){var r=this&&this.__createBinding||(Object.create?function(e,t,o,r){void 0===r&&(r=o);var s=Object.getOwnPropertyDescriptor(t,o);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,r,s)}:function(e,t,o,r){void 0===r&&(r=o),e[r]=t[o]}),s=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||r(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),s(o(652),t),s(o(318),t),s(o(40),t),s(o(329),t),s(o(438),t),s(o(763),t),s(o(373),t),s(o(475),t),s(o(257),t),s(o(145),t),s(o(635),t),s(o(987),t),s(o(902),t),s(o(891),t)},652:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLabelFactory=void 0;const r=o(689),s=o(318),n=o(40),i=o(702);class l extends i.AbstractReactFactory{constructor(){super("default")}generateReactWidget(e){return r.createElement(n.DefaultLabelWidget,{model:e.model})}generateModel(e){return new s.DefaultLabelModel}}t.DefaultLabelFactory=l},318:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLabelModel=void 0;const r=o(912);class s extends r.LabelModel{constructor(e={}){super(Object.assign({offsetY:null==e.offsetY?-23:e.offsetY,type:"default"},e))}setLabel(e){this.options.label=e}deserialize(e){super.deserialize(e),this.options.label=e.data.label}serialize(){return Object.assign(Object.assign({},super.serialize()),{label:this.options.label})}}t.DefaultLabelModel=s},40:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLabelWidget=void 0;const r=o(689),s=o(480);var n;!function(e){e.Label=s.default.div`
		background: rgba(0, 0, 0, 0.8);
		border-radius: 5px;
		color: white;
		font-size: 12px;
		padding: 4px 8px;
		font-family: sans-serif;
		user-select: none;
	`}(n||(n={}));class i extends r.Component{render(){return r.createElement(n.Label,null,this.props.model.getOptions().label)}}t.DefaultLabelWidget=i},329:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLinkFactory=void 0;const r=o(689),s=o(438),n=o(763),i=o(480),l=o(702),a=o(805);var d;!function(e){e.Keyframes=a.keyframes`
		from {
			stroke-dashoffset: 24;
		}
		to {
			stroke-dashoffset: 0;
		}
	`;const t=a.css`
		stroke-dasharray: 10, 2;
		animation: ${e.Keyframes} 1s linear infinite;
	`;e.Path=i.default.path`
		${e=>e.selected&&t};
		fill: none;
		pointer-events: auto;
	`}(d||(d={}));class p extends l.AbstractReactFactory{constructor(e="default"){super(e)}generateReactWidget(e){return r.createElement(n.DefaultLinkWidget,{link:e.model,diagramEngine:this.engine})}generateModel(e){return new s.DefaultLinkModel}generateLinkSegment(e,t,o){return r.createElement(d.Path,{selected:t,stroke:t?e.getOptions().selectedColor:e.getOptions().color,strokeWidth:e.getOptions().width,d:o})}}t.DefaultLinkFactory=p},438:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLinkModel=void 0;const r=o(912),s=o(318),n=o(270);class i extends r.LinkModel{constructor(e={}){super(Object.assign({type:"default",width:e.width||3,color:e.color||"gray",selectedColor:e.selectedColor||"rgb(0,192,255)",curvyness:50},e))}calculateControlOffset(e){return e.getOptions().alignment===r.PortModelAlignment.RIGHT?[this.options.curvyness,0]:e.getOptions().alignment===r.PortModelAlignment.LEFT?[-this.options.curvyness,0]:e.getOptions().alignment===r.PortModelAlignment.TOP?[0,-this.options.curvyness]:[0,this.options.curvyness]}getSVGPath(){if(2==this.points.length){const e=new n.BezierCurve;return e.setSource(this.getFirstPoint().getPosition()),e.setTarget(this.getLastPoint().getPosition()),e.setSourceControl(this.getFirstPoint().getPosition().clone()),e.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort&&e.getSourceControl().translate(...this.calculateControlOffset(this.getSourcePort())),this.targetPort&&e.getTargetControl().translate(...this.calculateControlOffset(this.getTargetPort())),e.getSVGCurve()}}serialize(){return Object.assign(Object.assign({},super.serialize()),{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}deserialize(e){super.deserialize(e),this.options.color=e.data.color,this.options.width=e.data.width,this.options.curvyness=e.data.curvyness,this.options.selectedColor=e.data.selectedColor}addLabel(e){if(e instanceof r.LabelModel)return super.addLabel(e);let t=new s.DefaultLabelModel;return t.setLabel(e),super.addLabel(t)}setWidth(e){this.options.width=e,this.fireEvent({width:e},"widthChanged")}setColor(e){this.options.color=e,this.fireEvent({color:e},"colorChanged")}}t.DefaultLinkModel=i},475:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLinkPointWidget=void 0;const r=o(689),s=o(480);var n;!function(e){e.PointTop=s.default.circle`
		pointer-events: all;
	`}(n||(n={}));class i extends r.Component{constructor(e){super(e),this.state={selected:!1}}render(){const{point:e}=this.props;return r.createElement("g",null,r.createElement("circle",{cx:e.getPosition().x,cy:e.getPosition().y,r:5,fill:this.state.selected||this.props.point.isSelected()?this.props.colorSelected:this.props.color}),r.createElement(n.PointTop,{className:"point",onMouseLeave:()=>{this.setState({selected:!1})},onMouseEnter:()=>{this.setState({selected:!0})},"data-id":e.getID(),"data-linkid":e.getLink().getID(),cx:e.getPosition().x,cy:e.getPosition().y,r:15,opacity:0}))}}t.DefaultLinkPointWidget=i},373:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLinkSegmentWidget=void 0;const r=o(689);class s extends r.Component{render(){const e=r.cloneElement(this.props.factory.generateLinkSegment(this.props.link,this.props.selected||this.props.link.isSelected(),this.props.path),{ref:this.props.forwardRef}),t=r.cloneElement(e,Object.assign(Object.assign({strokeLinecap:"round",onMouseLeave:()=>{this.props.onSelection(!1)},onMouseEnter:()=>{this.props.onSelection(!0)}},this.props.extras),{ref:null,"data-linkid":this.props.link.getID(),strokeOpacity:this.props.selected?.1:0,strokeWidth:20,fill:"none",onContextMenu:()=>{this.props.link.isLocked()||(event.preventDefault(),this.props.link.remove())}}));return r.createElement("g",null,e,t)}}t.DefaultLinkSegmentWidget=s},763:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLinkWidget=void 0;const r=o(689),s=o(912),n=o(475),i=o(373);class l extends r.Component{constructor(e){super(e),this.refPaths=[],this.state={selected:!1}}renderPoints(){var e;return null===(e=this.props.renderPoints)||void 0===e||e}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map((e=>e.current)))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map((e=>e.current)))}componentWillUnmount(){this.props.link.setRenderedPaths([])}addPointToLink(e,t){if(!e.shiftKey&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){const o=new s.PointModel({link:this.props.link,position:this.props.diagramEngine.getRelativeMousePoint(e)});this.props.link.addPoint(o,t),e.persist(),e.stopPropagation(),this.forceUpdate((()=>{this.props.diagramEngine.getActionEventBus().fireAction({event:e,model:o})}))}}generatePoint(e){return r.createElement(n.DefaultLinkPointWidget,{key:e.getID(),point:e,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}generateLink(e,t,o){const s=r.createRef();return this.refPaths.push(s),r.createElement(i.DefaultLinkSegmentWidget,{key:`link-${o}`,path:e,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:s,onSelection:e=>{this.setState({selected:e})},extras:t})}render(){var e=this.props.link.getPoints(),t=[];if(this.refPaths=[],2===e.length)t.push(this.generateLink(this.props.link.getSVGPath(),{onMouseDown:e=>{var t,o;null===(o=(t=this.props).selected)||void 0===o||o.call(t,e),this.addPointToLink(e,1)}},"0")),null==this.props.link.getTargetPort()&&t.push(this.generatePoint(e[1]));else{for(let o=0;o<e.length-1;o++)t.push(this.generateLink(s.LinkWidget.generateLinePath(e[o],e[o+1]),{"data-linkid":this.props.link.getID(),"data-point":o,onMouseDown:e=>{var t,r;null===(r=(t=this.props).selected)||void 0===r||r.call(t,e),this.addPointToLink(e,o+1)}},o));if(this.renderPoints()){for(let o=1;o<e.length-1;o++)t.push(this.generatePoint(e[o]));null==this.props.link.getTargetPort()&&t.push(this.generatePoint(e[e.length-1]))}}return r.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},t)}}t.DefaultLinkWidget=l},257:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultNodeFactory=void 0;const r=o(689),s=o(145),n=o(635),i=o(702);class l extends i.AbstractReactFactory{constructor(){super("default")}generateReactWidget(e){return r.createElement(n.DefaultNodeWidget,{engine:this.engine,node:e.model})}generateModel(e){return new s.DefaultNodeModel}}t.DefaultNodeFactory=l},145:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultNodeModel=void 0;const r=o(517),s=o(912),n=o(891);class i extends s.NodeModel{constructor(e={},t){"string"==typeof e&&(e={name:e,color:t}),super(Object.assign({type:"default",name:"Untitled",color:"rgb(0,192,255)"},e)),this.portsOut=[],this.portsIn=[]}doClone(e,t){t.portsIn=[],t.portsOut=[],super.doClone(e,t)}removePort(e){super.removePort(e),e.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(e),1):this.portsOut.splice(this.portsOut.indexOf(e),1)}addPort(e){return super.addPort(e),e.getOptions().in?-1===this.portsIn.indexOf(e)&&this.portsIn.push(e):-1===this.portsOut.indexOf(e)&&this.portsOut.push(e),e}addInPort(e,t=!0){const o=new n.DefaultPortModel({in:!0,name:e,label:e,alignment:s.PortModelAlignment.LEFT});return t||this.portsIn.splice(0,0,o),this.addPort(o)}addOutPort(e,t=!0){const o=new n.DefaultPortModel({in:!1,name:e,label:e,alignment:s.PortModelAlignment.RIGHT});return t||this.portsOut.splice(0,0,o),this.addPort(o)}deserialize(e){super.deserialize(e),this.options.name=e.data.name,this.options.color=e.data.color,this.portsIn=r.map(e.data.portsInOrder,(e=>this.getPortFromID(e))),this.portsOut=r.map(e.data.portsOutOrder,(e=>this.getPortFromID(e)))}serialize(){return Object.assign(Object.assign({},super.serialize()),{name:this.options.name,color:this.options.color,portsInOrder:r.map(this.portsIn,(e=>e.getID())),portsOutOrder:r.map(this.portsOut,(e=>e.getID()))})}getInPorts(){return this.portsIn}getOutPorts(){return this.portsOut}}t.DefaultNodeModel=i},635:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultNodeWidget=void 0;const r=o(689),s=o(517),n=o(902),i=o(480);var l;!function(e){e.Node=i.default.div`
		background-color: ${e=>e.background};
		border-radius: 5px;
		font-family: sans-serif;
		color: white;
		border: solid 2px black;
		overflow: visible;
		font-size: 11px;
		border: solid 2px ${e=>e.selected?"rgb(0,192,255)":"black"};
	`,e.Title=i.default.div`
		background: rgba(0, 0, 0, 0.3);
		display: flex;
		white-space: nowrap;
		justify-items: center;
	`,e.TitleName=i.default.div`
		flex-grow: 1;
		padding: 5px 5px;
	`,e.Ports=i.default.div`
		display: flex;
		background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));
	`,e.PortsContainer=i.default.div`
		flex-grow: 1;
		display: flex;
		flex-direction: column;

		&:first-of-type {
			margin-right: 10px;
		}

		&:only-child {
			margin-right: 0px;
		}
	`}(l||(l={}));class a extends r.Component{constructor(){super(...arguments),this.generatePort=e=>r.createElement(n.DefaultPortLabel,{engine:this.props.engine,port:e,key:e.getID()})}render(){return r.createElement(l.Node,{"data-default-node-name":this.props.node.getOptions().name,selected:this.props.node.isSelected(),background:this.props.node.getOptions().color},r.createElement(l.Title,null,r.createElement(l.TitleName,null,this.props.node.getOptions().name)),r.createElement(l.Ports,null,r.createElement(l.PortsContainer,null,s.map(this.props.node.getInPorts(),this.generatePort)),r.createElement(l.PortsContainer,null,s.map(this.props.node.getOutPorts(),this.generatePort))))}}t.DefaultNodeWidget=a},987:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultPortFactory=void 0;const r=o(891),s=o(702);class n extends s.AbstractModelFactory{constructor(){super("default")}generateModel(){return new r.DefaultPortModel({name:"unknown"})}}t.DefaultPortFactory=n},902:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultPortLabel=void 0;const r=o(689),s=o(912),n=o(480);var i;!function(e){e.PortLabel=n.default.div`
		display: flex;
		margin-top: 1px;
		align-items: center;
	`,e.Label=n.default.div`
		padding: 0 5px;
		flex-grow: 1;
	`,e.Port=n.default.div`
		width: 15px;
		height: 15px;
		background: rgba(255, 255, 255, 0.1);

		&:hover {
			background: rgb(192, 255, 0);
		}
	`}(i||(i={}));class l extends r.Component{render(){const e=r.createElement(s.PortWidget,{engine:this.props.engine,port:this.props.port},r.createElement(i.Port,null)),t=r.createElement(i.Label,null,this.props.port.getOptions().label);return r.createElement(i.PortLabel,null,this.props.port.getOptions().in?e:t,this.props.port.getOptions().in?t:e)}}t.DefaultPortLabel=l},891:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultPortModel=void 0;const r=o(912),s=o(438);class n extends r.PortModel{constructor(e,t,o){t&&(e={in:!!e,name:t,label:o}),super(Object.assign({label:e.label||e.name,alignment:e.in?r.PortModelAlignment.LEFT:r.PortModelAlignment.RIGHT,type:"default"},e))}deserialize(e){super.deserialize(e),this.options.in=e.data.in,this.options.label=e.data.label}serialize(){return Object.assign(Object.assign({},super.serialize()),{in:this.options.in,label:this.options.label})}link(e,t){let o=this.createLinkModel(t);return o.setSourcePort(this),o.setTargetPort(e),o}canLinkToPort(e){return!(e instanceof n)||this.options.in!==e.getOptions().in}createLinkModel(e){let t=super.createLinkModel();return!t&&e?e.generateModel({}):t||new s.DefaultLinkModel}}t.DefaultPortModel=n},805:e=>{e.exports=require("@emotion/react")},480:e=>{e.exports=require("@emotion/styled")},270:e=>{e.exports=require("@projectstorm/geometry")},702:e=>{e.exports=require("@projectstorm/react-canvas-core")},912:e=>{e.exports=require("@projectstorm/react-diagrams-core")},517:e=>{e.exports=require("lodash")},689:e=>{e.exports=require("react")}},t={};var o=function o(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}(418);return o})()));
//# sourceMappingURL=index.umd.js.map