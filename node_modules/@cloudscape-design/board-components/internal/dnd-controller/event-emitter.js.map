{"version":3,"file":"event-emitter.js","sourceRoot":"","sources":["../../../../src/internal/dnd-controller/event-emitter.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AAMtC,MAAM,OAAO,YAAY;IAAzB;QACU,cAAS,GAAG,IAAI,GAAG,EAA6C,CAAC;IAqB3E,CAAC;IAnBQ,EAAE,CAA6B,KAAY,EAAE,OAAsB;QACxE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YAC9B,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;SAC/B;QACD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAEzC,OAAO,GAAG,EAAE;YACV,IAAI,CAAC,SAAS,CAAC,GAAG,CAChB,KAAK,EACL,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAE,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,KAAK,OAAO,CAAC,CAC9D,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;IAES,IAAI,CAA6B,KAAY,EAAE,GAAG,IAA+B;;QACzF,KAAK,MAAM,OAAO,IAAI,MAAA,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,mCAAI,EAAE,EAAE;YACrD,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC;SAClB;IACH,CAAC;CACF","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\ntype Listeners<L> = {\n  [E in keyof L]: (...args: any[]) => any;\n};\n\nexport class EventEmitter<Events extends Listeners<Events>> {\n  private listeners = new Map<keyof Events, Array<Events[keyof Events]>>();\n\n  public on<Event extends keyof Events>(event: Event, handler: Events[Event]) {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, []);\n    }\n    this.listeners.get(event)!.push(handler);\n\n    return () => {\n      this.listeners.set(\n        event,\n        this.listeners.get(event)!.filter((item) => item !== handler),\n      );\n    };\n  }\n\n  protected emit<Event extends keyof Events>(event: Event, ...data: Parameters<Events[Event]>) {\n    for (const handler of this.listeners.get(event) ?? []) {\n      handler(...data);\n    }\n  }\n}\n"]}