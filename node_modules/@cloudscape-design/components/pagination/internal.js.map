{"version":3,"file":"internal.js","sourceRoot":"","sources":["../../../src/pagination/internal.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport clsx from 'clsx';\n\nimport {\n  copyAnalyticsMetadataAttribute,\n  getAnalyticsMetadataAttribute,\n} from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\n\nimport { useInternalI18n } from '../i18n/context';\nimport InternalIcon from '../icon/internal';\nimport { getBaseProps } from '../internal/base-component';\nimport { useTableComponentsContext } from '../internal/context/table-component-context';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { GeneratedAnalyticsMetadataPaginationClick } from './analytics-metadata/interfaces';\nimport { PaginationProps } from './interfaces';\nimport { getPaginationState, range } from './utils';\n\nimport styles from './styles.css.js';\n\nconst defaultAriaLabels: Required<PaginationProps.Labels> = {\n  nextPageLabel: '',\n  paginationLabel: '',\n  previousPageLabel: '',\n  pageLabel: pageNumber => `${pageNumber}`,\n};\n\ninterface PageButtonProps {\n  className?: string;\n  ariaLabel: string;\n  disabled?: boolean;\n  pageIndex: number;\n  isCurrent?: boolean;\n  children?: React.ReactNode;\n  onClick: (requestedIndex: number) => void;\n}\n\nfunction PageButton({\n  className,\n  ariaLabel,\n  disabled,\n  pageIndex,\n  isCurrent = false,\n  children,\n  onClick,\n  ...rest\n}: PageButtonProps) {\n  function handleClick(event: React.MouseEvent) {\n    event.preventDefault();\n    onClick(pageIndex);\n  }\n  return (\n    <li className={styles['page-item']} {...copyAnalyticsMetadataAttribute(rest)}>\n      <button\n        className={clsx(\n          className,\n          styles.button,\n          disabled && styles['button-disabled'],\n          isCurrent && styles['button-current']\n        )}\n        type=\"button\"\n        aria-label={ariaLabel}\n        disabled={disabled}\n        onClick={handleClick}\n        aria-current={isCurrent}\n        {...(disabled\n          ? {}\n          : getAnalyticsMetadataAttribute({\n              action: 'click',\n              detail: {\n                label: { root: 'self' },\n              },\n            } as GeneratedAnalyticsMetadataPaginationClick))}\n      >\n        {children}\n      </button>\n    </li>\n  );\n}\n\nfunction PageNumber({ pageIndex, ...rest }: PageButtonProps) {\n  return (\n    <PageButton\n      className={styles['page-number']}\n      pageIndex={pageIndex}\n      {...rest}\n      {...(rest.disabled\n        ? {}\n        : getAnalyticsMetadataAttribute({\n            detail: {\n              position: `${pageIndex}`,\n            },\n          }))}\n    >\n      {pageIndex}\n    </PageButton>\n  );\n}\n\ntype InternalPaginationProps = PaginationProps & InternalBaseComponentProps;\nexport default function InternalPagination({\n  openEnd,\n  currentPageIndex,\n  ariaLabels,\n  pagesCount,\n  disabled,\n  onChange,\n  onNextPageClick,\n  onPreviousPageClick,\n  __internalRootRef = null,\n  ...rest\n}: InternalPaginationProps) {\n  const baseProps = getBaseProps(rest);\n  const { leftDots, leftIndex, rightIndex, rightDots } = getPaginationState(currentPageIndex, pagesCount, openEnd);\n\n  const i18n = useInternalI18n('pagination');\n\n  const paginationLabel = ariaLabels?.paginationLabel;\n  const nextPageLabel = i18n('ariaLabels.nextPageLabel', ariaLabels?.nextPageLabel) ?? defaultAriaLabels.nextPageLabel;\n  const previousPageLabel =\n    i18n('ariaLabels.previousPageLabel', ariaLabels?.previousPageLabel) ?? defaultAriaLabels.previousPageLabel;\n  const pageNumberLabelFn =\n    i18n('ariaLabels.pageLabel', ariaLabels?.pageLabel, format => pageNumber => format({ pageNumber })) ??\n    defaultAriaLabels.pageLabel;\n\n  function handlePrevPageClick(requestedPageIndex: number) {\n    handlePageClick(requestedPageIndex);\n    fireNonCancelableEvent(onPreviousPageClick, {\n      requestedPageAvailable: true,\n      requestedPageIndex: requestedPageIndex,\n    });\n  }\n\n  function handleNextPageClick(requestedPageIndex: number) {\n    handlePageClick(requestedPageIndex);\n    fireNonCancelableEvent(onNextPageClick, {\n      requestedPageAvailable: currentPageIndex < pagesCount,\n      requestedPageIndex: requestedPageIndex,\n    });\n  }\n\n  function handlePageClick(requestedPageIndex: number) {\n    fireNonCancelableEvent(onChange, { currentPageIndex: requestedPageIndex });\n  }\n\n  const previousButtonDisabled = disabled || currentPageIndex === 1;\n  const nextButtonDisabled = disabled || (!openEnd && (pagesCount === 0 || currentPageIndex === pagesCount));\n  const tableComponentContext = useTableComponentsContext();\n  if (tableComponentContext?.paginationRef?.current) {\n    tableComponentContext.paginationRef.current.currentPageIndex = currentPageIndex;\n    tableComponentContext.paginationRef.current.totalPageCount = pagesCount;\n  }\n  return (\n    <ul\n      aria-label={paginationLabel}\n      {...baseProps}\n      className={clsx(baseProps.className, styles.root, disabled && styles['root-disabled'])}\n      ref={__internalRootRef}\n    >\n      <PageButton\n        className={styles.arrow}\n        pageIndex={currentPageIndex - 1}\n        ariaLabel={previousPageLabel ?? defaultAriaLabels.nextPageLabel}\n        disabled={previousButtonDisabled}\n        onClick={handlePrevPageClick}\n        {...(previousButtonDisabled\n          ? {}\n          : getAnalyticsMetadataAttribute({\n              detail: {\n                position: 'prev',\n              },\n            }))}\n      >\n        <InternalIcon name=\"angle-left\" variant={disabled ? 'disabled' : 'normal'} />\n      </PageButton>\n      <PageNumber\n        pageIndex={1}\n        isCurrent={currentPageIndex === 1}\n        disabled={disabled}\n        ariaLabel={pageNumberLabelFn(1)}\n        onClick={handlePageClick}\n      />\n      {leftDots && <li className={styles.dots}>...</li>}\n      {range(leftIndex, rightIndex).map(pageIndex => (\n        <PageNumber\n          key={pageIndex}\n          isCurrent={currentPageIndex === pageIndex}\n          pageIndex={pageIndex}\n          disabled={disabled}\n          ariaLabel={pageNumberLabelFn(pageIndex)}\n          onClick={handlePageClick}\n        />\n      ))}\n      {rightDots && <li className={styles.dots}>...</li>}\n      {!openEnd && pagesCount > 1 && (\n        <PageNumber\n          isCurrent={currentPageIndex === pagesCount}\n          pageIndex={pagesCount}\n          disabled={disabled}\n          ariaLabel={pageNumberLabelFn(pagesCount)}\n          onClick={handlePageClick}\n        />\n      )}\n      <PageButton\n        className={styles.arrow}\n        pageIndex={currentPageIndex + 1}\n        ariaLabel={nextPageLabel ?? defaultAriaLabels.nextPageLabel}\n        disabled={nextButtonDisabled}\n        onClick={handleNextPageClick}\n        {...(nextButtonDisabled\n          ? {}\n          : getAnalyticsMetadataAttribute({\n              detail: {\n                position: 'next',\n              },\n            }))}\n      >\n        <InternalIcon name=\"angle-right\" variant={disabled ? 'disabled' : 'normal'} />\n      </PageButton>\n    </ul>\n  );\n}\n"]}