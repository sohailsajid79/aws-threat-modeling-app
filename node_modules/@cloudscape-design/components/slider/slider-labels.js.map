{"version":3,"file":"slider-labels.js","sourceRoot":"","sources":["../../../src/slider/slider-labels.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport clsx from 'clsx';\n\nimport customCssProps from '../internal/generated/custom-css-properties/index.js';\nimport { useMobile } from '../internal/hooks/use-mobile/index.js';\n\nimport styles from './styles.css.js';\n\nexport interface SliderLabelProps {\n  min: number;\n  max: number;\n  referenceValues?: ReadonlyArray<number>;\n  valueFormatter?: (value: number) => string;\n  labelsId: string;\n  ariaDescription?: string;\n}\nexport default function SliderLabels({\n  min,\n  max,\n  referenceValues,\n  valueFormatter,\n  labelsId,\n  ariaDescription,\n}: SliderLabelProps) {\n  const isMobile = useMobile();\n  const MAX_LABEL_COUNT = isMobile ? 4 : 10;\n  const minDistance = (max - min) / MAX_LABEL_COUNT;\n\n  // Returns only values that have enough distance between them to show properly.\n  // We also remove non-integer values and any values outside of the slider range.\n  const getVisibleReferenceValues = () => {\n    if (!referenceValues || referenceValues.length === 0) {\n      return [];\n    }\n\n    const values: Array<number> = [];\n\n    let lastValue = min;\n    for (let i = 0; i <= referenceValues.length; i++) {\n      if (\n        referenceValues[i] > min &&\n        referenceValues[i] < max &&\n        Math.abs(referenceValues[i] - lastValue) >= minDistance &&\n        Math.abs(max - referenceValues[i]) >= minDistance &&\n        Number.isInteger(referenceValues[i])\n      ) {\n        values.push(referenceValues[i]);\n        lastValue = referenceValues[i];\n      }\n    }\n    return values;\n  };\n\n  function getLabelPosition(index: number) {\n    const colSpan = Math.floor(minDistance / 2);\n    const positionStart = index - colSpan;\n    const positionEnd = index + colSpan;\n\n    // We simplify label treatment if the range is less than the max label count.\n    // This is because we don't need to add extra grid columns for necessary width.\n    const hasSmallRange = max - min <= MAX_LABEL_COUNT;\n\n    if (hasSmallRange) {\n      return {\n        min: 1,\n        max: (max - min) * 2 - 1,\n        posStart: (index - min) * 2,\n        posEnd: (index - min) * 2,\n      };\n    }\n    const roundedHalfCol = Math.round(colSpan / 2);\n\n    return {\n      min: colSpan * 2 + roundedHalfCol,\n      max: (max - min - colSpan) * 2 - roundedHalfCol + 1,\n      // add one to center the label\n      posStart: (positionStart - min) * 2 + 1 + roundedHalfCol,\n      posEnd: (positionEnd - min) * 2 - roundedHalfCol,\n    };\n  }\n\n  return (\n    <>\n      <div\n        role=\"list\"\n        aria-hidden={!valueFormatter && !referenceValues ? 'true' : undefined}\n        className={clsx(styles.labels, {\n          [styles['labels-noref']]: getVisibleReferenceValues().length === 0,\n        })}\n        style={{\n          [customCssProps.sliderLabelCount]: getVisibleReferenceValues().length === 0 ? 2 : (max - min) * 2,\n        }}\n        id={!ariaDescription ? labelsId : undefined}\n      >\n        <span\n          role=\"listitem\"\n          className={clsx(styles.label, styles['labels-min'])}\n          style={{\n            [customCssProps.sliderMinEnd]: getLabelPosition(0).min,\n          }}\n        >\n          {valueFormatter ? valueFormatter(min) : min}\n        </span>\n        {getVisibleReferenceValues().map(step => {\n          return (\n            <span\n              role=\"listitem\"\n              key={step}\n              style={{\n                [customCssProps.sliderReferenceColumn]: getLabelPosition(step).posStart,\n                [customCssProps.sliderNextReferenceColumn]: getLabelPosition(step).posEnd,\n              }}\n              className={clsx(styles.label, styles['labels-reference'])}\n            >\n              {valueFormatter ? valueFormatter(step) : step}\n            </span>\n          );\n        })}\n        <span\n          role=\"listitem\"\n          className={clsx(styles.label, styles['labels-max'])}\n          style={{\n            [customCssProps.sliderMaxStart]: !referenceValues ? 2 : getLabelPosition(0).max,\n          }}\n        >\n          {valueFormatter ? valueFormatter(max) : max}\n        </span>\n      </div>\n      {ariaDescription && (\n        <div className={styles['labels-aria-description']} id={labelsId}>\n          {ariaDescription}\n        </div>\n      )}\n    </>\n  );\n}\n"]}