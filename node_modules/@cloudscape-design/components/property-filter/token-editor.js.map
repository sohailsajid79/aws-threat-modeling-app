{"version":3,"file":"token-editor.js","sourceRoot":"","sources":["../../../src/property-filter/token-editor.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useState } from 'react';\nimport clsx from 'clsx';\n\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\n\nimport InternalButton from '../button/internal.js';\nimport { ButtonDropdownProps } from '../button-dropdown/interfaces.js';\nimport InternalButtonDropdown from '../button-dropdown/internal.js';\nimport InternalFormField from '../form-field/internal.js';\nimport { DropdownStatusProps } from '../internal/components/dropdown-status/interfaces.js';\nimport { FormFieldContext } from '../internal/context/form-field-context.js';\nimport { NonCancelableEventHandler } from '../internal/events/index.js';\nimport { useListFocusController } from '../internal/hooks/use-list-focus-controller.js';\nimport { useMobile } from '../internal/hooks/use-mobile/index.js';\nimport { useUniqueId } from '../internal/hooks/use-unique-id/index.js';\nimport {\n  GeneratedAnalyticsMetadataPropertyEditCancel,\n  GeneratedAnalyticsMetadataPropertyEditConfirm,\n} from './analytics-metadata/interfaces';\nimport { getAllowedOperators } from './controller.js';\nimport { I18nStringsInternal } from './i18n-utils.js';\nimport {\n  ComparisonOperator,\n  GroupText,\n  InternalFilteringOption,\n  InternalFilteringProperty,\n  InternalFreeTextFiltering,\n  InternalToken,\n  LoadItemsDetail,\n} from './interfaces.js';\nimport { OperatorInput, PropertyInput, ValueInput } from './token-editor-inputs.js';\n\nimport styles from './styles.css.js';\nimport testUtilStyles from './test-classes/styles.css.js';\n\nexport interface TokenEditorProps {\n  supportsGroups: boolean;\n  asyncProperties?: boolean;\n  asyncProps: DropdownStatusProps;\n  customGroupsText: readonly GroupText[];\n  freeTextFiltering: InternalFreeTextFiltering;\n  filteringProperties: readonly InternalFilteringProperty[];\n  filteringOptions: readonly InternalFilteringOption[];\n  i18nStrings: I18nStringsInternal;\n  onLoadItems?: NonCancelableEventHandler<LoadItemsDetail>;\n  onSubmit: () => void;\n  onDismiss: () => void;\n  tokensToCapture: InternalToken[];\n  onTokenCapture: (token: InternalToken) => void;\n  onTokenRelease: (token: InternalToken) => void;\n  tempGroup: InternalToken[];\n  onChangeTempGroup: (token: InternalToken[]) => void;\n}\n\nexport function TokenEditor({\n  supportsGroups,\n  asyncProperties,\n  asyncProps,\n  customGroupsText,\n  freeTextFiltering,\n  filteringProperties,\n  filteringOptions,\n  i18nStrings,\n  onLoadItems,\n  onSubmit,\n  onDismiss,\n  tokensToCapture,\n  onTokenCapture,\n  onTokenRelease,\n  tempGroup,\n  onChangeTempGroup,\n}: TokenEditorProps) {\n  const [nextFocusIndex, setNextFocusIndex] = useState<null | number>(null);\n  const tokenListRef = useListFocusController({\n    nextFocusIndex,\n    onFocusMoved: target => {\n      target.focus();\n      setNextFocusIndex(null);\n    },\n    listItemSelector: `.${styles['token-editor-field-property']}`,\n    fallbackSelector: `.${styles['token-editor-add-token']}`,\n  });\n\n  const groups = tempGroup.map((temporaryToken, index) => {\n    const setTemporaryToken = (newToken: InternalToken) => {\n      const copy = [...tempGroup];\n      copy[index] = newToken;\n      onChangeTempGroup(copy);\n    };\n    const property = temporaryToken.property;\n    const onChangePropertyKey = (newPropertyKey: undefined | string) => {\n      const filteringProperty = filteringProperties.reduce<InternalFilteringProperty | undefined>(\n        (acc, property) => (property.propertyKey === newPropertyKey ? property : acc),\n        undefined\n      );\n      const allowedOperators = filteringProperty ? getAllowedOperators(filteringProperty) : freeTextFiltering.operators;\n      const operator =\n        temporaryToken.operator && allowedOperators.indexOf(temporaryToken.operator) !== -1\n          ? temporaryToken.operator\n          : allowedOperators[0];\n      const matchedProperty = filteringProperties.find(property => property.propertyKey === newPropertyKey) ?? null;\n      setTemporaryToken({ ...temporaryToken, property: matchedProperty, operator, value: null });\n    };\n\n    const operator = temporaryToken.operator;\n    const onChangeOperator = (newOperator: ComparisonOperator) => {\n      setTemporaryToken({ ...temporaryToken, operator: newOperator });\n    };\n\n    const value = temporaryToken.value;\n    const onChangeValue = (newValue: unknown) => {\n      setTemporaryToken({ ...temporaryToken, value: newValue });\n    };\n\n    return { token: temporaryToken, property, onChangePropertyKey, operator, onChangeOperator, value, onChangeValue };\n  });\n\n  return (\n    <div className={styles['token-editor']} ref={tokenListRef}>\n      <TokenEditorFields\n        supportsGroups={supportsGroups}\n        tokens={groups.map(group => group.token)}\n        onRemove={index => {\n          const updated = tempGroup.filter((_, existingIndex) => existingIndex !== index);\n          onChangeTempGroup(updated);\n          setNextFocusIndex(index);\n        }}\n        onRemoveFromGroup={index => {\n          const releasedToken = tempGroup[index];\n          const updated = tempGroup.filter((_, existingIndex) => existingIndex !== index);\n          onChangeTempGroup(updated);\n          onTokenRelease(releasedToken);\n          setNextFocusIndex(index);\n        }}\n        onSubmit={onSubmit}\n        renderProperty={index => (\n          <PropertyInput\n            property={groups[index].property}\n            onChangePropertyKey={groups[index].onChangePropertyKey}\n            asyncProps={asyncProperties ? asyncProps : null}\n            filteringProperties={filteringProperties}\n            onLoadItems={onLoadItems}\n            customGroupsText={customGroupsText}\n            i18nStrings={i18nStrings}\n            freeTextFiltering={freeTextFiltering}\n          />\n        )}\n        renderOperator={index => (\n          <OperatorInput\n            property={groups[index].property}\n            operator={groups[index].operator}\n            onChangeOperator={groups[index].onChangeOperator}\n            i18nStrings={i18nStrings}\n            freeTextFiltering={freeTextFiltering}\n            triggerVariant={supportsGroups ? 'label' : 'option'}\n          />\n        )}\n        renderValue={index => (\n          <ValueInput\n            property={groups[index].property}\n            operator={groups[index].operator}\n            value={groups[index].value}\n            onChangeValue={groups[index].onChangeValue}\n            asyncProps={asyncProps}\n            filteringOptions={filteringOptions}\n            onLoadItems={onLoadItems}\n            i18nStrings={i18nStrings}\n          />\n        )}\n        i18nStrings={i18nStrings}\n      />\n\n      {supportsGroups && (\n        <div className={clsx(styles['token-editor-add-token'], testUtilStyles['token-editor-token-add-actions'])}>\n          <InternalButtonDropdown\n            variant=\"normal\"\n            ariaLabel={i18nStrings.tokenEditorAddTokenActionsAriaLabel}\n            items={tokensToCapture.map((token, index) => {\n              return {\n                id: index.toString(),\n                text: i18nStrings.tokenEditorAddExistingTokenLabel?.(token) ?? '',\n                ariaLabel: i18nStrings.tokenEditorAddExistingTokenAriaLabel?.(token) ?? '',\n              };\n            })}\n            onItemClick={({ detail }) => {\n              const index = parseInt(detail.id);\n              if (!isNaN(index) && tokensToCapture[index]) {\n                onChangeTempGroup([...tempGroup, { ...tokensToCapture[index] }]);\n                setNextFocusIndex(groups.length);\n                onTokenCapture(tokensToCapture[index]);\n              }\n            }}\n            disabled={tokensToCapture.length === 0}\n            showMainActionOnly={tokensToCapture.length === 0}\n            mainAction={{\n              text: i18nStrings.tokenEditorAddNewTokenLabel ?? '',\n              onClick: () => {\n                onChangeTempGroup([...tempGroup, { property: null, operator: ':', value: null }]);\n                setNextFocusIndex(groups.length);\n              },\n            }}\n          />\n        </div>\n      )}\n\n      <div className={styles['token-editor-actions']}>\n        <span\n          {...getAnalyticsMetadataAttribute({\n            action: 'editCancel',\n          } as Partial<GeneratedAnalyticsMetadataPropertyEditCancel>)}\n        >\n          <InternalButton\n            formAction=\"none\"\n            variant=\"link\"\n            className={clsx(styles['token-editor-cancel'], testUtilStyles['token-editor-cancel'])}\n            onClick={onDismiss}\n          >\n            {i18nStrings.cancelActionText}\n          </InternalButton>\n        </span>\n        <span\n          {...getAnalyticsMetadataAttribute({\n            action: 'editConfirm',\n          } as Partial<GeneratedAnalyticsMetadataPropertyEditConfirm>)}\n        >\n          <InternalButton\n            className={clsx(styles['token-editor-submit'], testUtilStyles['token-editor-submit'])}\n            formAction=\"none\"\n            onClick={onSubmit}\n          >\n            {i18nStrings.applyActionText}\n          </InternalButton>\n        </span>\n      </div>\n    </div>\n  );\n}\n\ninterface TokenEditorLayout {\n  tokens: InternalToken[];\n  supportsGroups: boolean;\n  onRemove: (index: number) => void;\n  onRemoveFromGroup: (index: number) => void;\n  onSubmit: () => void;\n  renderProperty: (index: number) => React.ReactNode;\n  renderOperator: (index: number) => React.ReactNode;\n  renderValue: (index: number) => React.ReactNode;\n  i18nStrings: I18nStringsInternal;\n}\n\nfunction TokenEditorFields({\n  tokens,\n  supportsGroups,\n  onRemove,\n  onRemoveFromGroup,\n  onSubmit,\n  renderProperty,\n  renderOperator,\n  renderValue,\n  i18nStrings,\n}: TokenEditorLayout) {\n  const isMobile = useMobile();\n  const isNarrow = isMobile || !supportsGroups;\n\n  const propertyLabelId = useUniqueId();\n  const operatorLabelId = useUniqueId();\n  const valueLabelId = useUniqueId();\n  const headers = (\n    <div className={styles['token-editor-grid-group']}>\n      <div id={propertyLabelId} className={styles['token-editor-grid-header']}>\n        {i18nStrings.propertyText}\n      </div>\n      <div id={operatorLabelId} className={styles['token-editor-grid-header']}>\n        {i18nStrings.operatorText}\n      </div>\n      <div id={valueLabelId} className={styles['token-editor-grid-header']}>\n        {i18nStrings.valueText}\n      </div>\n      <div className={styles['token-editor-grid-header']}></div>\n    </div>\n  );\n\n  return (\n    <form\n      className={clsx(\n        styles['token-editor-grid'],\n        isNarrow && styles['token-editor-narrow'],\n        styles['token-editor-form']\n      )}\n      onSubmit={event => {\n        event.preventDefault();\n        onSubmit();\n      }}\n    >\n      {!isNarrow && headers}\n\n      {tokens.map((token, index) => (\n        <div\n          key={index}\n          role=\"group\"\n          aria-label={i18nStrings.formatToken(token).formattedText}\n          className={clsx(styles['token-editor-grid-group'], supportsGroups && styles['token-editor-supports-groups'])}\n        >\n          <div className={clsx(styles['token-editor-grid-cell'], isNarrow && styles['token-editor-narrow'])}>\n            <TokenEditorField\n              isNarrow={isNarrow}\n              label={i18nStrings.propertyText}\n              labelId={propertyLabelId}\n              className={clsx(styles['token-editor-field-property'], testUtilStyles['token-editor-field-property'])}\n              index={index}\n            >\n              {renderProperty(index)}\n            </TokenEditorField>\n          </div>\n\n          <div className={clsx(styles['token-editor-grid-cell'], isNarrow && styles['token-editor-narrow'])}>\n            <TokenEditorField\n              isNarrow={isNarrow}\n              label={i18nStrings.operatorText}\n              labelId={operatorLabelId}\n              className={clsx(styles['token-editor-field-operator'], testUtilStyles['token-editor-field-operator'])}\n              index={index}\n            >\n              {renderOperator(index)}\n            </TokenEditorField>\n          </div>\n\n          <div className={clsx(styles['token-editor-grid-cell'], isNarrow && styles['token-editor-narrow'])}>\n            <TokenEditorField\n              isNarrow={isNarrow}\n              label={i18nStrings.valueText}\n              labelId={valueLabelId}\n              className={clsx(styles['token-editor-field-value'], testUtilStyles['token-editor-field-value'])}\n              index={index}\n            >\n              {renderValue(index)}\n            </TokenEditorField>\n          </div>\n\n          {supportsGroups && (\n            <div className={clsx(styles['token-editor-grid-cell'], isNarrow && styles['token-editor-narrow'])}>\n              <div className={styles['token-editor-remove-token']}>\n                <TokenEditorRemoveActions\n                  isNarrow={isNarrow}\n                  ariaLabel={i18nStrings.tokenEditorTokenActionsAriaLabel?.(token) ?? ''}\n                  mainActionAriaLabel={i18nStrings.tokenEditorTokenRemoveAriaLabel?.(token) ?? ''}\n                  disabled={tokens.length === 1}\n                  items={[\n                    {\n                      id: 'remove',\n                      text: i18nStrings.tokenEditorTokenRemoveLabel ?? '',\n                      disabled: token.standaloneIndex !== undefined,\n                    },\n                    { id: 'remove-from-group', text: i18nStrings.tokenEditorTokenRemoveFromGroupLabel ?? '' },\n                  ]}\n                  onItemClick={itemId => {\n                    switch (itemId) {\n                      case 'remove':\n                        return onRemove(index);\n                      case 'remove-from-group':\n                        return onRemoveFromGroup(index);\n                    }\n                  }}\n                  index={index}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      ))}\n    </form>\n  );\n}\n\nfunction TokenEditorField({\n  isNarrow,\n  label,\n  labelId,\n  children,\n  className,\n  index,\n}: {\n  isNarrow: boolean;\n  label: React.ReactNode;\n  labelId: string;\n  children: React.ReactNode;\n  className: string;\n  index: number;\n}) {\n  return isNarrow ? (\n    <InternalFormField label={label} className={className} stretch={true} data-testindex={index}>\n      {children}\n    </InternalFormField>\n  ) : (\n    <FormFieldContext.Provider value={{ ariaLabelledby: labelId }}>\n      <InternalFormField className={className} data-testindex={index}>\n        {children}\n      </InternalFormField>\n    </FormFieldContext.Provider>\n  );\n}\n\nfunction TokenEditorRemoveActions({\n  isNarrow,\n  ariaLabel,\n  mainActionAriaLabel,\n  disabled,\n  items,\n  onItemClick,\n  index,\n}: {\n  isNarrow: boolean;\n  ariaLabel: string;\n  mainActionAriaLabel: string;\n  disabled: boolean;\n  items: ButtonDropdownProps.Item[];\n  onItemClick: (itemId: string) => void;\n  index: number;\n}) {\n  return isNarrow ? (\n    <InternalButtonDropdown\n      variant=\"normal\"\n      ariaLabel={ariaLabel}\n      items={items.slice(1)}\n      onItemClick={({ detail }) => onItemClick(detail.id)}\n      disabled={disabled}\n      mainAction={{\n        text: items[0].text,\n        onClick: () => onItemClick(items[0].id),\n        disabled,\n        ariaLabel: mainActionAriaLabel,\n      }}\n      className={testUtilStyles['token-editor-token-remove-actions']}\n      data-testindex={index}\n    />\n  ) : (\n    <InternalButtonDropdown\n      variant=\"icon\"\n      ariaLabel={ariaLabel}\n      items={items}\n      onItemClick={({ detail }) => onItemClick(detail.id)}\n      disabled={disabled}\n      className={testUtilStyles['token-editor-token-remove-actions']}\n      data-testindex={index}\n    />\n  );\n}\n"]}