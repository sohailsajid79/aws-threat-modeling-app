{"version":3,"file":"navigation.js","sourceRoot":"","sources":["../../../../src/calendar/utils/navigation.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,iBAAiB,EAAE,WAAW,EAAE,UAAU,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,UAAU,CAAC;AAIrH,MAAM,UAAU,WAAW,CAAC,SAAe,EAAE,eAAoD;IAC/F,OAAO,OAAO,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC;AAChD,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,SAAe,EAAE,eAAoD;IAC/F,OAAO,OAAO,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC,CAAC;AACjD,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,SAAe,EAAE,eAAoD;IAChG,OAAO,OAAO,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC;AAChD,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,SAAe,EAAE,eAAoD;IAChG,OAAO,OAAO,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC,CAAC;AACjD,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,SAAe,EAAE,eAAoD;IACjG,OAAO,SAAS,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC;AAClD,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,SAAe,EAAE,eAAoD;IACjG,OAAO,SAAS,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC,CAAC;AACnD,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,SAAe,EAAE,eAAoD;IACjG,OAAO,SAAS,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC;AAClD,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,SAAe,EAAE,eAAoD;IAC/F,OAAO,SAAS,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC,CAAC;AACnD,CAAC;AAED,2EAA2E;AAC3E,4EAA4E;AAC5E,MAAM,UAAU,UAAU,CAAC,IAAU,EAAE,eAAoD;IACzF,OAAO,WAAW,CAAC,EAAE,IAAI,EAAE,eAAe,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;AACpE,CAAC;AAED,2EAA2E;AAC3E,8EAA8E;AAC9E,MAAM,UAAU,YAAY,CAAC,IAAU,EAAE,eAAoD;IAC3F,OAAO,WAAW,CAAC,EAAE,IAAI,EAAE,eAAe,EAAE,WAAW,EAAE,OAAO,EAAE,CAAC,CAAC;AACtE,CAAC;AAED,SAAS,WAAW,CAAC,EACnB,IAAI,EACJ,WAAW,EACX,eAAe,GAKhB;IACC,MAAM,kBAAkB,GAAG,WAAW,KAAK,OAAO,CAAC;IACnD,MAAM,YAAY,GAAG,kBAAkB,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,YAAY,CAAC;IACrE,MAAM,QAAQ,GAAG,kBAAkB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC;IAC1D,MAAM,UAAU,GAAG,kBAAkB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC;IAEjE,MAAM,SAAS,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;IACrC,IAAI,eAAe,CAAC,SAAS,CAAC,EAAE;QAC9B,OAAO,SAAS,CAAC;KAClB;IACD,MAAM,gBAAgB,GAAG,QAAQ,CAAC,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC;IACjE,OAAO,UAAU,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,SAAS,CAAC;AAChF,CAAC;AAED,0EAA0E;AAC1E,wEAAwE;AACxE,SAAS,OAAO,CAAC,SAAe,EAAE,eAAoD,EAAE,IAAY;IAClG,OAAO,QAAQ,CAAC,EAAE,SAAS,EAAE,WAAW,EAAE,KAAK,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;AAC5E,CAAC;AAED,8EAA8E;AAC9E,+EAA+E;AAC/E,SAAS,SAAS,CAAC,SAAe,EAAE,eAAoD,EAAE,IAAY;IACpG,OAAO,QAAQ,CAAC,EAAE,SAAS,EAAE,WAAW,EAAE,OAAO,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9E,CAAC;AAED,SAAS,QAAQ,CAAC,EAChB,SAAS,EACT,WAAW,EACX,eAAe,EACf,IAAI,GAML;IACC,MAAM,kBAAkB,GAAG,WAAW,KAAK,OAAO,CAAC;IACnD,MAAM,QAAQ,GAAG,kBAAkB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC;IAC1D,MAAM,UAAU,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAE/C,IAAI,OAAO,GAAG,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAExC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE;QAChC,IAAI,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,GAAG,UAAU,EAAE;YAChE,OAAO,SAAS,CAAC;SAClB;QACD,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;KACnC;IAED,OAAO,OAAO,CAAC;AACjB,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { addDays, addMonths, differenceInYears, isSameMonth, isSameYear, startOfMonth, startOfYear } from 'date-fns';\n\nimport { CalendarProps } from '../interfaces';\n\nexport function moveNextDay(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return moveDay(startDate, isDateFocusable, 1);\n}\n\nexport function movePrevDay(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return moveDay(startDate, isDateFocusable, -1);\n}\n\nexport function moveNextWeek(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return moveDay(startDate, isDateFocusable, 7);\n}\n\nexport function movePrevWeek(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return moveDay(startDate, isDateFocusable, -7);\n}\n\nexport function moveNextMonth(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return moveMonth(startDate, isDateFocusable, 1);\n}\n\nexport function movePrevMonth(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return moveMonth(startDate, isDateFocusable, -1);\n}\n\nexport function moveMonthDown(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return moveMonth(startDate, isDateFocusable, 3);\n}\n\nexport function moveMonthUp(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return moveMonth(startDate, isDateFocusable, -3);\n}\n\n// Returns first enabled date of the month corresponding to the given date.\n// If all month's days are disabled, the first day of the month is returned.\nexport function getBaseDay(date: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return getBaseDate({ date, isDateFocusable, granularity: 'day' });\n}\n\n// Returns first enabled month of the year corresponding to the given date.\n// If all year's months are disabled, the first month of the year is returned.\nexport function getBaseMonth(date: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction) {\n  return getBaseDate({ date, isDateFocusable, granularity: 'month' });\n}\n\nfunction getBaseDate({\n  date,\n  granularity,\n  isDateFocusable,\n}: {\n  date: Date;\n  granularity: CalendarProps.Granularity;\n  isDateFocusable: CalendarProps.IsDateEnabledFunction;\n}) {\n  const isMonthGranularity = granularity === 'month';\n  const getStartDate = isMonthGranularity ? startOfYear : startOfMonth;\n  const moveDate = isMonthGranularity ? moveMonth : moveDay;\n  const isSamePage = isMonthGranularity ? isSameYear : isSameMonth;\n\n  const startDate = getStartDate(date);\n  if (isDateFocusable(startDate)) {\n    return startDate;\n  }\n  const firstEnabledDate = moveDate(startDate, isDateFocusable, 1);\n  return isSamePage(startDate, firstEnabledDate) ? firstEnabledDate : startDate;\n}\n\n// Iterates days forwards or backwards until the next active day is found.\n// If there is no active day in a year range, the start day is returned.\nfunction moveDay(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction, step: number): Date {\n  return moveDate({ startDate, granularity: 'day', isDateFocusable, step });\n}\n\n// Iterates months forwards or backwards until the next active month is found.\n// If there is no active month in a 10 year range, the start month is returned.\nfunction moveMonth(startDate: Date, isDateFocusable: CalendarProps.IsDateEnabledFunction, step: number): Date {\n  return moveDate({ startDate, granularity: 'month', isDateFocusable, step });\n}\n\nfunction moveDate({\n  startDate,\n  granularity,\n  isDateFocusable,\n  step,\n}: {\n  startDate: Date;\n  granularity: CalendarProps.Granularity;\n  isDateFocusable: CalendarProps.IsDateEnabledFunction;\n  step: number;\n}) {\n  const isMonthGranularity = granularity === 'month';\n  const addSteps = isMonthGranularity ? addMonths : addDays;\n  const limitYears = isMonthGranularity ? 1 : 10;\n\n  let current = addSteps(startDate, step);\n\n  while (!isDateFocusable(current)) {\n    if (Math.abs(differenceInYears(startDate, current)) > limitYears) {\n      return startDate;\n    }\n    current = addSteps(current, step);\n  }\n\n  return current;\n}\n"]}