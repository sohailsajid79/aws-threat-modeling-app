{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useLayoutEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\nimport { isDevelopment } from '../../is-development';\nfunction manageDefaultContainer(setState) {\n  const newContainer = document.createElement('div');\n  document.body.appendChild(newContainer);\n  setState(newContainer);\n  return () => {\n    document.body.removeChild(newContainer);\n  };\n}\nfunction manageAsyncContainer(getContainer, removeContainer, setState) {\n  let newContainer;\n  getContainer().then(container => {\n    newContainer = container;\n    setState(container);\n  }, error => {\n    console.warn('[AwsUi] [portal]: failed to load portal root', error);\n  });\n  return () => {\n    removeContainer(newContainer);\n  };\n}\n/**\n * A safe react portal component that renders to a provided node.\n * If a node isn't provided, it creates one under document.body.\n */\nexport default function Portal(_ref) {\n  let {\n    container,\n    getContainer,\n    removeContainer,\n    children\n  } = _ref;\n  const [activeContainer, setActiveContainer] = useState(container !== null && container !== void 0 ? container : null);\n  useLayoutEffect(() => {\n    if (container) {\n      setActiveContainer(container);\n      return;\n    }\n    if (isDevelopment) {\n      if (getContainer && !removeContainer) {\n        warnOnce('portal', '`removeContainer` is required when `getContainer` is provided');\n      }\n      if (!getContainer && removeContainer) {\n        warnOnce('portal', '`getContainer` is required when `removeContainer` is provided');\n      }\n    }\n    if (getContainer && removeContainer) {\n      return manageAsyncContainer(getContainer, removeContainer, setActiveContainer);\n    }\n    return manageDefaultContainer(setActiveContainer);\n  }, [container, getContainer, removeContainer]);\n  return activeContainer && createPortal(children, activeContainer);\n}","map":{"version":3,"names":["useLayoutEffect","useState","createPortal","warnOnce","isDevelopment","manageDefaultContainer","setState","newContainer","document","createElement","body","appendChild","removeChild","manageAsyncContainer","getContainer","removeContainer","then","container","error","console","warn","Portal","_ref","children","activeContainer","setActiveContainer"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/components/portal/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useLayoutEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\n\nimport { isDevelopment } from '../../is-development';\n\nexport interface PortalProps {\n  container?: null | Element;\n  getContainer?: () => Promise<HTMLElement>;\n  removeContainer?: (container: HTMLElement) => void;\n  children: React.ReactNode;\n}\n\nfunction manageDefaultContainer(setState: React.Dispatch<React.SetStateAction<Element | null>>) {\n  const newContainer = document.createElement('div');\n  document.body.appendChild(newContainer);\n  setState(newContainer);\n  return () => {\n    document.body.removeChild(newContainer);\n  };\n}\n\nfunction manageAsyncContainer(\n  getContainer: () => Promise<HTMLElement>,\n  removeContainer: (container: HTMLElement) => void,\n  setState: React.Dispatch<React.SetStateAction<Element | null>>\n) {\n  let newContainer: HTMLElement;\n  getContainer().then(\n    container => {\n      newContainer = container;\n      setState(container);\n    },\n    error => {\n      console.warn('[AwsUi] [portal]: failed to load portal root', error);\n    }\n  );\n  return () => {\n    removeContainer(newContainer);\n  };\n}\n\n/**\n * A safe react portal component that renders to a provided node.\n * If a node isn't provided, it creates one under document.body.\n */\nexport default function Portal({ container, getContainer, removeContainer, children }: PortalProps) {\n  const [activeContainer, setActiveContainer] = useState<Element | null>(container ?? null);\n\n  useLayoutEffect(() => {\n    if (container) {\n      setActiveContainer(container);\n      return;\n    }\n    if (isDevelopment) {\n      if (getContainer && !removeContainer) {\n        warnOnce('portal', '`removeContainer` is required when `getContainer` is provided');\n      }\n      if (!getContainer && removeContainer) {\n        warnOnce('portal', '`getContainer` is required when `removeContainer` is provided');\n      }\n    }\n\n    if (getContainer && removeContainer) {\n      return manageAsyncContainer(getContainer, removeContainer, setActiveContainer);\n    }\n    return manageDefaultContainer(setActiveContainer);\n  }, [container, getContainer, removeContainer]);\n\n  return activeContainer && createPortal(children, activeContainer);\n}\n"],"mappings":"AAAA;AACA;AACA,SAAgBA,eAAe,EAAEC,QAAQ,QAAQ,OAAO;AACxD,SAASC,YAAY,QAAQ,WAAW;AAExC,SAASC,QAAQ,QAAQ,+CAA+C;AAExE,SAASC,aAAa,QAAQ,sBAAsB;AASpD,SAASC,sBAAsBA,CAACC,QAA8D;EAC5F,MAAMC,YAAY,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EAClDD,QAAQ,CAACE,IAAI,CAACC,WAAW,CAACJ,YAAY,CAAC;EACvCD,QAAQ,CAACC,YAAY,CAAC;EACtB,OAAO,MAAK;IACVC,QAAQ,CAACE,IAAI,CAACE,WAAW,CAACL,YAAY,CAAC;EACzC,CAAC;AACH;AAEA,SAASM,oBAAoBA,CAC3BC,YAAwC,EACxCC,eAAiD,EACjDT,QAA8D;EAE9D,IAAIC,YAAyB;EAC7BO,YAAY,EAAE,CAACE,IAAI,CACjBC,SAAS,IAAG;IACVV,YAAY,GAAGU,SAAS;IACxBX,QAAQ,CAACW,SAAS,CAAC;EACrB,CAAC,EACDC,KAAK,IAAG;IACNC,OAAO,CAACC,IAAI,CAAC,8CAA8C,EAAEF,KAAK,CAAC;EACrE,CAAC,CACF;EACD,OAAO,MAAK;IACVH,eAAe,CAACR,YAAY,CAAC;EAC/B,CAAC;AACH;AAEA;;;;AAIA,eAAc,SAAUc,MAAMA,CAAAC,IAAA,EAAoE;EAAA,IAAnE;IAAEL,SAAS;IAAEH,YAAY;IAAEC,eAAe;IAAEQ;EAAQ,CAAe,GAAAD,IAAA;EAChG,MAAM,CAACE,eAAe,EAAEC,kBAAkB,CAAC,GAAGxB,QAAQ,CAAiBgB,SAAS,aAATA,SAAS,cAATA,SAAS,GAAI,IAAI,CAAC;EAEzFjB,eAAe,CAAC,MAAK;IACnB,IAAIiB,SAAS,EAAE;MACbQ,kBAAkB,CAACR,SAAS,CAAC;MAC7B;;IAEF,IAAIb,aAAa,EAAE;MACjB,IAAIU,YAAY,IAAI,CAACC,eAAe,EAAE;QACpCZ,QAAQ,CAAC,QAAQ,EAAE,+DAA+D,CAAC;;MAErF,IAAI,CAACW,YAAY,IAAIC,eAAe,EAAE;QACpCZ,QAAQ,CAAC,QAAQ,EAAE,+DAA+D,CAAC;;;IAIvF,IAAIW,YAAY,IAAIC,eAAe,EAAE;MACnC,OAAOF,oBAAoB,CAACC,YAAY,EAAEC,eAAe,EAAEU,kBAAkB,CAAC;;IAEhF,OAAOpB,sBAAsB,CAACoB,kBAAkB,CAAC;EACnD,CAAC,EAAE,CAACR,SAAS,EAAEH,YAAY,EAAEC,eAAe,CAAC,CAAC;EAE9C,OAAOS,eAAe,IAAItB,YAAY,CAACqB,QAAQ,EAAEC,eAAe,CAAC;AACnE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}