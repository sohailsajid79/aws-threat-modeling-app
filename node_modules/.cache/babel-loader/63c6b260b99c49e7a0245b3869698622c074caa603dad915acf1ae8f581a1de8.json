{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useRef, useState } from 'react';\nexport function createUseDiscoveredContent(componentName, onContentRegistered) {\n  return function useDiscoveredContent(_ref) {\n    let {\n      type,\n      header,\n      children\n    } = _ref;\n    const headerRef = useRef(null);\n    const contentRef = useRef(null);\n    const replacementHeaderRef = useRef(null);\n    const replacementContentRef = useRef(null);\n    const [headerReplacementType, setFoundHeaderReplacement] = useState('original');\n    const [contentReplacementType, setFoundContentReplacement] = useState('original');\n    const mountedProvider = useRef();\n    useEffect(() => {\n      const context = {\n        type,\n        headerRef,\n        contentRef\n      };\n      return onContentRegistered(provider => {\n        let mounted = true;\n        function checkMounted(methodName) {\n          if (!mounted) {\n            console.warn(`[AwsUi] [Runtime ${componentName} content] \\`${methodName}\\` called after component unmounted`);\n            return false;\n          }\n          return true;\n        }\n        mountedProvider.current = provider.runReplacer(context, {\n          hideHeader() {\n            if (checkMounted('hideHeader')) {\n              setFoundHeaderReplacement('remove');\n            }\n          },\n          restoreHeader() {\n            if (checkMounted('restoreHeader')) {\n              setFoundHeaderReplacement('original');\n            }\n          },\n          replaceHeader(replacer) {\n            if (checkMounted('replaceHeader')) {\n              replacer(replacementHeaderRef.current);\n              setFoundHeaderReplacement('replaced');\n            }\n          },\n          hideContent() {\n            if (checkMounted('hideContent')) {\n              setFoundContentReplacement('remove');\n            }\n          },\n          restoreContent() {\n            if (checkMounted('restoreContent')) {\n              setFoundContentReplacement('original');\n            }\n          },\n          replaceContent(replacer) {\n            if (checkMounted('replaceContent')) {\n              replacer(replacementContentRef.current);\n              setFoundContentReplacement('replaced');\n            }\n          }\n        });\n        return () => {\n          var _a;\n          (_a = mountedProvider.current) === null || _a === void 0 ? void 0 : _a.unmount({\n            replacementHeaderContainer: replacementHeaderRef.current,\n            replacementContentContainer: replacementContentRef.current\n          });\n          mounted = false;\n        };\n      });\n    }, [type]);\n    useEffect(() => {\n      var _a;\n      (_a = mountedProvider.current) === null || _a === void 0 ? void 0 : _a.update();\n    }, [type, header, children]);\n    return {\n      headerReplacementType,\n      contentReplacementType,\n      headerRef: headerRef,\n      replacementHeaderRef: replacementHeaderRef,\n      contentRef: contentRef,\n      replacementContentRef: replacementContentRef\n    };\n  };\n}","map":{"version":3,"names":["useEffect","useRef","useState","createUseDiscoveredContent","componentName","onContentRegistered","useDiscoveredContent","_ref","type","header","children","headerRef","contentRef","replacementHeaderRef","replacementContentRef","headerReplacementType","setFoundHeaderReplacement","contentReplacementType","setFoundContentReplacement","mountedProvider","context","provider","mounted","checkMounted","methodName","console","warn","current","runReplacer","hideHeader","restoreHeader","replaceHeader","replacer","hideContent","restoreContent","replaceContent","_a","unmount","replacementHeaderContainer","replacementContentContainer","update"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/plugins/helpers/use-discovered-content.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ReactNode, useEffect, useRef, useState } from 'react';\n\nimport {\n  AlertFlashContentController,\n  AlertFlashContentResult,\n  ReplacementType,\n} from '../controllers/alert-flash-content';\n\nexport function createUseDiscoveredContent(\n  componentName: string,\n  onContentRegistered: AlertFlashContentController['onContentRegistered']\n) {\n  return function useDiscoveredContent({\n    type,\n    header,\n    children,\n  }: {\n    type: string;\n    header: ReactNode;\n    children: ReactNode;\n  }) {\n    const headerRef = useRef<HTMLDivElement>(null);\n    const contentRef = useRef<HTMLDivElement>(null);\n    const replacementHeaderRef = useRef<HTMLDivElement>(null);\n    const replacementContentRef = useRef<HTMLDivElement>(null);\n    const [headerReplacementType, setFoundHeaderReplacement] = useState<ReplacementType>('original');\n    const [contentReplacementType, setFoundContentReplacement] = useState<ReplacementType>('original');\n    const mountedProvider = useRef<AlertFlashContentResult | undefined>();\n\n    useEffect(() => {\n      const context = { type, headerRef, contentRef };\n\n      return onContentRegistered(provider => {\n        let mounted = true;\n\n        function checkMounted(methodName: string) {\n          if (!mounted) {\n            console.warn(\n              `[AwsUi] [Runtime ${componentName} content] \\`${methodName}\\` called after component unmounted`\n            );\n            return false;\n          }\n          return true;\n        }\n\n        mountedProvider.current = provider.runReplacer(context, {\n          hideHeader() {\n            if (checkMounted('hideHeader')) {\n              setFoundHeaderReplacement('remove');\n            }\n          },\n          restoreHeader() {\n            if (checkMounted('restoreHeader')) {\n              setFoundHeaderReplacement('original');\n            }\n          },\n          replaceHeader(replacer: (container: HTMLElement) => void) {\n            if (checkMounted('replaceHeader')) {\n              replacer(replacementHeaderRef.current!);\n              setFoundHeaderReplacement('replaced');\n            }\n          },\n          hideContent() {\n            if (checkMounted('hideContent')) {\n              setFoundContentReplacement('remove');\n            }\n          },\n          restoreContent() {\n            if (checkMounted('restoreContent')) {\n              setFoundContentReplacement('original');\n            }\n          },\n          replaceContent(replacer: (container: HTMLElement) => void) {\n            if (checkMounted('replaceContent')) {\n              replacer(replacementContentRef.current!);\n              setFoundContentReplacement('replaced');\n            }\n          },\n        });\n\n        return () => {\n          mountedProvider.current?.unmount({\n            replacementHeaderContainer: replacementHeaderRef.current!,\n            replacementContentContainer: replacementContentRef.current!,\n          });\n          mounted = false;\n        };\n      });\n    }, [type]);\n\n    useEffect(() => {\n      mountedProvider.current?.update();\n    }, [type, header, children]);\n\n    return {\n      headerReplacementType,\n      contentReplacementType,\n      headerRef: headerRef as React.Ref<HTMLDivElement>,\n      replacementHeaderRef: replacementHeaderRef as React.Ref<HTMLDivElement>,\n      contentRef: contentRef as React.Ref<HTMLDivElement>,\n      replacementContentRef: replacementContentRef as React.Ref<HTMLDivElement>,\n    };\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}