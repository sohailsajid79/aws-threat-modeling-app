{"ast":null,"code":"/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** *//** @jsxImportSource @emotion/react */import SpaceBetween from'@cloudscape-design/components/space-between';import{useState,useCallback,useRef,useMemo}from'react';import{Button,ColumnLayout,Container,Header,Select,TextContent,Alert}from'@cloudscape-design/components';import getMobileMediaQuery from'../../../utils/getMobileMediaQuery';import*as awsui from'@cloudscape-design/design-tokens';import{css}from'@emotion/react';import Tags from'../ControlCard/components/Tags';import{DEFAULT_NEW_ENTITY_ID}from'../../../configs';import ThreatLinkView from'../../threats/ThreatLinkView';import{useMitigationsContext,useThreatsContext}from'../../../contexts';import MitigationLinkView from'../../mitigations/MitigationLinkView';import{jsx as _jsx,jsxs as _jsxs}from\"@emotion/react/jsx-runtime\";const styles={header:css({display:'inline-flex',alignItems:'center',[getMobileMediaQuery()]:{display:'block',marginTop:awsui.spaceScaledS}}),tags:css({marginRight:awsui.spaceScaledS,marginLeft:awsui.spaceScaledS,[getMobileMediaQuery()]:{marginLeft:'0px'}}),info:css({marginLeft:awsui.spaceScaledS,[getMobileMediaQuery()]:{marginLeft:'0px'}}),finalStatementSection:css({'&:hover':{backgroundColor:awsui.colorBackgroundDropdownItemHover}}),metadataContainer:css({'h3>span>span':{fontSize:'20px'}})};const ControlCreationCard=_ref=>{var _editingEntity$metada,_editingEntity$metada2;let{onSave,onAddTagToEntity,onRemoveTagFromEntity,controlList}=_ref;const ref=useRef(null);const DEFAULT_ENTITY=useMemo(()=>{return{id:DEFAULT_NEW_ENTITY_ID,numericId:-1,content:'',metadata:[{key:'Comments',value:''},{key:'STRIDE',value:''}]};},[]);const[editingEntity,setEditingEntity]=useState(DEFAULT_ENTITY);const[linkedThreatIds,setLinkedThreatIds]=useState([]);const[showAlert,setShowAlert]=useState(false);const[selectedControl,setSelectedControl]=useState(null);const[controlId,setControlId]=useState(editingEntity.id);const[tags,setTags]=useState(editingEntity.tags);const[metadataComments,setMetadataComments]=useState((_editingEntity$metada=editingEntity.metadata)===null||_editingEntity$metada===void 0?void 0:(_editingEntity$metada2=_editingEntity$metada.find(m=>m.key==='Comments'))===null||_editingEntity$metada2===void 0?void 0:_editingEntity$metada2.value);const{statementList}=useThreatsContext();const{mitigationList,saveMitigation}=useMitigationsContext();const[linkedMitigationIds,setLinkedMitigationIds]=useState([]);const handleSave=useCallback(()=>{if(linkedThreatIds.length===0){setShowAlert(true);return;}editingEntity.id=controlId||'new';editingEntity.content=(selectedControl===null||selectedControl===void 0?void 0:selectedControl.label)||'';editingEntity.tags=tags||[];if(editingEntity.metadata&&editingEntity.metadata.find(m=>m.key==='Comments')){editingEntity.metadata.find(m=>m.key==='Comments').value=(selectedControl===null||selectedControl===void 0?void 0:selectedControl.description)||'';}if(editingEntity.metadata&&editingEntity.metadata.find(m=>m.key==='STRIDE')){editingEntity.metadata.find(m=>m.key==='STRIDE').value=(selectedControl===null||selectedControl===void 0?void 0:selectedControl.filteringTags)||[];}onSave===null||onSave===void 0?void 0:onSave(editingEntity,linkedMitigationIds,linkedThreatIds);setEditingEntity(DEFAULT_ENTITY);setControlId('new');setSelectedControl(null);setTags([]);setMetadataComments('');setLinkedMitigationIds([]);setLinkedThreatIds([]);},[controlId,editingEntity,linkedMitigationIds,linkedThreatIds,onSave,selectedControl===null||selectedControl===void 0?void 0:selectedControl.label,selectedControl===null||selectedControl===void 0?void 0:selectedControl.description,tags,DEFAULT_ENTITY,selectedControl===null||selectedControl===void 0?void 0:selectedControl.filteringTags]);const handleReset=useCallback(()=>{setEditingEntity(DEFAULT_ENTITY);setControlId('new');setSelectedControl(null);setTags([]);setMetadataComments('');setLinkedMitigationIds([]);setLinkedThreatIds([]);},[DEFAULT_ENTITY]);const handleControlChange=selectedOption=>{setSelectedControl(selectedOption);setControlId(selectedOption.value);setTags(selectedOption.tags);setMetadataComments(selectedOption.description);};const handleAddMitigationLink=useCallback(mitigationIdOrNewMitigation=>{if(mitigationList.find(m=>m.id===mitigationIdOrNewMitigation)){setLinkedMitigationIds(prev=>[...prev,mitigationIdOrNewMitigation]);}else{const newMitigation=saveMitigation({numericId:-1,content:mitigationIdOrNewMitigation,id:'new'});setLinkedMitigationIds(prev=>[...prev,newMitigation.id]);}},[mitigationList,saveMitigation]);const handleOnDismissAlert=_event=>{setShowAlert(false);};return _jsx(\"div\",{ref:ref,children:_jsx(Container,{header:_jsx(Header,{children:_jsxs(\"div\",{css:styles.header,children:['Add new control',_jsx(\"div\",{css:styles.tags,children:_jsx(Tags,{tags:tags,entityId:controlId,onAddTagToEntity:(_entityId,tag)=>onAddTagToEntity===null||onAddTagToEntity===void 0?void 0:onAddTagToEntity(editingEntity,tag),onRemoveTagFromEntity:(_entityId,tag)=>onRemoveTagFromEntity===null||onRemoveTagFromEntity===void 0?void 0:onRemoveTagFromEntity(editingEntity,tag)})})]})}),children:_jsxs(SpaceBetween,{direction:\"vertical\",size:\"s\",children:[_jsxs(SpaceBetween,{direction:\"horizontal\",size:\"s\",children:[_jsx(Button,{onClick:handleReset,children:\"Reset\"}),_jsx(Button,{variant:\"primary\",disabled:selectedControl===null,onClick:handleSave,children:\"Save\"}),_jsx(Alert,{dismissible:true,statusIconAriaLabel:\"Error\",type:\"error\",visible:showAlert,onDismiss:handleOnDismissAlert,header:\"Validation error\",children:\"Select at least one threat from the list.\"})]}),_jsxs(ColumnLayout,{columns:2,children:[_jsx(Select,{selectedOption:selectedControl,onChange:_ref2=>{let{detail}=_ref2;handleControlChange(detail.selectedOption);setShowAlert(false);},options:controlList===null||controlList===void 0?void 0:controlList.map(c=>{var _c$metadata,_c$metadata$find,_c$metadata2,_c$metadata2$find,_c$metadata3,_c$metadata3$find;return{label:c.content,labelTag:((_c$metadata=c.metadata)===null||_c$metadata===void 0?void 0:(_c$metadata$find=_c$metadata.find(m=>m.key==='STRIDE'))===null||_c$metadata$find===void 0?void 0:_c$metadata$find.value).join(','),value:c.id,description:(_c$metadata2=c.metadata)===null||_c$metadata2===void 0?void 0:(_c$metadata2$find=_c$metadata2.find(m=>m.key==='Comments'))===null||_c$metadata2$find===void 0?void 0:_c$metadata2$find.value,tags:c.tags,filteringTags:(_c$metadata3=c.metadata)===null||_c$metadata3===void 0?void 0:(_c$metadata3$find=_c$metadata3.find(m=>m.key==='STRIDE'))===null||_c$metadata3$find===void 0?void 0:_c$metadata3$find.value};}),filteringType:\"auto\",placeholder:\"Choose a security control\"}),_jsxs(SpaceBetween,{direction:\"vertical\",size:\"s\",children:[_jsx(ThreatLinkView,{linkedThreatIds:linkedThreatIds,threatList:statementList,onAddThreatLink:id=>setLinkedThreatIds(prev=>[...prev,id]),onRemoveThreatLink:id=>setLinkedThreatIds(prev=>prev.filter(p=>p!==id))}),_jsx(MitigationLinkView,{linkedMitigationIds:linkedMitigationIds,mitigationList:mitigationList,onAddMitigationLink:handleAddMitigationLink,onRemoveMitigationLink:id=>setLinkedMitigationIds(prev=>prev.filter(p=>p!==id))})]})]}),_jsx(TextContent,{children:metadataComments||''})]})})});};export default ControlCreationCard;","map":{"version":3,"names":["SpaceBetween","useState","useCallback","useRef","useMemo","Button","ColumnLayout","Container","Header","Select","TextContent","Alert","getMobileMediaQuery","awsui","css","Tags","DEFAULT_NEW_ENTITY_ID","ThreatLinkView","useMitigationsContext","useThreatsContext","MitigationLinkView","jsx","_jsx","jsxs","_jsxs","styles","header","display","alignItems","marginTop","spaceScaledS","tags","marginRight","marginLeft","info","finalStatementSection","backgroundColor","colorBackgroundDropdownItemHover","metadataContainer","fontSize","ControlCreationCard","_ref","_editingEntity$metada","_editingEntity$metada2","onSave","onAddTagToEntity","onRemoveTagFromEntity","controlList","ref","DEFAULT_ENTITY","id","numericId","content","metadata","key","value","editingEntity","setEditingEntity","linkedThreatIds","setLinkedThreatIds","showAlert","setShowAlert","selectedControl","setSelectedControl","controlId","setControlId","setTags","metadataComments","setMetadataComments","find","m","statementList","mitigationList","saveMitigation","linkedMitigationIds","setLinkedMitigationIds","handleSave","length","label","description","filteringTags","handleReset","handleControlChange","selectedOption","handleAddMitigationLink","mitigationIdOrNewMitigation","prev","newMitigation","handleOnDismissAlert","_event","children","entityId","_entityId","tag","direction","size","onClick","variant","disabled","dismissible","statusIconAriaLabel","type","visible","onDismiss","columns","onChange","_ref2","detail","options","map","c","_c$metadata","_c$metadata$find","_c$metadata2","_c$metadata2$find","_c$metadata3","_c$metadata3$find","labelTag","join","filteringType","placeholder","threatList","onAddThreatLink","onRemoveThreatLink","filter","p","onAddMitigationLink","onRemoveMitigationLink"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/src/components/controls/ControlCreationCard/index.tsx"],"sourcesContent":["/** *******************************************************************************************************************\n  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\").\n  You may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n ******************************************************************************************************************** */\n/** @jsxImportSource @emotion/react */\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { FC, useState, useCallback, useRef, useMemo } from 'react';\nimport { Control } from '../../../customTypes';\nimport { Button, ColumnLayout, Container, Header, Select, TextContent, Alert } from '@cloudscape-design/components';\nimport { OptionDefinition } from '@cloudscape-design/components/internal/components/option/interfaces';\nimport getMobileMediaQuery from '../../../utils/getMobileMediaQuery';\nimport * as awsui from '@cloudscape-design/design-tokens';\nimport { css } from '@emotion/react';\nimport Tags from '../ControlCard/components/Tags';\nimport { DEFAULT_NEW_ENTITY_ID } from '../../../configs';\nimport ThreatLinkView from '../../threats/ThreatLinkView';\nimport { useMitigationsContext, useThreatsContext } from '../../../contexts';\nimport MitigationLinkView from '../../mitigations/MitigationLinkView';\n\nexport interface ControlCreationCardProps {\n  onSave?: (entity: Control, linkedMitigationIds: string[], linkedThreatIds: string[]) => void;\n  onAddTagToEntity?: (entity: Control, tag: string) => void;\n  onRemoveTagFromEntity?: (entity: Control, tag: string) => void;\n  controlList?: Control[];\n}\n\nconst styles = {\n  header: css({\n    display: 'inline-flex',\n    alignItems: 'center',\n    [getMobileMediaQuery()]: {\n      display: 'block',\n      marginTop: awsui.spaceScaledS,\n    },\n  }),\n  tags: css({\n    marginRight: awsui.spaceScaledS,\n    marginLeft: awsui.spaceScaledS,\n    [getMobileMediaQuery()]: {\n      marginLeft: '0px',\n    },\n  }),\n  info: css({\n    marginLeft: awsui.spaceScaledS,\n    [getMobileMediaQuery()]: {\n      marginLeft: '0px',\n    },\n  }),\n  finalStatementSection: css({\n    '&:hover': {\n      backgroundColor: awsui.colorBackgroundDropdownItemHover,\n    },\n  }),\n  metadataContainer: css({\n    'h3>span>span': {\n      fontSize: '20px',\n    },\n  }),\n};\n\nconst ControlCreationCard: FC<ControlCreationCardProps> = ({\n  onSave,\n  onAddTagToEntity,\n  onRemoveTagFromEntity,\n  controlList,\n}) => {\n  const ref = useRef<any>(null);\n  const DEFAULT_ENTITY = useMemo( () => {\n    return {\n      id: DEFAULT_NEW_ENTITY_ID,\n      numericId: -1,\n      content: '',\n      metadata: [\n        {\n          key: 'Comments',\n          value: '',\n        },\n        {\n          key: 'STRIDE',\n          value: '',\n        },\n      ],\n    };\n  }, []);\n  const [editingEntity, setEditingEntity] = useState<Control>(DEFAULT_ENTITY);\n  const [linkedThreatIds, setLinkedThreatIds] = useState<string[]>([]);\n  const [showAlert, setShowAlert] = useState(false);\n\n  const [selectedControl, setSelectedControl] = useState<OptionDefinition | null>(null);\n  const [controlId, setControlId] = useState(editingEntity.id);\n  const [tags, setTags] = useState(editingEntity.tags);\n  const [metadataComments, setMetadataComments] = useState(editingEntity.metadata?.find(m => m.key === 'Comments')?.value);\n  const { statementList } = useThreatsContext();\n  const { mitigationList, saveMitigation } = useMitigationsContext();\n  const [linkedMitigationIds, setLinkedMitigationIds] = useState<string[]>([]);\n\n  const handleSave = useCallback(() => {\n    if (linkedThreatIds.length === 0) {\n      setShowAlert(true);\n      return;\n    }\n\n    editingEntity.id = controlId || 'new';\n    editingEntity.content = selectedControl?.label as string || '';\n    editingEntity.tags = tags || [];\n    if ( editingEntity.metadata && editingEntity.metadata.find(m => m.key === 'Comments') ) {\n      editingEntity.metadata!.find(m => m.key === 'Comments')!.value = selectedControl?.description || '';\n    }\n    if ( editingEntity.metadata && editingEntity.metadata.find(m => m.key === 'STRIDE') ) {\n      editingEntity.metadata!.find(m => m.key === 'STRIDE')!.value = selectedControl?.filteringTags as string[] || [];\n    }\n    onSave?.(editingEntity, linkedMitigationIds, linkedThreatIds);\n    setEditingEntity(DEFAULT_ENTITY);\n    setControlId('new');\n    setSelectedControl(null);\n    setTags([]);\n    setMetadataComments('');\n    setLinkedMitigationIds([]);\n    setLinkedThreatIds([]);\n  }, [controlId, editingEntity, linkedMitigationIds, linkedThreatIds,\n    onSave, selectedControl?.label, selectedControl?.description, tags, DEFAULT_ENTITY, selectedControl?.filteringTags]);\n\n  const handleReset = useCallback(() => {\n    setEditingEntity(DEFAULT_ENTITY);\n    setControlId('new');\n    setSelectedControl(null);\n    setTags([]);\n    setMetadataComments('');\n    setLinkedMitigationIds([]);\n    setLinkedThreatIds([]);\n  }, [DEFAULT_ENTITY]);\n\n  const handleControlChange = (selectedOption) => {\n    setSelectedControl(selectedOption);\n    setControlId(selectedOption.value);\n    setTags(selectedOption.tags);\n    setMetadataComments(selectedOption.description);\n  };\n\n  const handleAddMitigationLink = useCallback((mitigationIdOrNewMitigation: string) => {\n    if (mitigationList.find(m => m.id === mitigationIdOrNewMitigation)) {\n      setLinkedMitigationIds(prev => [...prev, mitigationIdOrNewMitigation]);\n    } else {\n      const newMitigation = saveMitigation({\n        numericId: -1,\n        content: mitigationIdOrNewMitigation,\n        id: 'new',\n      });\n      setLinkedMitigationIds(prev => [...prev, newMitigation.id]);\n    }\n  }, [mitigationList, saveMitigation]);\n\n  const handleOnDismissAlert = (_event) => {\n    setShowAlert(false);\n  };\n\n  return (\n    <div ref={ref}>\n      <Container\n        header={\n          <Header>\n            <div css={styles.header}>\n              {'Add new control'}\n              <div css={styles.tags}><Tags\n                tags={tags}\n                entityId={controlId}\n                onAddTagToEntity={(_entityId, tag) => onAddTagToEntity?.(editingEntity, tag)}\n                onRemoveTagFromEntity={(_entityId, tag) => onRemoveTagFromEntity?.(editingEntity, tag)}\n              />\n              </div>\n            </div>\n          </Header>\n        }\n      >\n        <SpaceBetween direction='vertical' size='s'>\n          <SpaceBetween direction='horizontal' size='s'>\n            <Button onClick={handleReset}>Reset</Button>\n            <Button variant='primary' disabled={selectedControl===null} onClick={handleSave}>Save</Button>\n            <Alert\n              dismissible\n              statusIconAriaLabel=\"Error\"\n              type=\"error\"\n              visible={showAlert}\n              onDismiss={handleOnDismissAlert}\n              header=\"Validation error\" >\n              Select at least one threat from the list.\n            </Alert>\n          </SpaceBetween>\n          <ColumnLayout columns={2}>\n            <Select\n              selectedOption={selectedControl}\n              onChange={({ detail }) => {\n                handleControlChange(detail.selectedOption);\n                setShowAlert(false);\n              }}\n              options={controlList?.map(c => ({\n                label: c.content,\n                labelTag: (c.metadata?.find(m => m.key === 'STRIDE')?.value as string[]).join(','),\n                value: c.id,\n                description: c.metadata?.find(m => m.key === 'Comments')?.value as string,\n                tags: c.tags,\n                filteringTags: c.metadata?.find(m => m.key === 'STRIDE')?.value as string[],\n              }))}\n              filteringType=\"auto\"\n              placeholder=\"Choose a security control\"\n            />\n            <SpaceBetween direction='vertical' size='s'>\n              <ThreatLinkView\n                linkedThreatIds={linkedThreatIds}\n                threatList={statementList}\n                onAddThreatLink={(id) => setLinkedThreatIds(prev => [...prev, id])}\n                onRemoveThreatLink={(id) => setLinkedThreatIds(prev => prev.filter(p => p !== id))}\n              />\n              <MitigationLinkView\n                linkedMitigationIds={linkedMitigationIds}\n                mitigationList={mitigationList}\n                onAddMitigationLink={handleAddMitigationLink}\n                onRemoveMitigationLink={(id) => setLinkedMitigationIds(prev => prev.filter(p => p !== id))}\n              />\n            </SpaceBetween>\n          </ColumnLayout>\n          <TextContent>\n            {metadataComments || ''}\n          </TextContent>\n        </SpaceBetween>\n      </Container>\n    </div>\n  );\n};\n\nexport default ControlCreationCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}