{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback } from 'react';\nimport clsx from 'clsx';\nimport InternalBox from '../box/internal';\nimport { InternalButton } from '../button/internal';\nimport InternalColumnLayout from '../column-layout/internal';\nimport InternalFormField from '../form-field/internal';\nimport InternalGrid from '../grid/internal';\nimport { useInternalI18n } from '../i18n/context';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport styles from './styles.css.js';\nconst Divider = () => React.createElement(InternalBox, {\n  className: styles.divider,\n  padding: {\n    top: 'l'\n  }\n});\nfunction render(item, itemIndex, slot) {\n  if (isSlotFunction(slot)) {\n    return slot(item, itemIndex);\n  }\n  return slot;\n  function isSlotFunction(slot) {\n    return typeof slot === 'function';\n  }\n}\nconst GRID_DEFINITION = [{\n  colspan: {\n    default: 12,\n    xs: 9\n  }\n}];\nconst REMOVABLE_GRID_DEFINITION = [{\n  colspan: {\n    default: 12,\n    xs: 9\n  }\n}, {\n  colspan: {\n    default: 12,\n    xs: 3\n  }\n}];\nexport const Row = React.memo(_ref => {\n  let {\n    breakpoint,\n    item,\n    definition,\n    i18nStrings = {},\n    index,\n    removable,\n    removeButtonText,\n    removeButtonRefs,\n    onRemoveButtonClick,\n    removeButtonAriaLabel\n  } = _ref;\n  var _a;\n  const i18n = useInternalI18n('attribute-editor');\n  const isNarrowViewport = breakpoint === 'default' || breakpoint === 'xxs';\n  const isWideViewport = !isNarrowViewport;\n  const handleRemoveClick = useCallback(() => {\n    fireNonCancelableEvent(onRemoveButtonClick, {\n      itemIndex: index\n    });\n  }, [onRemoveButtonClick, index]);\n  const firstControlId = useUniqueId('first-control-id-');\n  return React.createElement(InternalBox, {\n    className: styles.row,\n    margin: {\n      bottom: 's'\n    }\n  }, React.createElement(\"div\", {\n    role: \"group\",\n    \"aria-labelledby\": `${firstControlId}-label ${firstControlId}`\n  }, React.createElement(InternalGrid, {\n    __breakpoint: breakpoint,\n    gridDefinition: removable ? REMOVABLE_GRID_DEFINITION : GRID_DEFINITION\n  }, React.createElement(InternalColumnLayout, {\n    className: styles['row-control'],\n    columns: definition.length,\n    __breakpoint: breakpoint\n  }, definition.map((_ref2, defIndex) => {\n    let {\n      info,\n      label,\n      constraintText,\n      errorText,\n      warningText,\n      control\n    } = _ref2;\n    return React.createElement(InternalFormField, {\n      key: defIndex,\n      className: styles.field,\n      label: label,\n      info: info,\n      constraintText: render(item, index, constraintText),\n      errorText: render(item, index, errorText),\n      warningText: render(item, index, warningText),\n      stretch: true,\n      i18nStrings: {\n        errorIconAriaLabel: i18nStrings.errorIconAriaLabel,\n        warningIconAriaLabel: i18nStrings.warningIconAriaLabel\n      },\n      __hideLabel: isWideViewport && index > 0,\n      controlId: defIndex === 0 ? firstControlId : undefined\n    }, render(item, index, control));\n  })), removable && React.createElement(ButtonContainer, {\n    index: index,\n    isNarrowViewport: isNarrowViewport,\n    hasLabel: definition.some(row => row.label)\n  }, React.createElement(InternalButton, {\n    className: styles['remove-button'],\n    formAction: \"none\",\n    ref: ref => {\n      removeButtonRefs[index] = ref !== null && ref !== void 0 ? ref : undefined;\n    },\n    ariaLabel: (_a = removeButtonAriaLabel !== null && removeButtonAriaLabel !== void 0 ? removeButtonAriaLabel : i18nStrings.removeButtonAriaLabel) === null || _a === void 0 ? void 0 : _a(item),\n    onClick: handleRemoveClick\n  }, i18n('removeButtonText', removeButtonText))))), isNarrowViewport && React.createElement(Divider, null));\n});\nconst ButtonContainer = _ref3 => {\n  let {\n    index,\n    children,\n    isNarrowViewport,\n    hasLabel\n  } = _ref3;\n  return React.createElement(\"div\", {\n    className: clsx({\n      [styles['button-container-haslabel']]: !isNarrowViewport && index === 0 && hasLabel,\n      [styles['button-container-nolabel']]: !isNarrowViewport && index === 0 && !hasLabel,\n      [styles['right-align']]: isNarrowViewport\n    })\n  }, children);\n};","map":{"version":3,"names":["React","useCallback","clsx","InternalBox","InternalButton","InternalColumnLayout","InternalFormField","InternalGrid","useInternalI18n","fireNonCancelableEvent","useUniqueId","styles","Divider","createElement","className","divider","padding","top","render","item","itemIndex","slot","isSlotFunction","GRID_DEFINITION","colspan","default","xs","REMOVABLE_GRID_DEFINITION","Row","memo","_ref","breakpoint","definition","i18nStrings","index","removable","removeButtonText","removeButtonRefs","onRemoveButtonClick","removeButtonAriaLabel","i18n","isNarrowViewport","isWideViewport","handleRemoveClick","firstControlId","row","margin","bottom","role","__breakpoint","gridDefinition","columns","length","map","_ref2","defIndex","info","label","constraintText","errorText","warningText","control","key","field","stretch","errorIconAriaLabel","warningIconAriaLabel","__hideLabel","controlId","undefined","ButtonContainer","hasLabel","some","formAction","ref","ariaLabel","_a","onClick","_ref3","children"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/attribute-editor/row.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback } from 'react';\nimport clsx from 'clsx';\n\nimport InternalBox from '../box/internal';\nimport { ButtonProps } from '../button/interfaces';\nimport { InternalButton } from '../button/internal';\nimport InternalColumnLayout, { ColumnLayoutBreakpoint } from '../column-layout/internal';\nimport InternalFormField from '../form-field/internal';\nimport InternalGrid from '../grid/internal';\nimport { useInternalI18n } from '../i18n/context';\nimport { fireNonCancelableEvent, NonCancelableEventHandler } from '../internal/events';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { AttributeEditorProps } from './interfaces';\n\nimport styles from './styles.css.js';\n\nconst Divider = () => <InternalBox className={styles.divider} padding={{ top: 'l' }} />;\n\nexport interface RowProps<T> {\n  breakpoint: ColumnLayoutBreakpoint | null;\n  item: T;\n  definition: ReadonlyArray<AttributeEditorProps.FieldDefinition<T>>;\n  i18nStrings: AttributeEditorProps.I18nStrings | undefined;\n  index: number;\n  removable: boolean;\n  removeButtonText?: string;\n  removeButtonRefs: Array<ButtonProps.Ref | undefined>;\n  onRemoveButtonClick?: NonCancelableEventHandler<AttributeEditorProps.RemoveButtonClickDetail>;\n  removeButtonAriaLabel?: (item: T) => string;\n}\n\nfunction render<T>(\n  item: T,\n  itemIndex: number,\n  slot: AttributeEditorProps.FieldRenderable<T> | React.ReactNode | undefined\n) {\n  if (isSlotFunction(slot)) {\n    return slot(item, itemIndex);\n  }\n  return slot;\n\n  function isSlotFunction(slot: unknown): slot is AttributeEditorProps.FieldRenderable<T> {\n    return typeof slot === 'function';\n  }\n}\n\nconst GRID_DEFINITION = [{ colspan: { default: 12, xs: 9 } }];\nconst REMOVABLE_GRID_DEFINITION = [{ colspan: { default: 12, xs: 9 } }, { colspan: { default: 12, xs: 3 } }];\nexport const Row = React.memo(\n  <T,>({\n    breakpoint,\n    item,\n    definition,\n    i18nStrings = {},\n    index,\n    removable,\n    removeButtonText,\n    removeButtonRefs,\n    onRemoveButtonClick,\n    removeButtonAriaLabel,\n  }: RowProps<T>) => {\n    const i18n = useInternalI18n('attribute-editor');\n    const isNarrowViewport = breakpoint === 'default' || breakpoint === 'xxs';\n    const isWideViewport = !isNarrowViewport;\n\n    const handleRemoveClick = useCallback(() => {\n      fireNonCancelableEvent(onRemoveButtonClick, { itemIndex: index });\n    }, [onRemoveButtonClick, index]);\n\n    const firstControlId = useUniqueId('first-control-id-');\n\n    return (\n      <InternalBox className={styles.row} margin={{ bottom: 's' }}>\n        <div role=\"group\" aria-labelledby={`${firstControlId}-label ${firstControlId}`}>\n          <InternalGrid\n            __breakpoint={breakpoint}\n            gridDefinition={removable ? REMOVABLE_GRID_DEFINITION : GRID_DEFINITION}\n          >\n            <InternalColumnLayout\n              className={styles['row-control']}\n              columns={definition.length}\n              __breakpoint={breakpoint}\n            >\n              {definition.map(({ info, label, constraintText, errorText, warningText, control }, defIndex) => (\n                <InternalFormField\n                  key={defIndex}\n                  className={styles.field}\n                  label={label}\n                  info={info}\n                  constraintText={render(item, index, constraintText)}\n                  errorText={render(item, index, errorText)}\n                  warningText={render(item, index, warningText)}\n                  stretch={true}\n                  i18nStrings={{\n                    errorIconAriaLabel: i18nStrings.errorIconAriaLabel,\n                    warningIconAriaLabel: i18nStrings.warningIconAriaLabel,\n                  }}\n                  __hideLabel={isWideViewport && index > 0}\n                  controlId={defIndex === 0 ? firstControlId : undefined}\n                >\n                  {render(item, index, control)}\n                </InternalFormField>\n              ))}\n            </InternalColumnLayout>\n            {removable && (\n              <ButtonContainer\n                index={index}\n                isNarrowViewport={isNarrowViewport}\n                hasLabel={definition.some(row => row.label)}\n              >\n                <InternalButton\n                  className={styles['remove-button']}\n                  formAction=\"none\"\n                  ref={ref => {\n                    removeButtonRefs[index] = ref ?? undefined;\n                  }}\n                  ariaLabel={(removeButtonAriaLabel ?? i18nStrings.removeButtonAriaLabel)?.(item)}\n                  onClick={handleRemoveClick}\n                >\n                  {i18n('removeButtonText', removeButtonText)}\n                </InternalButton>\n              </ButtonContainer>\n            )}\n          </InternalGrid>\n        </div>\n        {isNarrowViewport && <Divider />}\n      </InternalBox>\n    );\n  }\n) as <T>(props: RowProps<T>) => JSX.Element;\n\ninterface ButtonContainer {\n  index: number;\n  children: React.ReactNode;\n  isNarrowViewport: boolean;\n  hasLabel: boolean;\n}\n\nconst ButtonContainer = ({ index, children, isNarrowViewport, hasLabel }: ButtonContainer) => (\n  <div\n    className={clsx({\n      [styles['button-container-haslabel']]: !isNarrowViewport && index === 0 && hasLabel,\n      [styles['button-container-nolabel']]: !isNarrowViewport && index === 0 && !hasLabel,\n      [styles['right-align']]: isNarrowViewport,\n    })}\n  >\n    {children}\n  </div>\n);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}