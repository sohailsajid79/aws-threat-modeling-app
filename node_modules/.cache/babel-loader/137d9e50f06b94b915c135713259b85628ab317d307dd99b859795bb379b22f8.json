{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nlet callbacks = [];\nlet listenerRegistered = false;\nconst onKeyDown = event => {\n  if (event.key === 'Escape') {\n    callbacks.forEach(callback => callback());\n  }\n};\nexport const registerTooltip = onClose => {\n  callbacks.forEach(callback => callback());\n  callbacks.push(onClose);\n  if (!listenerRegistered) {\n    listenerRegistered = true;\n    document.addEventListener('keydown', onKeyDown);\n  }\n  return () => {\n    deregisterTooltip(onClose);\n  };\n};\nconst deregisterTooltip = onClose => {\n  callbacks = callbacks.filter(callback => callback !== onClose);\n  if (listenerRegistered && callbacks.length === 0) {\n    listenerRegistered = false;\n    document.removeEventListener('keydown', onKeyDown);\n  }\n};","map":{"version":3,"names":["callbacks","listenerRegistered","onKeyDown","event","key","forEach","callback","registerTooltip","onClose","push","document","addEventListener","deregisterTooltip","filter","length","removeEventListener"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/components/tooltip/registry.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\ntype OnClose = () => void;\n\nlet callbacks: Array<OnClose> = [];\nlet listenerRegistered = false;\n\nconst onKeyDown = (event: KeyboardEvent) => {\n  if (event.key === 'Escape') {\n    callbacks.forEach(callback => callback());\n  }\n};\n\nexport const registerTooltip = (onClose: OnClose) => {\n  callbacks.forEach(callback => callback());\n  callbacks.push(onClose);\n  if (!listenerRegistered) {\n    listenerRegistered = true;\n    document.addEventListener('keydown', onKeyDown);\n  }\n  return () => {\n    deregisterTooltip(onClose);\n  };\n};\n\nconst deregisterTooltip = (onClose: OnClose) => {\n  callbacks = callbacks.filter(callback => callback !== onClose);\n  if (listenerRegistered && callbacks.length === 0) {\n    listenerRegistered = false;\n    document.removeEventListener('keydown', onKeyDown);\n  }\n};\n"],"mappings":"AAAA;AACA;AAIA,IAAIA,SAAS,GAAmB,EAAE;AAClC,IAAIC,kBAAkB,GAAG,KAAK;AAE9B,MAAMC,SAAS,GAAIC,KAAoB,IAAI;EACzC,IAAIA,KAAK,CAACC,GAAG,KAAK,QAAQ,EAAE;IAC1BJ,SAAS,CAACK,OAAO,CAACC,QAAQ,IAAIA,QAAQ,EAAE,CAAC;;AAE7C,CAAC;AAED,OAAO,MAAMC,eAAe,GAAIC,OAAgB,IAAI;EAClDR,SAAS,CAACK,OAAO,CAACC,QAAQ,IAAIA,QAAQ,EAAE,CAAC;EACzCN,SAAS,CAACS,IAAI,CAACD,OAAO,CAAC;EACvB,IAAI,CAACP,kBAAkB,EAAE;IACvBA,kBAAkB,GAAG,IAAI;IACzBS,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAET,SAAS,CAAC;;EAEjD,OAAO,MAAK;IACVU,iBAAiB,CAACJ,OAAO,CAAC;EAC5B,CAAC;AACH,CAAC;AAED,MAAMI,iBAAiB,GAAIJ,OAAgB,IAAI;EAC7CR,SAAS,GAAGA,SAAS,CAACa,MAAM,CAACP,QAAQ,IAAIA,QAAQ,KAAKE,OAAO,CAAC;EAC9D,IAAIP,kBAAkB,IAAID,SAAS,CAACc,MAAM,KAAK,CAAC,EAAE;IAChDb,kBAAkB,GAAG,KAAK;IAC1BS,QAAQ,CAACK,mBAAmB,CAAC,SAAS,EAAEb,SAAS,CAAC;;AAEtD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}