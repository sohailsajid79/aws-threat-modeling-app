{"ast":null,"code":"import { indexEquals, isItemGroup } from './utils';\nexport default function moveHighlight(_ref) {\n  let {\n    startIndex,\n    expandedIndex,\n    getNext,\n    hasExpandableGroups,\n    isInRestrictedView\n  } = _ref;\n  const tryMove = currentIndex => {\n    var _a;\n    const next = getNext(currentIndex);\n    if (!next) {\n      return null;\n    }\n    // Prevents stepping into disabled expandable groups. However,\n    // it's possible to navigate nested groups.\n    if (((_a = next.parent) === null || _a === void 0 ? void 0 : _a.disabled) && hasExpandableGroups) {\n      return tryMove(next.index);\n    }\n    // it is not allowed to highlight groups when non-expandable\n    if (isItemGroup(next.item) && !hasExpandableGroups) {\n      return tryMove(next.index);\n    }\n    // can only move within same parent unless is in restricted view\n    if (hasExpandableGroups && !isInRestrictedView && !isSameParent(startIndex, next.index)) {\n      return tryMove(next.index);\n    }\n    // in restricted view can only navigate to children if group is expanded\n    if (hasExpandableGroups && isInRestrictedView && !isSameLevel(next.index, expandedIndex) && !isIncluded(expandedIndex, next.index)) {\n      return tryMove(next.index);\n    }\n    return next.index;\n  };\n  return tryMove(startIndex);\n}\nfunction isSameParent(left, right) {\n  return indexEquals(left.slice(0, -1), right.slice(0, -1));\n}\nfunction isSameLevel(left, right) {\n  return left.length === right.length;\n}\nfunction isIncluded(parent, child) {\n  return indexEquals(parent, child.slice(0, -1));\n}","map":{"version":3,"names":["indexEquals","isItemGroup","moveHighlight","_ref","startIndex","expandedIndex","getNext","hasExpandableGroups","isInRestrictedView","tryMove","currentIndex","next","_a","parent","disabled","index","item","isSameParent","isSameLevel","isIncluded","left","right","slice","length","child"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/button-dropdown/utils/move-highlight.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ButtonDropdownProps } from '../interfaces';\nimport { TreeIndex } from './create-items-tree';\nimport { indexEquals, isItemGroup } from './utils';\n\n// While every menu item except the edge ones have successors and predecessors,\n// there are rules determining what items are eligible for highlighting for the\n// given set of conditions. The function implements all these rules.\n\ninterface MoveHighlightProps {\n  startIndex: TreeIndex;\n  expandedIndex: TreeIndex;\n  getNext: (index: TreeIndex) => {\n    index: TreeIndex;\n    item: ButtonDropdownProps.ItemOrGroup;\n    parent?: ButtonDropdownProps.ItemOrGroup;\n  } | null;\n  hasExpandableGroups: boolean;\n  isInRestrictedView: boolean;\n}\n\nexport default function moveHighlight({\n  startIndex,\n  expandedIndex,\n  getNext,\n  hasExpandableGroups,\n  isInRestrictedView,\n}: MoveHighlightProps): TreeIndex | null {\n  const tryMove = (currentIndex: TreeIndex): TreeIndex | null => {\n    const next = getNext(currentIndex);\n\n    if (!next) {\n      return null;\n    }\n\n    // Prevents stepping into disabled expandable groups. However,\n    // it's possible to navigate nested groups.\n    if (next.parent?.disabled && hasExpandableGroups) {\n      return tryMove(next.index);\n    }\n\n    // it is not allowed to highlight groups when non-expandable\n    if (isItemGroup(next.item) && !hasExpandableGroups) {\n      return tryMove(next.index);\n    }\n\n    // can only move within same parent unless is in restricted view\n    if (hasExpandableGroups && !isInRestrictedView && !isSameParent(startIndex, next.index)) {\n      return tryMove(next.index);\n    }\n\n    // in restricted view can only navigate to children if group is expanded\n    if (\n      hasExpandableGroups &&\n      isInRestrictedView &&\n      !isSameLevel(next.index, expandedIndex) &&\n      !isIncluded(expandedIndex, next.index)\n    ) {\n      return tryMove(next.index);\n    }\n\n    return next.index;\n  };\n\n  return tryMove(startIndex);\n}\n\nfunction isSameParent(left: TreeIndex, right: TreeIndex) {\n  return indexEquals(left.slice(0, -1), right.slice(0, -1));\n}\n\nfunction isSameLevel(left: TreeIndex, right: TreeIndex) {\n  return left.length === right.length;\n}\n\nfunction isIncluded(parent: TreeIndex, child: TreeIndex) {\n  return indexEquals(parent, child.slice(0, -1));\n}\n"],"mappings":"AAIA,SAASA,WAAW,EAAEC,WAAW,QAAQ,SAAS;AAkBlD,eAAc,SAAUC,aAAaA,CAAAC,IAAA,EAMhB;EAAA,IANiB;IACpCC,UAAU;IACVC,aAAa;IACbC,OAAO;IACPC,mBAAmB;IACnBC;EAAkB,CACC,GAAAL,IAAA;EACnB,MAAMM,OAAO,GAAIC,YAAuB,IAAsB;;IAC5D,MAAMC,IAAI,GAAGL,OAAO,CAACI,YAAY,CAAC;IAElC,IAAI,CAACC,IAAI,EAAE;MACT,OAAO,IAAI;;IAGb;IACA;IACA,IAAI,EAAAC,EAAA,GAAAD,IAAI,CAACE,MAAM,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,QAAQ,KAAIP,mBAAmB,EAAE;MAChD,OAAOE,OAAO,CAACE,IAAI,CAACI,KAAK,CAAC;;IAG5B;IACA,IAAId,WAAW,CAACU,IAAI,CAACK,IAAI,CAAC,IAAI,CAACT,mBAAmB,EAAE;MAClD,OAAOE,OAAO,CAACE,IAAI,CAACI,KAAK,CAAC;;IAG5B;IACA,IAAIR,mBAAmB,IAAI,CAACC,kBAAkB,IAAI,CAACS,YAAY,CAACb,UAAU,EAAEO,IAAI,CAACI,KAAK,CAAC,EAAE;MACvF,OAAON,OAAO,CAACE,IAAI,CAACI,KAAK,CAAC;;IAG5B;IACA,IACER,mBAAmB,IACnBC,kBAAkB,IAClB,CAACU,WAAW,CAACP,IAAI,CAACI,KAAK,EAAEV,aAAa,CAAC,IACvC,CAACc,UAAU,CAACd,aAAa,EAAEM,IAAI,CAACI,KAAK,CAAC,EACtC;MACA,OAAON,OAAO,CAACE,IAAI,CAACI,KAAK,CAAC;;IAG5B,OAAOJ,IAAI,CAACI,KAAK;EACnB,CAAC;EAED,OAAON,OAAO,CAACL,UAAU,CAAC;AAC5B;AAEA,SAASa,YAAYA,CAACG,IAAe,EAAEC,KAAgB;EACrD,OAAOrB,WAAW,CAACoB,IAAI,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAED,KAAK,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3D;AAEA,SAASJ,WAAWA,CAACE,IAAe,EAAEC,KAAgB;EACpD,OAAOD,IAAI,CAACG,MAAM,KAAKF,KAAK,CAACE,MAAM;AACrC;AAEA,SAASJ,UAAUA,CAACN,MAAiB,EAAEW,KAAgB;EACrD,OAAOxB,WAAW,CAACa,MAAM,EAAEW,KAAK,CAACF,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAChD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}