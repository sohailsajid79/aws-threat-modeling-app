{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { nodeBelongs } from './utils/node-belongs';\nexport default class FocusTracker {\n  constructor(node, {\n    onFocusEnter,\n    onFocusLeave\n  }) {\n    this.node = node;\n    this.currentlyFocused = false;\n    this.focusInListener = event => {\n      const focusIsInside = nodeBelongs(this.node, event.target);\n      if (!this.currentlyFocused && focusIsInside) {\n        this.triggerFocus();\n      }\n    };\n    this.focusOutListener = event => {\n      const nextFocused = event.relatedTarget;\n      const isNextFocusedInParent = !nodeBelongs(this.node, nextFocused);\n      if (this.currentlyFocused && (nextFocused === null || isNextFocusedInParent)) {\n        this.triggerBlur();\n      }\n    };\n    this.onFocusEnter = onFocusEnter;\n    this.onFocusLeave = onFocusLeave;\n  }\n  initialize() {\n    this.currentlyFocused = nodeBelongs(this.node, document.activeElement);\n    document.addEventListener('focusin', this.focusInListener);\n    document.addEventListener('focusout', this.focusOutListener);\n  }\n  destroy() {\n    document.removeEventListener('focusin', this.focusInListener);\n    document.removeEventListener('focusout', this.focusOutListener);\n  }\n  triggerBlur() {\n    this.currentlyFocused = false;\n    this.onFocusLeave();\n  }\n  triggerFocus() {\n    this.currentlyFocused = true;\n    this.onFocusEnter();\n  }\n}","map":{"version":3,"names":["nodeBelongs","FocusTracker","constructor","node","onFocusEnter","onFocusLeave","currentlyFocused","focusInListener","event","focusIsInside","target","triggerFocus","focusOutListener","nextFocused","relatedTarget","isNextFocusedInParent","triggerBlur","initialize","document","activeElement","addEventListener","destroy","removeEventListener"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/focus-tracker.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { nodeBelongs } from './utils/node-belongs';\n\ninterface FocusTrackerOptions {\n  onFocusEnter: () => void;\n  onFocusLeave: () => void;\n}\n\nexport default class FocusTracker {\n  private readonly onFocusLeave: () => void;\n  private readonly onFocusEnter: () => void;\n\n  private currentlyFocused = false;\n\n  constructor(\n    private node: HTMLElement,\n    { onFocusEnter, onFocusLeave }: FocusTrackerOptions\n  ) {\n    this.onFocusEnter = onFocusEnter;\n    this.onFocusLeave = onFocusLeave;\n  }\n\n  initialize() {\n    this.currentlyFocused = nodeBelongs(this.node, document.activeElement);\n    document.addEventListener('focusin', this.focusInListener);\n    document.addEventListener('focusout', this.focusOutListener);\n  }\n\n  destroy() {\n    document.removeEventListener('focusin', this.focusInListener);\n    document.removeEventListener('focusout', this.focusOutListener);\n  }\n\n  private focusInListener = (event: FocusEvent) => {\n    const focusIsInside = nodeBelongs(this.node, event.target);\n    if (!this.currentlyFocused && focusIsInside) {\n      this.triggerFocus();\n    }\n  };\n\n  private focusOutListener = (event: FocusEvent) => {\n    const nextFocused = event.relatedTarget;\n    const isNextFocusedInParent = !nodeBelongs(this.node, nextFocused);\n    if (this.currentlyFocused && (nextFocused === null || isNextFocusedInParent)) {\n      this.triggerBlur();\n    }\n  };\n\n  private triggerBlur() {\n    this.currentlyFocused = false;\n    this.onFocusLeave();\n  }\n\n  private triggerFocus() {\n    this.currentlyFocused = true;\n    this.onFocusEnter();\n  }\n}\n"],"mappings":"AAAA;AACA;AACA,SAASA,WAAW,QAAQ,sBAAsB;AAOlD,eAAc,MAAOC,YAAY;EAM/BC,YACUC,IAAiB,EACzB;IAAEC,YAAY;IAAEC;EAAY,CAAuB;IAD3C,KAAAF,IAAI,GAAJA,IAAI;IAHN,KAAAG,gBAAgB,GAAG,KAAK;IAqBxB,KAAAC,eAAe,GAAIC,KAAiB,IAAI;MAC9C,MAAMC,aAAa,GAAGT,WAAW,CAAC,IAAI,CAACG,IAAI,EAAEK,KAAK,CAACE,MAAM,CAAC;MAC1D,IAAI,CAAC,IAAI,CAACJ,gBAAgB,IAAIG,aAAa,EAAE;QAC3C,IAAI,CAACE,YAAY,EAAE;;IAEvB,CAAC;IAEO,KAAAC,gBAAgB,GAAIJ,KAAiB,IAAI;MAC/C,MAAMK,WAAW,GAAGL,KAAK,CAACM,aAAa;MACvC,MAAMC,qBAAqB,GAAG,CAACf,WAAW,CAAC,IAAI,CAACG,IAAI,EAAEU,WAAW,CAAC;MAClE,IAAI,IAAI,CAACP,gBAAgB,KAAKO,WAAW,KAAK,IAAI,IAAIE,qBAAqB,CAAC,EAAE;QAC5E,IAAI,CAACC,WAAW,EAAE;;IAEtB,CAAC;IA5BC,IAAI,CAACZ,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACC,YAAY,GAAGA,YAAY;EAClC;EAEAY,UAAUA,CAAA;IACR,IAAI,CAACX,gBAAgB,GAAGN,WAAW,CAAC,IAAI,CAACG,IAAI,EAAEe,QAAQ,CAACC,aAAa,CAAC;IACtED,QAAQ,CAACE,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACb,eAAe,CAAC;IAC1DW,QAAQ,CAACE,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAACR,gBAAgB,CAAC;EAC9D;EAEAS,OAAOA,CAAA;IACLH,QAAQ,CAACI,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACf,eAAe,CAAC;IAC7DW,QAAQ,CAACI,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAACV,gBAAgB,CAAC;EACjE;EAiBQI,WAAWA,CAAA;IACjB,IAAI,CAACV,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACD,YAAY,EAAE;EACrB;EAEQM,YAAYA,CAAA;IAClB,IAAI,CAACL,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACF,YAAY,EAAE;EACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}