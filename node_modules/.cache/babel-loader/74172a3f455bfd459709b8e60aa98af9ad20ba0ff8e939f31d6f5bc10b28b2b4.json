{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { browserScrollbarSize } from '../internal/utils/browser-scrollbar-size';\nimport styles from './styles.css.js';\n// Read this before making changes to the code below.\n//\n// When a modal is used from an iframe the body scrolling utils take no effect because they need to be applied to another document.\n// The customers replicate this behavior by running the same code on the correct document instance, see AWSUI-41915.\n// Hence, we should avoid making changes to the component that break the body scrolling logic in its current form.\nlet initialBodyPaddingRightStyle = undefined;\nexport function disableBodyScrolling() {\n  setBodyScrollbarPadding();\n  document.body.classList.add(styles['modal-open']);\n}\nexport function enableBodyScrolling() {\n  document.body.classList.remove(styles['modal-open']);\n  restoreBodyScrollbarPadding();\n}\nfunction setBodyScrollbarPadding() {\n  if (bodyHasScrollbar()) {\n    initialBodyPaddingRightStyle = document.body.style.paddingRight;\n    const initialBodyPaddingRight = computedBodyPaddingRightPixels();\n    const scrollbarWidth = browserScrollbarSize().width;\n    const newBodyPaddingRight = initialBodyPaddingRight + scrollbarWidth;\n    document.body.style.paddingRight = newBodyPaddingRight + 'px';\n  }\n}\nfunction computedBodyPaddingRightPixels() {\n  return parseInt(window.getComputedStyle(document.body).paddingRight, 10);\n}\nfunction restoreBodyScrollbarPadding() {\n  if (initialBodyPaddingRightStyle) {\n    document.body.style.setProperty('padding-right', initialBodyPaddingRightStyle);\n  } else {\n    document.body.style.removeProperty('padding-right');\n  }\n  initialBodyPaddingRightStyle = undefined;\n}\nfunction bodyHasScrollbar() {\n  // Unfortunately this difference doesn't appear to match the scrollbar width during testing,\n  // otherwise we could remove browserScrollbarSize().  Bootstrap also doesn't use this difference\n  // directly.\n  return document.body.clientWidth < window.innerWidth;\n}","map":{"version":3,"names":["browserScrollbarSize","styles","initialBodyPaddingRightStyle","undefined","disableBodyScrolling","setBodyScrollbarPadding","document","body","classList","add","enableBodyScrolling","remove","restoreBodyScrollbarPadding","bodyHasScrollbar","style","paddingRight","initialBodyPaddingRight","computedBodyPaddingRightPixels","scrollbarWidth","width","newBodyPaddingRight","parseInt","window","getComputedStyle","setProperty","removeProperty","clientWidth","innerWidth"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/modal/body-scroll.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { browserScrollbarSize } from '../internal/utils/browser-scrollbar-size';\n\nimport styles from './styles.css.js';\n\n// Read this before making changes to the code below.\n//\n// When a modal is used from an iframe the body scrolling utils take no effect because they need to be applied to another document.\n// The customers replicate this behavior by running the same code on the correct document instance, see AWSUI-41915.\n// Hence, we should avoid making changes to the component that break the body scrolling logic in its current form.\n\nlet initialBodyPaddingRightStyle: string | undefined = undefined;\n\nexport function disableBodyScrolling() {\n  setBodyScrollbarPadding();\n  document.body.classList.add(styles['modal-open']);\n}\n\nexport function enableBodyScrolling() {\n  document.body.classList.remove(styles['modal-open']);\n  restoreBodyScrollbarPadding();\n}\n\nfunction setBodyScrollbarPadding() {\n  if (bodyHasScrollbar()) {\n    initialBodyPaddingRightStyle = document.body.style.paddingRight;\n    const initialBodyPaddingRight = computedBodyPaddingRightPixels();\n    const scrollbarWidth = browserScrollbarSize().width;\n    const newBodyPaddingRight = initialBodyPaddingRight + scrollbarWidth;\n    document.body.style.paddingRight = newBodyPaddingRight + 'px';\n  }\n}\n\nfunction computedBodyPaddingRightPixels() {\n  return parseInt(window.getComputedStyle(document.body).paddingRight, 10);\n}\n\nfunction restoreBodyScrollbarPadding() {\n  if (initialBodyPaddingRightStyle) {\n    document.body.style.setProperty('padding-right', initialBodyPaddingRightStyle);\n  } else {\n    document.body.style.removeProperty('padding-right');\n  }\n  initialBodyPaddingRightStyle = undefined;\n}\n\nfunction bodyHasScrollbar() {\n  // Unfortunately this difference doesn't appear to match the scrollbar width during testing,\n  // otherwise we could remove browserScrollbarSize().  Bootstrap also doesn't use this difference\n  // directly.\n  return document.body.clientWidth < window.innerWidth;\n}\n"],"mappings":"AAAA;AACA;AACA,SAASA,oBAAoB,QAAQ,0CAA0C;AAE/E,OAAOC,MAAM,MAAM,iBAAiB;AAEpC;AACA;AACA;AACA;AACA;AAEA,IAAIC,4BAA4B,GAAuBC,SAAS;AAEhE,OAAM,SAAUC,oBAAoBA,CAAA;EAClCC,uBAAuB,EAAE;EACzBC,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACC,GAAG,CAACR,MAAM,CAAC,YAAY,CAAC,CAAC;AACnD;AAEA,OAAM,SAAUS,mBAAmBA,CAAA;EACjCJ,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACG,MAAM,CAACV,MAAM,CAAC,YAAY,CAAC,CAAC;EACpDW,2BAA2B,EAAE;AAC/B;AAEA,SAASP,uBAAuBA,CAAA;EAC9B,IAAIQ,gBAAgB,EAAE,EAAE;IACtBX,4BAA4B,GAAGI,QAAQ,CAACC,IAAI,CAACO,KAAK,CAACC,YAAY;IAC/D,MAAMC,uBAAuB,GAAGC,8BAA8B,EAAE;IAChE,MAAMC,cAAc,GAAGlB,oBAAoB,EAAE,CAACmB,KAAK;IACnD,MAAMC,mBAAmB,GAAGJ,uBAAuB,GAAGE,cAAc;IACpEZ,QAAQ,CAACC,IAAI,CAACO,KAAK,CAACC,YAAY,GAAGK,mBAAmB,GAAG,IAAI;;AAEjE;AAEA,SAASH,8BAA8BA,CAAA;EACrC,OAAOI,QAAQ,CAACC,MAAM,CAACC,gBAAgB,CAACjB,QAAQ,CAACC,IAAI,CAAC,CAACQ,YAAY,EAAE,EAAE,CAAC;AAC1E;AAEA,SAASH,2BAA2BA,CAAA;EAClC,IAAIV,4BAA4B,EAAE;IAChCI,QAAQ,CAACC,IAAI,CAACO,KAAK,CAACU,WAAW,CAAC,eAAe,EAAEtB,4BAA4B,CAAC;GAC/E,MAAM;IACLI,QAAQ,CAACC,IAAI,CAACO,KAAK,CAACW,cAAc,CAAC,eAAe,CAAC;;EAErDvB,4BAA4B,GAAGC,SAAS;AAC1C;AAEA,SAASU,gBAAgBA,CAAA;EACvB;EACA;EACA;EACA,OAAOP,QAAQ,CAACC,IAAI,CAACmB,WAAW,GAAGJ,MAAM,CAACK,UAAU;AACtD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}