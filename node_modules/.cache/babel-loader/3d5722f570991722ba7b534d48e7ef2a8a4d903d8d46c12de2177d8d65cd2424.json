{"ast":null,"code":"import { useCallback, useEffect, useMemo, useRef, useState, useSyncExternalStore } from 'react';\n// in memory fallback used when `localStorage` throws an error\nexport const inMemoryData = new Map();\nexport default function useLocalStorageState(key, options) {\n  const serializer = options?.serializer;\n  const [defaultValue] = useState(options?.defaultValue);\n  return useLocalStorage(key, defaultValue, options?.storageSync, serializer?.parse, serializer?.stringify);\n}\nfunction useLocalStorage(key, defaultValue) {\n  let storageSync = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  let parse = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : parseJSON;\n  let stringify = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : JSON.stringify;\n  // we keep the `parsed` value in a ref because `useSyncExternalStore` requires a cached version\n  const storageItem = useRef({\n    string: null,\n    parsed: undefined\n  });\n  const value = useSyncExternalStore(\n  // useSyncExternalStore.subscribe\n  useCallback(onStoreChange => {\n    const onChange = localKey => {\n      if (key === localKey) {\n        onStoreChange();\n      }\n    };\n    callbacks.add(onChange);\n    return () => {\n      callbacks.delete(onChange);\n    };\n  }, [key]),\n  // useSyncExternalStore.getSnapshot\n  () => {\n    const string = goodTry(() => localStorage.getItem(key)) ?? null;\n    if (inMemoryData.has(key)) {\n      storageItem.current.parsed = inMemoryData.get(key);\n    } else if (string !== storageItem.current.string) {\n      let parsed;\n      try {\n        parsed = string === null ? defaultValue : parse(string);\n      } catch {\n        parsed = defaultValue;\n      }\n      storageItem.current.parsed = parsed;\n    }\n    storageItem.current.string = string;\n    // store default value in localStorage:\n    // - initial issue: https://github.com/astoilkov/use-local-storage-state/issues/26\n    //   issues that were caused by incorrect initial and secondary implementations:\n    //   - https://github.com/astoilkov/use-local-storage-state/issues/30\n    //   - https://github.com/astoilkov/use-local-storage-state/issues/33\n    if (defaultValue !== undefined && string === null) {\n      // reasons for `localStorage` to throw an error:\n      // - maximum quota is exceeded\n      // - under Mobile Safari (since iOS 5) when the user enters private mode\n      //   `localStorage.setItem()` will throw\n      // - trying to access localStorage object when cookies are disabled in Safari throws\n      //   \"SecurityError: The operation is insecure.\"\n      // eslint-disable-next-line no-console\n      goodTry(() => {\n        const string = stringify(defaultValue);\n        localStorage.setItem(key, string);\n        storageItem.current = {\n          string,\n          parsed: defaultValue\n        };\n      });\n    }\n    return storageItem.current.parsed;\n  },\n  // useSyncExternalStore.getServerSnapshot\n  () => defaultValue);\n  const setState = useCallback(newValue => {\n    const value = newValue instanceof Function ? newValue(storageItem.current.parsed) : newValue;\n    // reasons for `localStorage` to throw an error:\n    // - maximum quota is exceeded\n    // - under Mobile Safari (since iOS 5) when the user enters private mode\n    //   `localStorage.setItem()` will throw\n    // - trying to access `localStorage` object when cookies are disabled in Safari throws\n    //   \"SecurityError: The operation is insecure.\"\n    try {\n      localStorage.setItem(key, stringify(value));\n      inMemoryData.delete(key);\n    } catch {\n      inMemoryData.set(key, value);\n    }\n    triggerCallbacks(key);\n  }, [key, stringify]);\n  const removeItem = useCallback(() => {\n    goodTry(() => localStorage.removeItem(key));\n    inMemoryData.delete(key);\n    triggerCallbacks(key);\n  }, [key]);\n  // - syncs change across tabs, windows, iframes\n  // - the `storage` event is called only in all tabs, windows, iframe's except the one that\n  //   triggered the change\n  useEffect(() => {\n    if (!storageSync) {\n      return undefined;\n    }\n    const onStorage = e => {\n      if (e.key === key && e.storageArea === goodTry(() => localStorage)) {\n        triggerCallbacks(key);\n      }\n    };\n    window.addEventListener('storage', onStorage);\n    return () => window.removeEventListener('storage', onStorage);\n  }, [key, storageSync]);\n  return useMemo(() => [value, setState, {\n    isPersistent: value === defaultValue || !inMemoryData.has(key),\n    removeItem\n  }], [key, setState, value, defaultValue, removeItem]);\n}\n// notifies all instances using the same `key` to update\nconst callbacks = new Set();\nfunction triggerCallbacks(key) {\n  for (const callback of [...callbacks]) {\n    callback(key);\n  }\n}\n// a wrapper for `JSON.parse()` that supports \"undefined\" value. otherwise,\n// `JSON.parse(JSON.stringify(undefined))` returns the string \"undefined\" not the value `undefined`\nfunction parseJSON(value) {\n  return value === 'undefined' ? undefined : JSON.parse(value);\n}\nfunction goodTry(tryFn) {\n  try {\n    return tryFn();\n  } catch {}\n}","map":{"version":3,"names":["useCallback","useEffect","useMemo","useRef","useState","useSyncExternalStore","inMemoryData","Map","useLocalStorageState","key","options","serializer","defaultValue","useLocalStorage","storageSync","parse","stringify","arguments","length","undefined","parseJSON","JSON","storageItem","string","parsed","value","onStoreChange","onChange","localKey","callbacks","add","delete","goodTry","localStorage","getItem","has","current","get","setItem","setState","newValue","Function","set","triggerCallbacks","removeItem","onStorage","e","storageArea","window","addEventListener","removeEventListener","isPersistent","Set","callback","tryFn"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/use-local-storage-state/src/useLocalStorageState.js"],"sourcesContent":["import { useCallback, useEffect, useMemo, useRef, useState, useSyncExternalStore } from 'react';\n// in memory fallback used when `localStorage` throws an error\nexport const inMemoryData = new Map();\nexport default function useLocalStorageState(key, options) {\n    const serializer = options?.serializer;\n    const [defaultValue] = useState(options?.defaultValue);\n    return useLocalStorage(key, defaultValue, options?.storageSync, serializer?.parse, serializer?.stringify);\n}\nfunction useLocalStorage(key, defaultValue, storageSync = true, parse = parseJSON, stringify = JSON.stringify) {\n    // we keep the `parsed` value in a ref because `useSyncExternalStore` requires a cached version\n    const storageItem = useRef({\n        string: null,\n        parsed: undefined,\n    });\n    const value = useSyncExternalStore(\n    // useSyncExternalStore.subscribe\n    useCallback((onStoreChange) => {\n        const onChange = (localKey) => {\n            if (key === localKey) {\n                onStoreChange();\n            }\n        };\n        callbacks.add(onChange);\n        return () => {\n            callbacks.delete(onChange);\n        };\n    }, [key]), \n    // useSyncExternalStore.getSnapshot\n    () => {\n        const string = goodTry(() => localStorage.getItem(key)) ?? null;\n        if (inMemoryData.has(key)) {\n            storageItem.current.parsed = inMemoryData.get(key);\n        }\n        else if (string !== storageItem.current.string) {\n            let parsed;\n            try {\n                parsed = string === null ? defaultValue : parse(string);\n            }\n            catch {\n                parsed = defaultValue;\n            }\n            storageItem.current.parsed = parsed;\n        }\n        storageItem.current.string = string;\n        // store default value in localStorage:\n        // - initial issue: https://github.com/astoilkov/use-local-storage-state/issues/26\n        //   issues that were caused by incorrect initial and secondary implementations:\n        //   - https://github.com/astoilkov/use-local-storage-state/issues/30\n        //   - https://github.com/astoilkov/use-local-storage-state/issues/33\n        if (defaultValue !== undefined && string === null) {\n            // reasons for `localStorage` to throw an error:\n            // - maximum quota is exceeded\n            // - under Mobile Safari (since iOS 5) when the user enters private mode\n            //   `localStorage.setItem()` will throw\n            // - trying to access localStorage object when cookies are disabled in Safari throws\n            //   \"SecurityError: The operation is insecure.\"\n            // eslint-disable-next-line no-console\n            goodTry(() => {\n                const string = stringify(defaultValue);\n                localStorage.setItem(key, string);\n                storageItem.current = { string, parsed: defaultValue };\n            });\n        }\n        return storageItem.current.parsed;\n    }, \n    // useSyncExternalStore.getServerSnapshot\n    () => defaultValue);\n    const setState = useCallback((newValue) => {\n        const value = newValue instanceof Function ? newValue(storageItem.current.parsed) : newValue;\n        // reasons for `localStorage` to throw an error:\n        // - maximum quota is exceeded\n        // - under Mobile Safari (since iOS 5) when the user enters private mode\n        //   `localStorage.setItem()` will throw\n        // - trying to access `localStorage` object when cookies are disabled in Safari throws\n        //   \"SecurityError: The operation is insecure.\"\n        try {\n            localStorage.setItem(key, stringify(value));\n            inMemoryData.delete(key);\n        }\n        catch {\n            inMemoryData.set(key, value);\n        }\n        triggerCallbacks(key);\n    }, [key, stringify]);\n    const removeItem = useCallback(() => {\n        goodTry(() => localStorage.removeItem(key));\n        inMemoryData.delete(key);\n        triggerCallbacks(key);\n    }, [key]);\n    // - syncs change across tabs, windows, iframes\n    // - the `storage` event is called only in all tabs, windows, iframe's except the one that\n    //   triggered the change\n    useEffect(() => {\n        if (!storageSync) {\n            return undefined;\n        }\n        const onStorage = (e) => {\n            if (e.key === key && e.storageArea === goodTry(() => localStorage)) {\n                triggerCallbacks(key);\n            }\n        };\n        window.addEventListener('storage', onStorage);\n        return () => window.removeEventListener('storage', onStorage);\n    }, [key, storageSync]);\n    return useMemo(() => [\n        value,\n        setState,\n        {\n            isPersistent: value === defaultValue || !inMemoryData.has(key),\n            removeItem,\n        },\n    ], [key, setState, value, defaultValue, removeItem]);\n}\n// notifies all instances using the same `key` to update\nconst callbacks = new Set();\nfunction triggerCallbacks(key) {\n    for (const callback of [...callbacks]) {\n        callback(key);\n    }\n}\n// a wrapper for `JSON.parse()` that supports \"undefined\" value. otherwise,\n// `JSON.parse(JSON.stringify(undefined))` returns the string \"undefined\" not the value `undefined`\nfunction parseJSON(value) {\n    return value === 'undefined' ? undefined : JSON.parse(value);\n}\nfunction goodTry(tryFn) {\n    try {\n        return tryFn();\n    }\n    catch { }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}