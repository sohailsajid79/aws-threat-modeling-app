{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { memo, useEffect, useRef } from 'react';\nimport { getIsRtl } from '@cloudscape-design/component-toolkit/internal';\nimport { renderTextContent } from '../internal/components/responsive-text';\nexport default memo(ResponsiveText);\nfunction ResponsiveText({\n  x,\n  y,\n  rightSide,\n  className,\n  children,\n  containerBoundaries\n}) {\n  const actualRef = useRef(null);\n  const virtualRef = useRef(null);\n  const isRtl = actualRef.current ? getIsRtl(actualRef.current) : false;\n  rightSide = !isRtl ? rightSide : !rightSide;\n  // Determine the visible width of the text and if necessary truncate it until it fits.\n  useEffect(() => {\n    // The debouncing is necessary for visual smoothness.\n    const timeoutId = setTimeout(() => {\n      const isRtl = getIsRtl(virtualRef.current);\n      const groupRect = virtualRef.current.getBoundingClientRect();\n      const visibleWidth = containerBoundaries ? getVisibleWidth(groupRect, containerBoundaries) : 0;\n      renderTextContent(actualRef.current, children, visibleWidth, isRtl);\n    }, 25);\n    return () => clearTimeout(timeoutId);\n  });\n  return React.createElement(React.Fragment, null, React.createElement(\"text\", {\n    ref: virtualRef,\n    x: x,\n    y: y,\n    style: {\n      textAnchor: rightSide ? 'start' : 'end',\n      visibility: 'hidden'\n    },\n    \"aria-hidden\": \"true\",\n    className: className\n  }, children), React.createElement(\"text\", {\n    ref: actualRef,\n    x: x,\n    y: y,\n    style: {\n      textAnchor: rightSide ? 'start' : 'end'\n    },\n    className: className\n  }, children));\n}\nfunction getVisibleWidth(element, container) {\n  if (element.left < container.left) {\n    return element.right - container.left;\n  } else if (element.right > container.right) {\n    return container.right - element.left;\n  } else {\n    return container.right - container.left;\n  }\n}","map":{"version":3,"names":["React","memo","useEffect","useRef","getIsRtl","renderTextContent","ResponsiveText","x","y","rightSide","className","children","containerBoundaries","actualRef","virtualRef","isRtl","current","timeoutId","setTimeout","groupRect","getBoundingClientRect","visibleWidth","getVisibleWidth","clearTimeout","createElement","Fragment","ref","style","textAnchor","visibility","element","container","left","right"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/pie-chart/responsive-text.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { memo, useEffect, useRef } from 'react';\n\nimport { getIsRtl } from '@cloudscape-design/component-toolkit/internal';\n\nimport { renderTextContent } from '../internal/components/responsive-text';\n\ninterface ResponsiveTextProps {\n  x: number;\n  y: number;\n  rightSide?: boolean;\n  className?: string;\n  children: string;\n  containerBoundaries: null | { left: number; right: number };\n}\n\nexport default memo(ResponsiveText);\n\nfunction ResponsiveText({ x, y, rightSide, className, children, containerBoundaries }: ResponsiveTextProps) {\n  const actualRef = useRef<SVGTextElement>(null);\n  const virtualRef = useRef<SVGTextElement>(null);\n\n  const isRtl = actualRef.current ? getIsRtl(actualRef.current) : false;\n  rightSide = !isRtl ? rightSide : !rightSide;\n\n  // Determine the visible width of the text and if necessary truncate it until it fits.\n  useEffect(() => {\n    // The debouncing is necessary for visual smoothness.\n    const timeoutId = setTimeout(() => {\n      const isRtl = getIsRtl(virtualRef.current!);\n      const groupRect = virtualRef.current!.getBoundingClientRect();\n      const visibleWidth = containerBoundaries ? getVisibleWidth(groupRect, containerBoundaries) : 0;\n      renderTextContent(actualRef.current!, children, visibleWidth, isRtl);\n    }, 25);\n    return () => clearTimeout(timeoutId);\n  });\n\n  return (\n    <>\n      {/* Invisible sample text used for measurement */}\n      <text\n        ref={virtualRef}\n        x={x}\n        y={y}\n        style={{ textAnchor: rightSide ? 'start' : 'end', visibility: 'hidden' }}\n        aria-hidden=\"true\"\n        className={className}\n      >\n        {children}\n      </text>\n\n      {/* Text node to render truncated text into */}\n      <text ref={actualRef} x={x} y={y} style={{ textAnchor: rightSide ? 'start' : 'end' }} className={className}>\n        {children}\n      </text>\n    </>\n  );\n}\n\nfunction getVisibleWidth(element: { left: number; right: number }, container: { left: number; right: number }): number {\n  if (element.left < container.left) {\n    return element.right - container.left;\n  } else if (element.right > container.right) {\n    return container.right - element.left;\n  } else {\n    return container.right - container.left;\n  }\n}\n"],"mappings":"AAAA;AACA;AACA,OAAOA,KAAK,IAAIC,IAAI,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEtD,SAASC,QAAQ,QAAQ,+CAA+C;AAExE,SAASC,iBAAiB,QAAQ,wCAAwC;AAW1E,eAAeJ,IAAI,CAACK,cAAc,CAAC;AAEnC,SAASA,cAAcA,CAAC;EAAEC,CAAC;EAAEC,CAAC;EAAEC,SAAS;EAAEC,SAAS;EAAEC,QAAQ;EAAEC;AAAmB,CAAuB;EACxG,MAAMC,SAAS,GAAGV,MAAM,CAAiB,IAAI,CAAC;EAC9C,MAAMW,UAAU,GAAGX,MAAM,CAAiB,IAAI,CAAC;EAE/C,MAAMY,KAAK,GAAGF,SAAS,CAACG,OAAO,GAAGZ,QAAQ,CAACS,SAAS,CAACG,OAAO,CAAC,GAAG,KAAK;EACrEP,SAAS,GAAG,CAACM,KAAK,GAAGN,SAAS,GAAG,CAACA,SAAS;EAE3C;EACAP,SAAS,CAAC,MAAK;IACb;IACA,MAAMe,SAAS,GAAGC,UAAU,CAAC,MAAK;MAChC,MAAMH,KAAK,GAAGX,QAAQ,CAACU,UAAU,CAACE,OAAQ,CAAC;MAC3C,MAAMG,SAAS,GAAGL,UAAU,CAACE,OAAQ,CAACI,qBAAqB,EAAE;MAC7D,MAAMC,YAAY,GAAGT,mBAAmB,GAAGU,eAAe,CAACH,SAAS,EAAEP,mBAAmB,CAAC,GAAG,CAAC;MAC9FP,iBAAiB,CAACQ,SAAS,CAACG,OAAQ,EAAEL,QAAQ,EAAEU,YAAY,EAAEN,KAAK,CAAC;IACtE,CAAC,EAAE,EAAE,CAAC;IACN,OAAO,MAAMQ,YAAY,CAACN,SAAS,CAAC;EACtC,CAAC,CAAC;EAEF,OACEjB,KAAA,CAAAwB,aAAA,CAAAxB,KAAA,CAAAyB,QAAA,QAEEzB,KAAA,CAAAwB,aAAA;IACEE,GAAG,EAAEZ,UAAU;IACfP,CAAC,EAAEA,CAAC;IACJC,CAAC,EAAEA,CAAC;IACJmB,KAAK,EAAE;MAAEC,UAAU,EAAEnB,SAAS,GAAG,OAAO,GAAG,KAAK;MAAEoB,UAAU,EAAE;IAAQ,CAAE;IAAA,eAC5D,MAAM;IAClBnB,SAAS,EAAEA;EAAS,GAEnBC,QAAQ,CACJ,EAGPX,KAAA,CAAAwB,aAAA;IAAME,GAAG,EAAEb,SAAS;IAAEN,CAAC,EAAEA,CAAC;IAAEC,CAAC,EAAEA,CAAC;IAAEmB,KAAK,EAAE;MAAEC,UAAU,EAAEnB,SAAS,GAAG,OAAO,GAAG;IAAK,CAAE;IAAEC,SAAS,EAAEA;EAAS,GACvGC,QAAQ,CACJ,CACN;AAEP;AAEA,SAASW,eAAeA,CAACQ,OAAwC,EAAEC,SAA0C;EAC3G,IAAID,OAAO,CAACE,IAAI,GAAGD,SAAS,CAACC,IAAI,EAAE;IACjC,OAAOF,OAAO,CAACG,KAAK,GAAGF,SAAS,CAACC,IAAI;GACtC,MAAM,IAAIF,OAAO,CAACG,KAAK,GAAGF,SAAS,CAACE,KAAK,EAAE;IAC1C,OAAOF,SAAS,CAACE,KAAK,GAAGH,OAAO,CAACE,IAAI;GACtC,MAAM;IACL,OAAOD,SAAS,CAACE,KAAK,GAAGF,SAAS,CAACC,IAAI;;AAE3C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}