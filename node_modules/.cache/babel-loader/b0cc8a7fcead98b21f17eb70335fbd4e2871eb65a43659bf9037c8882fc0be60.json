{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback, useEffect, useImperativeHandle, useRef } from 'react';\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\nimport OptionsList from '../internal/components/options-list';\nimport { useVirtual } from '../internal/hooks/use-virtual';\nimport AutosuggestOption from './autosuggest-option';\nimport { getOptionProps } from './plain-list';\nimport styles from './styles.css.js';\nconst VirtualList = _ref => {\n  let {\n    autosuggestItemsState,\n    handleLoadMore,\n    menuProps,\n    highlightedA11yProps,\n    hasDropdownStatus,\n    highlightText,\n    listBottom,\n    screenReaderContent\n  } = _ref;\n  const scrollRef = useRef(null);\n  // update component, when it gets wider or narrower to reposition items\n  const [width, strutRef] = useContainerQuery(rect => rect.contentBoxWidth, []);\n  useImperativeHandle(strutRef, () => scrollRef.current);\n  const rowVirtualizer = useVirtual({\n    items: autosuggestItemsState.items,\n    parentRef: scrollRef,\n    // estimateSize is a dependency of measurements memo. We update it to force full recalculation\n    // when the height of any option could have changed:\n    // 1: because the component got resized (width property got updated)\n    // 2: because the option changed its content (highlightText property controls the highlight and the visibility of hidden tags)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    estimateSize: useCallback(() => 31, [width, highlightText])\n  });\n  useEffect(() => {\n    if (autosuggestItemsState.highlightType.moveFocus) {\n      rowVirtualizer.scrollToIndex(autosuggestItemsState.highlightedIndex);\n    }\n  }, [autosuggestItemsState.highlightType, autosuggestItemsState.highlightedIndex, rowVirtualizer]);\n  return React.createElement(OptionsList, Object.assign({}, menuProps, {\n    onLoadMore: handleLoadMore,\n    ref: scrollRef,\n    open: true\n  }), React.createElement(\"div\", {\n    \"aria-hidden\": \"true\",\n    key: \"total-size\",\n    className: styles['layout-strut'],\n    style: {\n      height: rowVirtualizer.totalSize + (autosuggestItemsState.items.length === 1 ? 1 : 0)\n    }\n  }), rowVirtualizer.virtualItems.map(virtualRow => {\n    const {\n      index,\n      start,\n      measureRef\n    } = virtualRow;\n    const item = autosuggestItemsState.items[index];\n    const optionProps = getOptionProps(index, item, autosuggestItemsState.items, highlightedA11yProps, autosuggestItemsState.highlightedOption, hasDropdownStatus);\n    return React.createElement(AutosuggestOption, Object.assign({\n      key: index,\n      ref: measureRef,\n      highlightText: highlightText,\n      option: item,\n      highlighted: item === autosuggestItemsState.highlightedOption,\n      current: item.value === highlightText,\n      \"data-mouse-target\": index,\n      virtualPosition: start + (index === 0 ? 1 : 0),\n      screenReaderContent: screenReaderContent,\n      ariaSetsize: autosuggestItemsState.items.length,\n      ariaPosinset: index + 1,\n      highlightType: autosuggestItemsState.highlightType\n    }, optionProps));\n  }), listBottom ? React.createElement(\"li\", {\n    role: \"option\",\n    className: styles['list-bottom']\n  }, listBottom) : null);\n};\nexport default VirtualList;","map":{"version":3,"names":["React","useCallback","useEffect","useImperativeHandle","useRef","useContainerQuery","OptionsList","useVirtual","AutosuggestOption","getOptionProps","styles","VirtualList","_ref","autosuggestItemsState","handleLoadMore","menuProps","highlightedA11yProps","hasDropdownStatus","highlightText","listBottom","screenReaderContent","scrollRef","width","strutRef","rect","contentBoxWidth","current","rowVirtualizer","items","parentRef","estimateSize","highlightType","moveFocus","scrollToIndex","highlightedIndex","createElement","Object","assign","onLoadMore","ref","open","key","className","style","height","totalSize","length","virtualItems","map","virtualRow","index","start","measureRef","item","optionProps","highlightedOption","option","highlighted","value","virtualPosition","ariaSetsize","ariaPosinset","role"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/autosuggest/virtual-list.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback, useEffect, useImperativeHandle, useRef } from 'react';\n\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\n\nimport OptionsList from '../internal/components/options-list';\nimport { useVirtual } from '../internal/hooks/use-virtual';\nimport AutosuggestOption from './autosuggest-option';\nimport { getOptionProps, ListProps } from './plain-list';\n\nimport styles from './styles.css.js';\n\nconst VirtualList = ({\n  autosuggestItemsState,\n  handleLoadMore,\n  menuProps,\n  highlightedA11yProps,\n  hasDropdownStatus,\n  highlightText,\n  listBottom,\n  screenReaderContent,\n}: ListProps) => {\n  const scrollRef = useRef<HTMLUListElement>(null);\n  // update component, when it gets wider or narrower to reposition items\n  const [width, strutRef] = useContainerQuery(rect => rect.contentBoxWidth, []);\n  useImperativeHandle(strutRef, () => scrollRef.current);\n\n  const rowVirtualizer = useVirtual({\n    items: autosuggestItemsState.items,\n    parentRef: scrollRef,\n    // estimateSize is a dependency of measurements memo. We update it to force full recalculation\n    // when the height of any option could have changed:\n    // 1: because the component got resized (width property got updated)\n    // 2: because the option changed its content (highlightText property controls the highlight and the visibility of hidden tags)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    estimateSize: useCallback(() => 31, [width, highlightText]),\n  });\n\n  useEffect(() => {\n    if (autosuggestItemsState.highlightType.moveFocus) {\n      rowVirtualizer.scrollToIndex(autosuggestItemsState.highlightedIndex);\n    }\n  }, [autosuggestItemsState.highlightType, autosuggestItemsState.highlightedIndex, rowVirtualizer]);\n\n  return (\n    <OptionsList {...menuProps} onLoadMore={handleLoadMore} ref={scrollRef} open={true}>\n      <div\n        aria-hidden=\"true\"\n        key=\"total-size\"\n        className={styles['layout-strut']}\n        style={{ height: rowVirtualizer.totalSize + (autosuggestItemsState.items.length === 1 ? 1 : 0) }}\n      />\n      {rowVirtualizer.virtualItems.map(virtualRow => {\n        const { index, start, measureRef } = virtualRow;\n        const item = autosuggestItemsState.items[index];\n        const optionProps = getOptionProps(\n          index,\n          item,\n          autosuggestItemsState.items,\n          highlightedA11yProps,\n          autosuggestItemsState.highlightedOption,\n          hasDropdownStatus\n        );\n\n        return (\n          <AutosuggestOption\n            key={index}\n            ref={measureRef}\n            highlightText={highlightText}\n            option={item}\n            highlighted={item === autosuggestItemsState.highlightedOption}\n            current={item.value === highlightText}\n            data-mouse-target={index}\n            virtualPosition={start + (index === 0 ? 1 : 0)}\n            screenReaderContent={screenReaderContent}\n            ariaSetsize={autosuggestItemsState.items.length}\n            ariaPosinset={index + 1}\n            highlightType={autosuggestItemsState.highlightType}\n            {...optionProps}\n          />\n        );\n      })}\n      {listBottom ? (\n        <li role=\"option\" className={styles['list-bottom']}>\n          {listBottom}\n        </li>\n      ) : null}\n    </OptionsList>\n  );\n};\n\nexport default VirtualList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}