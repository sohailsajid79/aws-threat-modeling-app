{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\nimport { fireCancelableEvent } from '../internal/events';\nimport { nodeBelongs } from '../internal/utils/node-belongs';\nimport IconButtonItem from './icon-button-item';\nimport MenuDropdownItem from './menu-dropdown-item';\nimport styles from './styles.css.js';\nconst ItemElement = forwardRef(({\n  item,\n  dropdownExpandToViewport,\n  tooltip,\n  setTooltip,\n  onItemClick\n}, ref) => {\n  const containerRef = useRef(null);\n  const buttonRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      var _a;\n      (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }));\n  useEffect(() => {\n    if ((tooltip === null || tooltip === void 0 ? void 0 : tooltip.item) !== item.id) {\n      return;\n    }\n    const close = () => {\n      setTooltip(null);\n    };\n    const handlePointerDownEvent = event => {\n      var _a;\n      if (event.target && ((_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target))) {\n        return;\n      }\n      close();\n    };\n    const handleKeyDownEvent = event => {\n      if (event.key === 'Escape') {\n        close();\n      }\n    };\n    window.addEventListener('pointerdown', handlePointerDownEvent);\n    window.addEventListener('keydown', handleKeyDownEvent);\n    return () => {\n      window.removeEventListener('pointerdown', handlePointerDownEvent);\n      window.removeEventListener('keydown', handleKeyDownEvent);\n    };\n  }, [item.id, tooltip, setTooltip]);\n  const onShowTooltipSoft = show => {\n    if (!(tooltip === null || tooltip === void 0 ? void 0 : tooltip.feedback)) {\n      setTooltip(show ? {\n        item: item.id,\n        feedback: false\n      } : null);\n    }\n  };\n  const onShowTooltipHard = show => {\n    if (!show && item.id !== (tooltip === null || tooltip === void 0 ? void 0 : tooltip.item)) {\n      return;\n    }\n    setTooltip(show ? {\n      item: item.id,\n      feedback: false\n    } : null);\n  };\n  const onClickHandler = event => {\n    const hasPopoverFeedback = 'popoverFeedback' in item && item.popoverFeedback;\n    if (hasPopoverFeedback) {\n      setTooltip({\n        item: item.id,\n        feedback: true\n      });\n    }\n    fireCancelableEvent(onItemClick, {\n      id: 'id' in event.detail ? event.detail.id : item.id\n    }, event);\n  };\n  return React.createElement(\"div\", {\n    key: item.id,\n    className: styles['item-wrapper'],\n    ref: containerRef,\n    onPointerEnter: () => onShowTooltipSoft(true),\n    onPointerLeave: () => onShowTooltipSoft(false),\n    onFocus: event => {\n      // Showing no tooltip when the focus comes from inside the container.\n      // This is needed to prevent the tooltip after a menu closes with item selection or Escape.\n      if (event && event.relatedTarget && nodeBelongs(containerRef.current, event.relatedTarget)) {\n        return;\n      }\n      onShowTooltipHard(true);\n    },\n    onBlur: () => onShowTooltipHard(false)\n  }, item.type === 'icon-button' && React.createElement(IconButtonItem, {\n    ref: buttonRef,\n    item: item,\n    onItemClick: onClickHandler,\n    showTooltip: (tooltip === null || tooltip === void 0 ? void 0 : tooltip.item) === item.id,\n    showFeedback: !!(tooltip === null || tooltip === void 0 ? void 0 : tooltip.feedback)\n  }), item.type === 'menu-dropdown' && React.createElement(MenuDropdownItem, {\n    ref: buttonRef,\n    item: item,\n    showTooltip: (tooltip === null || tooltip === void 0 ? void 0 : tooltip.item) === item.id,\n    onItemClick: onClickHandler,\n    expandToViewport: dropdownExpandToViewport\n  }));\n});\nexport default ItemElement;","map":{"version":3,"names":["React","forwardRef","useEffect","useImperativeHandle","useRef","fireCancelableEvent","nodeBelongs","IconButtonItem","MenuDropdownItem","styles","ItemElement","item","dropdownExpandToViewport","tooltip","setTooltip","onItemClick","ref","containerRef","buttonRef","focus","_a","current","id","close","handlePointerDownEvent","event","target","contains","handleKeyDownEvent","key","window","addEventListener","removeEventListener","onShowTooltipSoft","show","feedback","onShowTooltipHard","onClickHandler","hasPopoverFeedback","popoverFeedback","detail","createElement","className","onPointerEnter","onPointerLeave","onFocus","relatedTarget","onBlur","type","showTooltip","showFeedback","expandToViewport"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/button-group/item-element.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\n\nimport { ButtonProps } from '../button/interfaces.js';\nimport { ClickDetail, fireCancelableEvent, NonCancelableEventHandler } from '../internal/events';\nimport { nodeBelongs } from '../internal/utils/node-belongs';\nimport IconButtonItem from './icon-button-item';\nimport { ButtonGroupProps } from './interfaces';\nimport MenuDropdownItem from './menu-dropdown-item';\n\nimport styles from './styles.css.js';\n\ninterface ItemElementProps {\n  item: ButtonGroupProps.Item;\n  dropdownExpandToViewport?: boolean;\n  tooltip: null | { item: string; feedback: boolean };\n  setTooltip: (tooltip: null | { item: string; feedback: boolean }) => void;\n  onItemClick?: NonCancelableEventHandler<ButtonGroupProps.ItemClickDetails> | undefined;\n}\n\nconst ItemElement = forwardRef(\n  (\n    { item, dropdownExpandToViewport, tooltip, setTooltip, onItemClick }: ItemElementProps,\n    ref: React.Ref<ButtonProps.Ref>\n  ) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const buttonRef = useRef<HTMLButtonElement>(null);\n\n    useImperativeHandle(ref, () => ({\n      focus: () => {\n        buttonRef.current?.focus();\n      },\n    }));\n\n    useEffect(() => {\n      if (tooltip?.item !== item.id) {\n        return;\n      }\n\n      const close = () => {\n        setTooltip(null);\n      };\n\n      const handlePointerDownEvent = (event: PointerEvent) => {\n        if (event.target && containerRef.current?.contains(event.target as HTMLElement)) {\n          return;\n        }\n\n        close();\n      };\n\n      const handleKeyDownEvent = (event: KeyboardEvent) => {\n        if (event.key === 'Escape') {\n          close();\n        }\n      };\n\n      window.addEventListener('pointerdown', handlePointerDownEvent);\n      window.addEventListener('keydown', handleKeyDownEvent);\n\n      return () => {\n        window.removeEventListener('pointerdown', handlePointerDownEvent);\n        window.removeEventListener('keydown', handleKeyDownEvent);\n      };\n    }, [item.id, tooltip, setTooltip]);\n\n    const onShowTooltipSoft = (show: boolean) => {\n      if (!tooltip?.feedback) {\n        setTooltip(show ? { item: item.id, feedback: false } : null);\n      }\n    };\n\n    const onShowTooltipHard = (show: boolean) => {\n      if (!show && item.id !== tooltip?.item) {\n        return;\n      }\n\n      setTooltip(show ? { item: item.id, feedback: false } : null);\n    };\n\n    const onClickHandler = (event: CustomEvent<ButtonGroupProps.ItemClickDetails | ClickDetail>) => {\n      const hasPopoverFeedback = 'popoverFeedback' in item && item.popoverFeedback;\n\n      if (hasPopoverFeedback) {\n        setTooltip({ item: item.id, feedback: true });\n      }\n\n      fireCancelableEvent(onItemClick, { id: 'id' in event.detail ? event.detail.id : item.id }, event);\n    };\n\n    return (\n      <div\n        key={item.id}\n        className={styles['item-wrapper']}\n        ref={containerRef}\n        onPointerEnter={() => onShowTooltipSoft(true)}\n        onPointerLeave={() => onShowTooltipSoft(false)}\n        onFocus={event => {\n          // Showing no tooltip when the focus comes from inside the container.\n          // This is needed to prevent the tooltip after a menu closes with item selection or Escape.\n          if (event && event.relatedTarget && nodeBelongs(containerRef.current, event.relatedTarget)) {\n            return;\n          }\n          onShowTooltipHard(true);\n        }}\n        onBlur={() => onShowTooltipHard(false)}\n      >\n        {item.type === 'icon-button' && (\n          <IconButtonItem\n            ref={buttonRef}\n            item={item}\n            onItemClick={onClickHandler}\n            showTooltip={tooltip?.item === item.id}\n            showFeedback={!!tooltip?.feedback}\n          />\n        )}\n        {item.type === 'menu-dropdown' && (\n          <MenuDropdownItem\n            ref={buttonRef}\n            item={item}\n            showTooltip={tooltip?.item === item.id}\n            onItemClick={onClickHandler}\n            expandToViewport={dropdownExpandToViewport}\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nexport default ItemElement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}