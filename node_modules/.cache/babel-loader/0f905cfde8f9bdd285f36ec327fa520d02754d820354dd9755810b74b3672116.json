{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport InternalBox from '../box/internal';\nimport { useFormFieldContext } from '../contexts/form-field';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { S3InContext } from './s3-in-context';\nimport { S3Modal } from './s3-modal';\nimport styles from './styles.css.js';\nconst S3ResourceSelector = React.forwardRef((_a, ref) => {\n  var {\n      i18nStrings,\n      inputPlaceholder,\n      alert,\n      resource,\n      viewHref,\n      invalid,\n      selectableItemsTypes = [],\n      inputAriaDescribedby,\n      bucketsVisibleColumns = ['Name', 'CreationDate'],\n      bucketsIsItemDisabled,\n      fetchBuckets,\n      fetchObjects,\n      objectsVisibleColumns = ['Key', 'LastModified', 'Size'],\n      objectsIsItemDisabled,\n      fetchVersions,\n      versionsVisibleColumns = ['ID', 'LastModified', 'Size'],\n      versionsIsItemDisabled,\n      onChange,\n      ariaLabel,\n      getModalRoot,\n      removeModalRoot\n    } = _a,\n    rest = __rest(_a, [\"i18nStrings\", \"inputPlaceholder\", \"alert\", \"resource\", \"viewHref\", \"invalid\", \"selectableItemsTypes\", \"inputAriaDescribedby\", \"bucketsVisibleColumns\", \"bucketsIsItemDisabled\", \"fetchBuckets\", \"fetchObjects\", \"objectsVisibleColumns\", \"objectsIsItemDisabled\", \"fetchVersions\", \"versionsVisibleColumns\", \"versionsIsItemDisabled\", \"onChange\", \"ariaLabel\", \"getModalRoot\", \"removeModalRoot\"]);\n  checkSafeUrl('S3ResourceSelector', viewHref);\n  const {\n    __internalRootRef\n  } = useBaseComponent('S3ResourceSelector');\n  const [modalOpen, setModalOpen] = useState(false);\n  const inContextRef = useRef(null);\n  const modalWasSubmitted = useRef(false);\n  useForwardFocus(ref, inContextRef);\n  const {\n    ariaLabelledby,\n    ariaDescribedby\n  } = useFormFieldContext(rest);\n  useEffect(() => {\n    var _a;\n    // Focus uriInput only when modal was submitted.\n    // When it was dismissed, the focus naturally goes to previously focused element (browse button)\n    if (!modalOpen && modalWasSubmitted.current) {\n      modalWasSubmitted.current = false;\n      (_a = inContextRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }, [modalOpen]);\n  const baseProps = getBaseProps(rest);\n  const modalProps = {\n    alert,\n    i18nStrings,\n    fetchBuckets,\n    selectableItemsTypes,\n    bucketsVisibleColumns,\n    bucketsIsItemDisabled,\n    fetchObjects,\n    objectsVisibleColumns,\n    objectsIsItemDisabled,\n    fetchVersions,\n    versionsVisibleColumns,\n    versionsIsItemDisabled,\n    getModalRoot,\n    removeModalRoot,\n    onSubmit: resource => {\n      fireNonCancelableEvent(onChange, {\n        resource\n      });\n      setModalOpen(false);\n      modalWasSubmitted.current = true;\n    },\n    onDismiss: () => setModalOpen(false)\n  };\n  return React.createElement(\"div\", Object.assign({}, baseProps, {\n    className: clsx(styles.root, baseProps.className),\n    ref: __internalRootRef,\n    role: \"group\",\n    \"aria-labelledby\": ariaLabelledby,\n    \"aria-describedby\": ariaDescribedby,\n    \"aria-label\": ariaLabel\n  }), React.createElement(S3InContext, {\n    ref: inContextRef,\n    selectableItemsTypes: selectableItemsTypes,\n    i18nStrings: i18nStrings,\n    inputPlaceholder: inputPlaceholder,\n    resource: resource,\n    viewHref: viewHref,\n    invalid: invalid,\n    inputAriaDescribedby: inputAriaDescribedby,\n    fetchVersions: fetchVersions,\n    onBrowse: () => setModalOpen(true),\n    onChange: (resource, errorText) => fireNonCancelableEvent(onChange, {\n      resource,\n      errorText\n    })\n  }), !modalOpen && alert && React.createElement(InternalBox, {\n    className: styles.alert,\n    margin: {\n      top: 's'\n    }\n  }, alert), modalOpen && React.createElement(S3Modal, Object.assign({}, modalProps)));\n});\napplyDisplayName(S3ResourceSelector, 'S3ResourceSelector');\nexport default S3ResourceSelector;","map":{"version":3,"names":["React","useEffect","useRef","useState","clsx","InternalBox","useFormFieldContext","getBaseProps","fireNonCancelableEvent","useForwardFocus","useBaseComponent","applyDisplayName","checkSafeUrl","S3InContext","S3Modal","styles","S3ResourceSelector","forwardRef","_a","ref","i18nStrings","inputPlaceholder","alert","resource","viewHref","invalid","selectableItemsTypes","inputAriaDescribedby","bucketsVisibleColumns","bucketsIsItemDisabled","fetchBuckets","fetchObjects","objectsVisibleColumns","objectsIsItemDisabled","fetchVersions","versionsVisibleColumns","versionsIsItemDisabled","onChange","ariaLabel","getModalRoot","removeModalRoot","rest","__rest","__internalRootRef","modalOpen","setModalOpen","inContextRef","modalWasSubmitted","ariaLabelledby","ariaDescribedby","current","focus","baseProps","modalProps","onSubmit","onDismiss","createElement","Object","assign","className","root","role","onBrowse","errorText","margin","top"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/s3-resource-selector/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\n\nimport InternalBox from '../box/internal';\nimport { useFormFieldContext } from '../contexts/form-field';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { S3ResourceSelectorProps } from './interfaces';\nimport { S3InContext, S3InContextRef } from './s3-in-context';\nimport { S3Modal, S3ModalProps } from './s3-modal';\n\nimport styles from './styles.css.js';\n\nexport { S3ResourceSelectorProps };\n\nconst S3ResourceSelector = React.forwardRef(\n  (\n    {\n      i18nStrings,\n      inputPlaceholder,\n      alert,\n      resource,\n      viewHref,\n      invalid,\n      selectableItemsTypes = [],\n      inputAriaDescribedby,\n      bucketsVisibleColumns = ['Name', 'CreationDate'],\n      bucketsIsItemDisabled,\n      fetchBuckets,\n      fetchObjects,\n      objectsVisibleColumns = ['Key', 'LastModified', 'Size'],\n      objectsIsItemDisabled,\n      fetchVersions,\n      versionsVisibleColumns = ['ID', 'LastModified', 'Size'],\n      versionsIsItemDisabled,\n      onChange,\n      ariaLabel,\n      getModalRoot,\n      removeModalRoot,\n      ...rest\n    }: S3ResourceSelectorProps,\n    ref: React.Ref<S3ResourceSelectorProps.Ref>\n  ) => {\n    checkSafeUrl('S3ResourceSelector', viewHref);\n    const { __internalRootRef } = useBaseComponent('S3ResourceSelector');\n    const [modalOpen, setModalOpen] = useState(false);\n    const inContextRef = useRef<S3InContextRef>(null);\n    const modalWasSubmitted = useRef<boolean>(false);\n    useForwardFocus(ref, inContextRef);\n    const { ariaLabelledby, ariaDescribedby } = useFormFieldContext(rest);\n\n    useEffect(() => {\n      // Focus uriInput only when modal was submitted.\n      // When it was dismissed, the focus naturally goes to previously focused element (browse button)\n      if (!modalOpen && modalWasSubmitted.current) {\n        modalWasSubmitted.current = false;\n        inContextRef.current?.focus();\n      }\n    }, [modalOpen]);\n\n    const baseProps = getBaseProps(rest);\n    const modalProps: S3ModalProps = {\n      alert,\n      i18nStrings,\n      fetchBuckets,\n      selectableItemsTypes,\n      bucketsVisibleColumns,\n      bucketsIsItemDisabled,\n      fetchObjects,\n      objectsVisibleColumns,\n      objectsIsItemDisabled,\n      fetchVersions,\n      versionsVisibleColumns,\n      versionsIsItemDisabled,\n      getModalRoot,\n      removeModalRoot,\n      onSubmit: resource => {\n        fireNonCancelableEvent(onChange, { resource });\n        setModalOpen(false);\n        modalWasSubmitted.current = true;\n      },\n      onDismiss: () => setModalOpen(false),\n    };\n    return (\n      <div\n        {...baseProps}\n        className={clsx(styles.root, baseProps.className)}\n        ref={__internalRootRef}\n        role=\"group\"\n        aria-labelledby={ariaLabelledby}\n        aria-describedby={ariaDescribedby}\n        aria-label={ariaLabel}\n      >\n        <S3InContext\n          ref={inContextRef}\n          selectableItemsTypes={selectableItemsTypes}\n          i18nStrings={i18nStrings}\n          inputPlaceholder={inputPlaceholder}\n          resource={resource}\n          viewHref={viewHref}\n          invalid={invalid}\n          inputAriaDescribedby={inputAriaDescribedby}\n          fetchVersions={fetchVersions}\n          onBrowse={() => setModalOpen(true)}\n          onChange={(resource, errorText) => fireNonCancelableEvent(onChange, { resource, errorText })}\n        />\n        {!modalOpen && alert && (\n          <InternalBox className={styles.alert} margin={{ top: 's' }}>\n            {alert}\n          </InternalBox>\n        )}\n        {modalOpen && <S3Modal {...modalProps} />}\n      </div>\n    );\n  }\n);\n\napplyDisplayName(S3ResourceSelector, 'S3ResourceSelector');\nexport default S3ResourceSelector;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}