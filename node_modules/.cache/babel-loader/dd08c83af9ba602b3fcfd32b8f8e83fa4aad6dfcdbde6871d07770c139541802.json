{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ResizeObserver, ResizeObserverEntry } from '@juggle/resize-observer';\nimport { useEffect, useLayoutEffect } from 'react';\nimport { useStableCallback } from '../stable-callback';\n/**\n * Attaches resize-observer to the referenced element.\n *\n * @remarks\n *\n * The hook has no control over the referenced element. It is up to the consumer to ensure\n * the element lifecycle and notify the hook by updating the `elementRef`.\n *\n * @example\n * With React reference\n * ```\n * const ref = useRef(null)\n * useResizeObserver(ref, (entry) => setState(getWidth(entry)))\n * ```\n *\n * @example\n * With ID reference\n * ```\n * const getElement = useCallback(() => document.getElementById(id), [id])\n * useResizeObserver(getElement, (entry) => setState(getWidth(entry)))\n * ```\n *\n * @param elementRef React reference or memoized getter for the target element\n * @param onObserve Function to fire when observation occurs\n */\nexport function useResizeObserver(elementRef, onObserve) {\n  const stableOnObserve = useStableCallback(onObserve);\n  // This effect provides a synchronous update required to prevent flakiness when initial state and first observed state are different.\n  // Can potentially conflict with React concurrent mode: https://17.reactjs.org/docs/concurrent-mode-intro.html.\n  // TODO: A possible solution would be to make consumers not render any content until the first (asynchronous) observation is available.\n  useLayoutEffect(() => {\n    const element = typeof elementRef === 'function' ? elementRef() : elementRef === null || elementRef === void 0 ? void 0 : elementRef.current;\n    if (element) {\n      onObserve(convertResizeObserverEntry(new ResizeObserverEntry(element)));\n    }\n  },\n  // This effect is only needed for the first render to provide a synchronous update.\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  useEffect(() => {\n    const element = typeof elementRef === 'function' ? elementRef() : elementRef === null || elementRef === void 0 ? void 0 : elementRef.current;\n    if (element) {\n      let connected = true;\n      const observer = new ResizeObserver(entries => {\n        // Prevent observe notifications on already unmounted component.\n        if (connected) {\n          stableOnObserve(convertResizeObserverEntry(entries[0]));\n        }\n      });\n      observer.observe(element);\n      return () => {\n        connected = false;\n        observer.disconnect();\n      };\n    }\n  }, [elementRef, stableOnObserve]);\n}\nfunction convertResizeObserverEntry(entry) {\n  return {\n    target: entry.target,\n    contentBoxWidth: entry.contentBoxSize[0].inlineSize,\n    contentBoxHeight: entry.contentBoxSize[0].blockSize,\n    borderBoxWidth: entry.borderBoxSize[0].inlineSize,\n    borderBoxHeight: entry.borderBoxSize[0].blockSize\n  };\n}","map":{"version":3,"names":["ResizeObserver","ResizeObserverEntry","useEffect","useLayoutEffect","useStableCallback","useResizeObserver","elementRef","onObserve","stableOnObserve","element","current","convertResizeObserverEntry","connected","observer","entries","observe","disconnect","entry","target","contentBoxWidth","contentBoxSize","inlineSize","contentBoxHeight","blockSize","borderBoxWidth","borderBoxSize","borderBoxHeight"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/@cloudscape-design/component-toolkit/internal/container-queries/use-resize-observer.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ResizeObserver, ResizeObserverEntry } from '@juggle/resize-observer';\nimport { useEffect, useLayoutEffect } from 'react';\nimport { useStableCallback } from '../stable-callback';\n/**\n * Attaches resize-observer to the referenced element.\n *\n * @remarks\n *\n * The hook has no control over the referenced element. It is up to the consumer to ensure\n * the element lifecycle and notify the hook by updating the `elementRef`.\n *\n * @example\n * With React reference\n * ```\n * const ref = useRef(null)\n * useResizeObserver(ref, (entry) => setState(getWidth(entry)))\n * ```\n *\n * @example\n * With ID reference\n * ```\n * const getElement = useCallback(() => document.getElementById(id), [id])\n * useResizeObserver(getElement, (entry) => setState(getWidth(entry)))\n * ```\n *\n * @param elementRef React reference or memoized getter for the target element\n * @param onObserve Function to fire when observation occurs\n */\nexport function useResizeObserver(elementRef, onObserve) {\n    const stableOnObserve = useStableCallback(onObserve);\n    // This effect provides a synchronous update required to prevent flakiness when initial state and first observed state are different.\n    // Can potentially conflict with React concurrent mode: https://17.reactjs.org/docs/concurrent-mode-intro.html.\n    // TODO: A possible solution would be to make consumers not render any content until the first (asynchronous) observation is available.\n    useLayoutEffect(() => {\n        const element = typeof elementRef === 'function' ? elementRef() : elementRef === null || elementRef === void 0 ? void 0 : elementRef.current;\n        if (element) {\n            onObserve(convertResizeObserverEntry(new ResizeObserverEntry(element)));\n        }\n    }, \n    // This effect is only needed for the first render to provide a synchronous update.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []);\n    useEffect(() => {\n        const element = typeof elementRef === 'function' ? elementRef() : elementRef === null || elementRef === void 0 ? void 0 : elementRef.current;\n        if (element) {\n            let connected = true;\n            const observer = new ResizeObserver(entries => {\n                // Prevent observe notifications on already unmounted component.\n                if (connected) {\n                    stableOnObserve(convertResizeObserverEntry(entries[0]));\n                }\n            });\n            observer.observe(element);\n            return () => {\n                connected = false;\n                observer.disconnect();\n            };\n        }\n    }, [elementRef, stableOnObserve]);\n}\nfunction convertResizeObserverEntry(entry) {\n    return {\n        target: entry.target,\n        contentBoxWidth: entry.contentBoxSize[0].inlineSize,\n        contentBoxHeight: entry.contentBoxSize[0].blockSize,\n        borderBoxWidth: entry.borderBoxSize[0].inlineSize,\n        borderBoxHeight: entry.borderBoxSize[0].blockSize,\n    };\n}\n"],"mappings":"AAAA;AACA;AACA,SAASA,cAAc,EAAEC,mBAAmB,QAAQ,yBAAyB;AAC7E,SAASC,SAAS,EAAEC,eAAe,QAAQ,OAAO;AAClD,SAASC,iBAAiB,QAAQ,oBAAoB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,iBAAiBA,CAACC,UAAU,EAAEC,SAAS,EAAE;EACrD,MAAMC,eAAe,GAAGJ,iBAAiB,CAACG,SAAS,CAAC;EACpD;EACA;EACA;EACAJ,eAAe,CAAC,MAAM;IAClB,MAAMM,OAAO,GAAG,OAAOH,UAAU,KAAK,UAAU,GAAGA,UAAU,CAAC,CAAC,GAAGA,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACI,OAAO;IAC5I,IAAID,OAAO,EAAE;MACTF,SAAS,CAACI,0BAA0B,CAAC,IAAIV,mBAAmB,CAACQ,OAAO,CAAC,CAAC,CAAC;IAC3E;EACJ,CAAC;EACD;EACA;EACA,EAAE,CAAC;EACHP,SAAS,CAAC,MAAM;IACZ,MAAMO,OAAO,GAAG,OAAOH,UAAU,KAAK,UAAU,GAAGA,UAAU,CAAC,CAAC,GAAGA,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACI,OAAO;IAC5I,IAAID,OAAO,EAAE;MACT,IAAIG,SAAS,GAAG,IAAI;MACpB,MAAMC,QAAQ,GAAG,IAAIb,cAAc,CAACc,OAAO,IAAI;QAC3C;QACA,IAAIF,SAAS,EAAE;UACXJ,eAAe,CAACG,0BAA0B,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3D;MACJ,CAAC,CAAC;MACFD,QAAQ,CAACE,OAAO,CAACN,OAAO,CAAC;MACzB,OAAO,MAAM;QACTG,SAAS,GAAG,KAAK;QACjBC,QAAQ,CAACG,UAAU,CAAC,CAAC;MACzB,CAAC;IACL;EACJ,CAAC,EAAE,CAACV,UAAU,EAAEE,eAAe,CAAC,CAAC;AACrC;AACA,SAASG,0BAA0BA,CAACM,KAAK,EAAE;EACvC,OAAO;IACHC,MAAM,EAAED,KAAK,CAACC,MAAM;IACpBC,eAAe,EAAEF,KAAK,CAACG,cAAc,CAAC,CAAC,CAAC,CAACC,UAAU;IACnDC,gBAAgB,EAAEL,KAAK,CAACG,cAAc,CAAC,CAAC,CAAC,CAACG,SAAS;IACnDC,cAAc,EAAEP,KAAK,CAACQ,aAAa,CAAC,CAAC,CAAC,CAACJ,UAAU;IACjDK,eAAe,EAAET,KAAK,CAACQ,aAAa,CAAC,CAAC,CAAC,CAACF;EAC5C,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}