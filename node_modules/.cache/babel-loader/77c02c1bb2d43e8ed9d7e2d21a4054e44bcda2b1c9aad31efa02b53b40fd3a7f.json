{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport debounce from '../../debounce';\nimport { sortByPriority } from '../helpers/utils';\nexport class ActionButtonsController {\n  constructor() {\n    this.listeners = [];\n    this.actions = [];\n    this.scheduleUpdate = debounce(() => {\n      this.listeners.forEach(listener => listener(this.actions));\n    }, 0);\n    this.registerAction = action => {\n      this.actions.push(action);\n      this.actions = sortByPriority(this.actions);\n      this.scheduleUpdate();\n    };\n    this.clearRegisteredActions = () => {\n      this.actions = [];\n    };\n    this.onActionRegistered = listener => {\n      this.listeners.push(listener);\n      this.scheduleUpdate();\n      return () => {\n        this.listeners = this.listeners.filter(item => item !== listener);\n      };\n    };\n  }\n  installPublic(api = {}) {\n    var _a;\n    (_a = api.registerAction) !== null && _a !== void 0 ? _a : api.registerAction = this.registerAction;\n    return api;\n  }\n  installInternal(internalApi = {}) {\n    var _a, _b;\n    (_a = internalApi.clearRegisteredActions) !== null && _a !== void 0 ? _a : internalApi.clearRegisteredActions = this.clearRegisteredActions;\n    (_b = internalApi.onActionRegistered) !== null && _b !== void 0 ? _b : internalApi.onActionRegistered = this.onActionRegistered;\n    return internalApi;\n  }\n}","map":{"version":3,"names":["debounce","sortByPriority","ActionButtonsController","constructor","listeners","actions","scheduleUpdate","forEach","listener","registerAction","action","push","clearRegisteredActions","onActionRegistered","filter","item","installPublic","api","_a","installInternal","internalApi","_b"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/plugins/controllers/action-buttons.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport debounce from '../../debounce';\nimport { sortByPriority } from '../helpers/utils';\n\n// this code should not depend on React typings, because it is portable between major versions\ninterface RefShim<T> {\n  current: T | null;\n}\n\nexport interface ActionContext {\n  type: string;\n  headerRef: RefShim<HTMLElement>;\n  contentRef: RefShim<HTMLElement>;\n}\n\nexport interface ActionConfig {\n  id: string;\n  orderPriority?: number;\n  mountContent: (container: HTMLElement, context: ActionContext) => void;\n  unmountContent: (container: HTMLElement) => void;\n}\n\nexport type ActionRegistrationListener = (action: Array<ActionConfig>) => void;\n\nexport interface ActionsApiPublic {\n  registerAction(config: ActionConfig): void;\n}\n\nexport interface ActionsApiInternal {\n  clearRegisteredActions(): void;\n  onActionRegistered(listener: ActionRegistrationListener): () => void;\n}\n\nexport class ActionButtonsController {\n  private listeners: Array<ActionRegistrationListener> = [];\n  private actions: Array<ActionConfig> = [];\n\n  private scheduleUpdate = debounce(() => {\n    this.listeners.forEach(listener => listener(this.actions));\n  }, 0);\n\n  registerAction = (action: ActionConfig) => {\n    this.actions.push(action);\n    this.actions = sortByPriority(this.actions);\n    this.scheduleUpdate();\n  };\n\n  clearRegisteredActions = () => {\n    this.actions = [];\n  };\n\n  onActionRegistered = (listener: ActionRegistrationListener) => {\n    this.listeners.push(listener);\n    this.scheduleUpdate();\n    return () => {\n      this.listeners = this.listeners.filter(item => item !== listener);\n    };\n  };\n\n  installPublic(api: Partial<ActionsApiPublic> = {}): ActionsApiPublic {\n    api.registerAction ??= this.registerAction;\n    return api as ActionsApiPublic;\n  }\n\n  installInternal(internalApi: Partial<ActionsApiInternal> = {}): ActionsApiInternal {\n    internalApi.clearRegisteredActions ??= this.clearRegisteredActions;\n    internalApi.onActionRegistered ??= this.onActionRegistered;\n    return internalApi as ActionsApiInternal;\n  }\n}\n"],"mappings":"AAAA;AACA;AACA,OAAOA,QAAQ,MAAM,gBAAgB;AACrC,SAASC,cAAc,QAAQ,kBAAkB;AA+BjD,OAAM,MAAOC,uBAAuB;EAApCC,YAAA;IACU,KAAAC,SAAS,GAAsC,EAAE;IACjD,KAAAC,OAAO,GAAwB,EAAE;IAEjC,KAAAC,cAAc,GAAGN,QAAQ,CAAC,MAAK;MACrC,IAAI,CAACI,SAAS,CAACG,OAAO,CAACC,QAAQ,IAAIA,QAAQ,CAAC,IAAI,CAACH,OAAO,CAAC,CAAC;IAC5D,CAAC,EAAE,CAAC,CAAC;IAEL,KAAAI,cAAc,GAAIC,MAAoB,IAAI;MACxC,IAAI,CAACL,OAAO,CAACM,IAAI,CAACD,MAAM,CAAC;MACzB,IAAI,CAACL,OAAO,GAAGJ,cAAc,CAAC,IAAI,CAACI,OAAO,CAAC;MAC3C,IAAI,CAACC,cAAc,EAAE;IACvB,CAAC;IAED,KAAAM,sBAAsB,GAAG,MAAK;MAC5B,IAAI,CAACP,OAAO,GAAG,EAAE;IACnB,CAAC;IAED,KAAAQ,kBAAkB,GAAIL,QAAoC,IAAI;MAC5D,IAAI,CAACJ,SAAS,CAACO,IAAI,CAACH,QAAQ,CAAC;MAC7B,IAAI,CAACF,cAAc,EAAE;MACrB,OAAO,MAAK;QACV,IAAI,CAACF,SAAS,GAAG,IAAI,CAACA,SAAS,CAACU,MAAM,CAACC,IAAI,IAAIA,IAAI,KAAKP,QAAQ,CAAC;MACnE,CAAC;IACH,CAAC;EAYH;EAVEQ,aAAaA,CAACC,GAAA,GAAiC,EAAE;;IAC/C,CAAAC,EAAA,GAAAD,GAAG,CAACR,cAAc,cAAAS,EAAA,cAAAA,EAAA,GAAlBD,GAAG,CAACR,cAAc,GAAK,IAAI,CAACA,cAAc;IAC1C,OAAOQ,GAAuB;EAChC;EAEAE,eAAeA,CAACC,WAAA,GAA2C,EAAE;;IAC3D,CAAAF,EAAA,GAAAE,WAAW,CAACR,sBAAsB,cAAAM,EAAA,cAAAA,EAAA,GAAlCE,WAAW,CAACR,sBAAsB,GAAK,IAAI,CAACA,sBAAsB;IAClE,CAAAS,EAAA,GAAAD,WAAW,CAACP,kBAAkB,cAAAQ,EAAA,cAAAA,EAAA,GAA9BD,WAAW,CAACP,kBAAkB,GAAK,IAAI,CAACA,kBAAkB;IAC1D,OAAOO,WAAiC;EAC1C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}