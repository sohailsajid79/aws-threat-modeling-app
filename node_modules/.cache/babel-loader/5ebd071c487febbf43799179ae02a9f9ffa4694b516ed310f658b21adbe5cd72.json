{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useState } from 'react';\nimport clsx from 'clsx';\nimport InternalIcon from '../../icon/internal';\nimport styles from './styles.css.js';\nexport function useDropzoneVisible(multiple) {\n  const [isDropzoneVisible, setDropzoneVisible] = useState(false);\n  // Registering global drag events listeners.\n  useEffect(() => {\n    // The timer helps avoiding dropzone blinking.\n    let dragTimer = null;\n    // The file-upload dropzone is shown when the user drags files over to the browser.\n    const onDocumentDragOver = event => {\n      var _a, _b;\n      event.preventDefault();\n      let files = 0;\n      for (let item = 0; item < (((_a = event.dataTransfer) === null || _a === void 0 ? void 0 : _a.types.length) || 0); item++) {\n        if (((_b = event.dataTransfer) === null || _b === void 0 ? void 0 : _b.types[item]) === 'Files') {\n          files++;\n        }\n      }\n      if (files > 0 && (multiple || files === 1)) {\n        setDropzoneVisible(true);\n        dragTimer && clearTimeout(dragTimer);\n      }\n    };\n    // When the files are no longer dragged over the browser the state must be reset.\n    const onDocumentDragLeave = event => {\n      event.preventDefault();\n      dragTimer = setTimeout(() => setDropzoneVisible(false), 25);\n    };\n    // If the files were dropped the state must be reset.\n    const onDocumentDrop = event => {\n      event.preventDefault();\n      dragTimer = setTimeout(() => setDropzoneVisible(false), 25);\n    };\n    document.addEventListener('dragover', onDocumentDragOver, false);\n    document.addEventListener('dragleave', onDocumentDragLeave, false);\n    document.addEventListener('drop', onDocumentDrop, false);\n    return () => {\n      dragTimer && clearTimeout(dragTimer);\n      document.removeEventListener('dragover', onDocumentDragOver);\n      document.removeEventListener('dragleave', onDocumentDragLeave);\n      document.removeEventListener('drop', onDocumentDrop);\n    };\n  }, [multiple]);\n  return isDropzoneVisible;\n}\nexport function Dropzone({\n  onChange,\n  children\n}) {\n  const [isDropzoneHovered, setDropzoneHovered] = useState(false);\n  const onDragOver = event => {\n    event.preventDefault();\n    if (event.dataTransfer) {\n      setDropzoneHovered(true);\n      event.dataTransfer.dropEffect = 'copy';\n    }\n  };\n  const onDragLeave = event => {\n    event.preventDefault();\n    setDropzoneHovered(false);\n    if (event.dataTransfer) {\n      event.dataTransfer.dropEffect = 'none';\n    }\n  };\n  const onDrop = event => {\n    event.preventDefault();\n    setDropzoneHovered(false);\n    onChange(Array.from(event.dataTransfer.files));\n  };\n  return React.createElement(\"div\", {\n    className: clsx(styles.dropzone, isDropzoneHovered && styles['dropzone-hovered']),\n    onDragOver: onDragOver,\n    onDragLeave: onDragLeave,\n    onDrop: onDrop\n  }, React.createElement(InternalIcon, {\n    name: \"upload\"\n  }), React.createElement(\"span\", null, children));\n}","map":{"version":3,"names":["React","useEffect","useState","clsx","InternalIcon","styles","useDropzoneVisible","multiple","isDropzoneVisible","setDropzoneVisible","dragTimer","onDocumentDragOver","event","preventDefault","files","item","_a","dataTransfer","types","length","_b","clearTimeout","onDocumentDragLeave","setTimeout","onDocumentDrop","document","addEventListener","removeEventListener","Dropzone","onChange","children","isDropzoneHovered","setDropzoneHovered","onDragOver","dropEffect","onDragLeave","onDrop","Array","from","createElement","className","dropzone","name"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/file-upload/dropzone/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useEffect, useState } from 'react';\nimport clsx from 'clsx';\n\nimport InternalIcon from '../../icon/internal';\n\nimport styles from './styles.css.js';\n\ninterface DropzoneProps {\n  onChange: (files: File[]) => void;\n  children: React.ReactNode;\n}\n\nexport function useDropzoneVisible(multiple: boolean) {\n  const [isDropzoneVisible, setDropzoneVisible] = useState(false);\n\n  // Registering global drag events listeners.\n  useEffect(() => {\n    // The timer helps avoiding dropzone blinking.\n    let dragTimer: null | ReturnType<typeof setTimeout> = null;\n\n    // The file-upload dropzone is shown when the user drags files over to the browser.\n    const onDocumentDragOver = (event: DragEvent) => {\n      event.preventDefault();\n\n      let files = 0;\n      for (let item = 0; item < (event.dataTransfer?.types.length || 0); item++) {\n        if (event.dataTransfer?.types[item] === 'Files') {\n          files++;\n        }\n      }\n\n      if (files > 0 && (multiple || files === 1)) {\n        setDropzoneVisible(true);\n        dragTimer && clearTimeout(dragTimer);\n      }\n    };\n\n    // When the files are no longer dragged over the browser the state must be reset.\n    const onDocumentDragLeave = (event: DragEvent) => {\n      event.preventDefault();\n\n      dragTimer = setTimeout(() => setDropzoneVisible(false), 25);\n    };\n\n    // If the files were dropped the state must be reset.\n    const onDocumentDrop = (event: DragEvent) => {\n      event.preventDefault();\n\n      dragTimer = setTimeout(() => setDropzoneVisible(false), 25);\n    };\n\n    document.addEventListener('dragover', onDocumentDragOver, false);\n    document.addEventListener('dragleave', onDocumentDragLeave, false);\n    document.addEventListener('drop', onDocumentDrop, false);\n\n    return () => {\n      dragTimer && clearTimeout(dragTimer);\n      document.removeEventListener('dragover', onDocumentDragOver);\n      document.removeEventListener('dragleave', onDocumentDragLeave);\n      document.removeEventListener('drop', onDocumentDrop);\n    };\n  }, [multiple]);\n\n  return isDropzoneVisible;\n}\n\nexport function Dropzone({ onChange, children }: DropzoneProps) {\n  const [isDropzoneHovered, setDropzoneHovered] = useState(false);\n\n  const onDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n\n    if (event.dataTransfer) {\n      setDropzoneHovered(true);\n      event.dataTransfer.dropEffect = 'copy';\n    }\n  };\n\n  const onDragLeave = (event: React.DragEvent) => {\n    event.preventDefault();\n    setDropzoneHovered(false);\n\n    if (event.dataTransfer) {\n      event.dataTransfer.dropEffect = 'none';\n    }\n  };\n\n  const onDrop = (event: React.DragEvent) => {\n    event.preventDefault();\n    setDropzoneHovered(false);\n\n    onChange(Array.from(event.dataTransfer.files));\n  };\n\n  return (\n    <div\n      className={clsx(styles.dropzone, isDropzoneHovered && styles['dropzone-hovered'])}\n      onDragOver={onDragOver}\n      onDragLeave={onDragLeave}\n      onDrop={onDrop}\n    >\n      <InternalIcon name=\"upload\" />\n      <span>{children}</span>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}