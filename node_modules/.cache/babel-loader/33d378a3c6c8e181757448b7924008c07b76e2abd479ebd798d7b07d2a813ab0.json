{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\nexport function useProgressiveLoadingProps({\n  items,\n  getLoadingStatus,\n  getExpandableItemProps\n}) {\n  // The rows are either data or loader.\n  // A loader row can be added to the root level (level=0) in which case it has no associated item (item=null).\n  // Loader rows can be added to expandable rows (level>0) in which case they have an associated item (item!=null).\n  // The \"from\" property of the loader row is the index of the first item to be loaded starting 0. It is used to generate unique React keys.\n  const allRows = new Array();\n  const getItemParent = item => getExpandableItemProps(item).parent;\n  const getItemChildren = item => getExpandableItemProps(item).children;\n  const getItemLevel = item => item ? getExpandableItemProps(item).level : 0;\n  const isItemExpanded = item => getExpandableItemProps(item).isExpanded;\n  for (let i = 0; i < items.length; i++) {\n    allRows.push({\n      type: 'data',\n      item: items[i]\n    });\n    // Insert empty expandable item loader\n    if (isItemExpanded(items[i]) && getItemChildren(items[i]).length === 0) {\n      const status = getLoadingStatus === null || getLoadingStatus === void 0 ? void 0 : getLoadingStatus(items[i]);\n      if (status && (status === 'loading' || status === 'error')) {\n        allRows.push({\n          type: 'loader',\n          item: items[i],\n          level: getItemLevel(items[i]),\n          status,\n          from: 0\n        });\n      } else {\n        warnOnce('Table', 'Expanded items without children must have \"loading\" or \"error\" loading status.');\n      }\n    }\n    // Insert expandable items loaders\n    let currentParent = getItemParent(items[i]);\n    let levelsDiff = getItemLevel(items[i]) - getItemLevel(items[i + 1]);\n    while (currentParent && levelsDiff > 0) {\n      const status = getLoadingStatus === null || getLoadingStatus === void 0 ? void 0 : getLoadingStatus(currentParent);\n      if (status && status !== 'finished') {\n        const level = currentParent ? getItemLevel(currentParent) : 0;\n        const children = currentParent ? getItemChildren(currentParent) : [];\n        allRows.push({\n          type: 'loader',\n          item: currentParent,\n          level,\n          status,\n          from: children.length\n        });\n      }\n      currentParent = currentParent && getItemParent(currentParent);\n      levelsDiff--;\n    }\n    // Insert root loader\n    const rootLoadingStatus = getLoadingStatus === null || getLoadingStatus === void 0 ? void 0 : getLoadingStatus(null);\n    if (i === items.length - 1 && rootLoadingStatus && rootLoadingStatus !== 'finished') {\n      allRows.push({\n        type: 'loader',\n        item: null,\n        level: 0,\n        status: rootLoadingStatus,\n        from: items.length\n      });\n    }\n  }\n  return {\n    allRows\n  };\n}","map":{"version":3,"names":["warnOnce","useProgressiveLoadingProps","items","getLoadingStatus","getExpandableItemProps","allRows","Array","getItemParent","item","parent","getItemChildren","children","getItemLevel","level","isItemExpanded","isExpanded","i","length","push","type","status","from","currentParent","levelsDiff","rootLoadingStatus"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/table/progressive-loading/progressive-loading-utils.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\n\nimport { TableProps, TableRow } from '../interfaces';\n\nexport function useProgressiveLoadingProps<T>({\n  items,\n  getLoadingStatus,\n  getExpandableItemProps,\n}: {\n  items: readonly T[];\n  getLoadingStatus?: (item: null | T) => TableProps.LoadingStatus;\n  getExpandableItemProps: (item: T) => { level: number; parent: null | T; isExpanded: boolean; children: readonly T[] };\n}) {\n  // The rows are either data or loader.\n  // A loader row can be added to the root level (level=0) in which case it has no associated item (item=null).\n  // Loader rows can be added to expandable rows (level>0) in which case they have an associated item (item!=null).\n  // The \"from\" property of the loader row is the index of the first item to be loaded starting 0. It is used to generate unique React keys.\n  const allRows = new Array<TableRow<T>>();\n\n  const getItemParent = (item: T) => getExpandableItemProps(item).parent;\n  const getItemChildren = (item: T) => getExpandableItemProps(item).children;\n  const getItemLevel = (item?: T) => (item ? getExpandableItemProps(item).level : 0);\n  const isItemExpanded = (item: T) => getExpandableItemProps(item).isExpanded;\n\n  for (let i = 0; i < items.length; i++) {\n    allRows.push({ type: 'data', item: items[i] });\n\n    // Insert empty expandable item loader\n    if (isItemExpanded(items[i]) && getItemChildren(items[i]).length === 0) {\n      const status = getLoadingStatus?.(items[i]);\n      if (status && (status === 'loading' || status === 'error')) {\n        allRows.push({ type: 'loader', item: items[i], level: getItemLevel(items[i]), status, from: 0 });\n      } else {\n        warnOnce('Table', 'Expanded items without children must have \"loading\" or \"error\" loading status.');\n      }\n    }\n\n    // Insert expandable items loaders\n    let currentParent = getItemParent(items[i]);\n    let levelsDiff = getItemLevel(items[i]) - getItemLevel(items[i + 1]);\n    while (currentParent && levelsDiff > 0) {\n      const status = getLoadingStatus?.(currentParent);\n      if (status && status !== 'finished') {\n        const level = currentParent ? getItemLevel(currentParent) : 0;\n        const children = currentParent ? getItemChildren(currentParent) : [];\n        allRows.push({ type: 'loader', item: currentParent, level, status, from: children.length });\n      }\n      currentParent = currentParent && getItemParent(currentParent);\n      levelsDiff--;\n    }\n\n    // Insert root loader\n    const rootLoadingStatus = getLoadingStatus?.(null);\n    if (i === items.length - 1 && rootLoadingStatus && rootLoadingStatus !== 'finished') {\n      allRows.push({ type: 'loader', item: null, level: 0, status: rootLoadingStatus, from: items.length });\n    }\n  }\n\n  return { allRows };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}