{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __awaiter } from \"tslib\";\nimport { useCallback, useState } from 'react';\nimport { fireCancelableEvent } from '../internal/events';\nexport function useCellEditing({\n  onCancel,\n  onSubmit\n}) {\n  const [currentEditCell, setCurrentEditCell] = useState(null);\n  const [lastSuccessfulEditCell, setLastSuccessfulEditCell] = useState(null);\n  const [currentEditLoading, setCurrentEditLoading] = useState(false);\n  const startEdit = cellId => {\n    setLastSuccessfulEditCell(null);\n    setCurrentEditCell(cellId);\n  };\n  const cancelEdit = useCallback(() => setCurrentEditCell(null), []);\n  const completeEdit = (cellId, editCancelled) => {\n    const eventCancelled = fireCancelableEvent(onCancel, {});\n    if (!eventCancelled) {\n      setCurrentEditCell(null);\n      if (!editCancelled) {\n        setLastSuccessfulEditCell(cellId);\n      }\n    }\n  };\n  const checkEditing = ({\n    rowIndex,\n    colIndex\n  }) => rowIndex === (currentEditCell === null || currentEditCell === void 0 ? void 0 : currentEditCell.rowIndex) && colIndex === currentEditCell.colIndex;\n  const checkLastSuccessfulEdit = ({\n    rowIndex,\n    colIndex\n  }) => rowIndex === (lastSuccessfulEditCell === null || lastSuccessfulEditCell === void 0 ? void 0 : lastSuccessfulEditCell.rowIndex) && colIndex === lastSuccessfulEditCell.colIndex;\n  const submitEdit = onSubmit ? (...args) => __awaiter(this, void 0, void 0, function* () {\n    setCurrentEditLoading(true);\n    try {\n      yield onSubmit(...args);\n    } finally {\n      setCurrentEditLoading(false);\n    }\n  }) : undefined;\n  return {\n    isLoading: currentEditLoading,\n    startEdit,\n    cancelEdit,\n    checkEditing,\n    checkLastSuccessfulEdit,\n    completeEdit,\n    submitEdit\n  };\n}","map":{"version":3,"names":["useCallback","useState","fireCancelableEvent","useCellEditing","onCancel","onSubmit","currentEditCell","setCurrentEditCell","lastSuccessfulEditCell","setLastSuccessfulEditCell","currentEditLoading","setCurrentEditLoading","startEdit","cellId","cancelEdit","completeEdit","editCancelled","eventCancelled","checkEditing","rowIndex","colIndex","checkLastSuccessfulEdit","submitEdit","args","__awaiter","undefined","isLoading"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/table/use-cell-editing.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useState } from 'react';\n\nimport { CancelableEventHandler, fireCancelableEvent } from '../internal/events';\nimport { TableProps } from './interfaces';\n\nexport interface CellId {\n  rowIndex: number;\n  colIndex: number;\n}\n\ninterface CellEditingProps {\n  onCancel?: CancelableEventHandler;\n  onSubmit?: TableProps.SubmitEditFunction<any>;\n}\n\nexport function useCellEditing({ onCancel, onSubmit }: CellEditingProps) {\n  const [currentEditCell, setCurrentEditCell] = useState<null | CellId>(null);\n  const [lastSuccessfulEditCell, setLastSuccessfulEditCell] = useState<null | CellId>(null);\n  const [currentEditLoading, setCurrentEditLoading] = useState(false);\n\n  const startEdit = (cellId: CellId) => {\n    setLastSuccessfulEditCell(null);\n    setCurrentEditCell(cellId);\n  };\n\n  const cancelEdit = useCallback(() => setCurrentEditCell(null), []);\n\n  const completeEdit = (cellId: CellId, editCancelled: boolean) => {\n    const eventCancelled = fireCancelableEvent(onCancel, {});\n    if (!eventCancelled) {\n      setCurrentEditCell(null);\n      if (!editCancelled) {\n        setLastSuccessfulEditCell(cellId);\n      }\n    }\n  };\n\n  const checkEditing = ({ rowIndex, colIndex }: CellId) =>\n    rowIndex === currentEditCell?.rowIndex && colIndex === currentEditCell.colIndex;\n\n  const checkLastSuccessfulEdit = ({ rowIndex, colIndex }: CellId) =>\n    rowIndex === lastSuccessfulEditCell?.rowIndex && colIndex === lastSuccessfulEditCell.colIndex;\n\n  const submitEdit = onSubmit\n    ? async (...args: Parameters<typeof onSubmit>) => {\n        setCurrentEditLoading(true);\n        try {\n          await onSubmit(...args);\n        } finally {\n          setCurrentEditLoading(false);\n        }\n      }\n    : undefined;\n\n  return {\n    isLoading: currentEditLoading,\n    startEdit,\n    cancelEdit,\n    checkEditing,\n    checkLastSuccessfulEdit,\n    completeEdit,\n    submitEdit,\n  };\n}\n"],"mappings":"AAAA;AACA;;AAEA,SAASA,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AAE7C,SAAiCC,mBAAmB,QAAQ,oBAAoB;AAahF,OAAM,SAAUC,cAAcA,CAAC;EAAEC,QAAQ;EAAEC;AAAQ,CAAoB;EACrE,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGN,QAAQ,CAAgB,IAAI,CAAC;EAC3E,MAAM,CAACO,sBAAsB,EAAEC,yBAAyB,CAAC,GAAGR,QAAQ,CAAgB,IAAI,CAAC;EACzF,MAAM,CAACS,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAEnE,MAAMW,SAAS,GAAIC,MAAc,IAAI;IACnCJ,yBAAyB,CAAC,IAAI,CAAC;IAC/BF,kBAAkB,CAACM,MAAM,CAAC;EAC5B,CAAC;EAED,MAAMC,UAAU,GAAGd,WAAW,CAAC,MAAMO,kBAAkB,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;EAElE,MAAMQ,YAAY,GAAGA,CAACF,MAAc,EAAEG,aAAsB,KAAI;IAC9D,MAAMC,cAAc,GAAGf,mBAAmB,CAACE,QAAQ,EAAE,EAAE,CAAC;IACxD,IAAI,CAACa,cAAc,EAAE;MACnBV,kBAAkB,CAAC,IAAI,CAAC;MACxB,IAAI,CAACS,aAAa,EAAE;QAClBP,yBAAyB,CAACI,MAAM,CAAC;;;EAGvC,CAAC;EAED,MAAMK,YAAY,GAAGA,CAAC;IAAEC,QAAQ;IAAEC;EAAQ,CAAU,KAClDD,QAAQ,MAAKb,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEa,QAAQ,KAAIC,QAAQ,KAAKd,eAAe,CAACc,QAAQ;EAEjF,MAAMC,uBAAuB,GAAGA,CAAC;IAAEF,QAAQ;IAAEC;EAAQ,CAAU,KAC7DD,QAAQ,MAAKX,sBAAsB,aAAtBA,sBAAsB,uBAAtBA,sBAAsB,CAAEW,QAAQ,KAAIC,QAAQ,KAAKZ,sBAAsB,CAACY,QAAQ;EAE/F,MAAME,UAAU,GAAGjB,QAAQ,GACvB,CAAO,GAAGkB,IAAiC,KAAIC,SAAA;IAC7Cb,qBAAqB,CAAC,IAAI,CAAC;IAC3B,IAAI;MACF,MAAMN,QAAQ,CAAC,GAAGkB,IAAI,CAAC;KACxB,SAAS;MACRZ,qBAAqB,CAAC,KAAK,CAAC;;EAEhC,CAAC,IACDc,SAAS;EAEb,OAAO;IACLC,SAAS,EAAEhB,kBAAkB;IAC7BE,SAAS;IACTE,UAAU;IACVI,YAAY;IACZG,uBAAuB;IACvBN,YAAY;IACZO;GACD;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}