{"ast":null,"code":"var _BreadcrumbsController_appLayoutUpdateCallback, _BreadcrumbsController_breadcrumbInstances, _BreadcrumbsController_breadcrumbRegistrations, _BreadcrumbsController_notifyAppLayout, _BreadcrumbsController_notifyBreadcrumbs;\nimport { __classPrivateFieldGet, __classPrivateFieldSet } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport debounce from '../../debounce';\nexport class BreadcrumbsController {\n  constructor() {\n    _BreadcrumbsController_appLayoutUpdateCallback.set(this, null);\n    _BreadcrumbsController_breadcrumbInstances.set(this, []);\n    _BreadcrumbsController_breadcrumbRegistrations.set(this, []);\n    _BreadcrumbsController_notifyAppLayout.set(this, debounce(() => {\n      var _a;\n      if (!__classPrivateFieldGet(this, _BreadcrumbsController_appLayoutUpdateCallback, \"f\")) {\n        return;\n      }\n      const latestBreadcrumb = __classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbInstances, \"f\")[__classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbInstances, \"f\").length - 1];\n      __classPrivateFieldGet(this, _BreadcrumbsController_appLayoutUpdateCallback, \"f\").call(this, (_a = latestBreadcrumb === null || latestBreadcrumb === void 0 ? void 0 : latestBreadcrumb.props) !== null && _a !== void 0 ? _a : null);\n    }, 0));\n    _BreadcrumbsController_notifyBreadcrumbs.set(this, debounce(() => {\n      if (!__classPrivateFieldGet(this, _BreadcrumbsController_appLayoutUpdateCallback, \"f\")) {\n        return;\n      }\n      __classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbRegistrations, \"f\").forEach(listener => listener());\n    }, 0));\n    this.registerAppLayout = changeCallback => {\n      if (__classPrivateFieldGet(this, _BreadcrumbsController_appLayoutUpdateCallback, \"f\")) {\n        return;\n      }\n      __classPrivateFieldSet(this, _BreadcrumbsController_appLayoutUpdateCallback, changeCallback, \"f\");\n      __classPrivateFieldGet(this, _BreadcrumbsController_notifyBreadcrumbs, \"f\").call(this);\n      return () => {\n        __classPrivateFieldSet(this, _BreadcrumbsController_appLayoutUpdateCallback, null, \"f\");\n      };\n    };\n    this.registerBreadcrumbs = (props, onRegistered) => {\n      const instance = {\n        props: props\n      };\n      __classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbInstances, \"f\").push(instance);\n      __classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbRegistrations, \"f\").push(onRegistered);\n      __classPrivateFieldGet(this, _BreadcrumbsController_notifyBreadcrumbs, \"f\").call(this);\n      __classPrivateFieldGet(this, _BreadcrumbsController_notifyAppLayout, \"f\").call(this);\n      return {\n        update: props => {\n          instance.props = props;\n          __classPrivateFieldGet(this, _BreadcrumbsController_notifyAppLayout, \"f\").call(this);\n        },\n        cleanup: () => {\n          __classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbInstances, \"f\").splice(__classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbInstances, \"f\").indexOf(instance), 1);\n          __classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbRegistrations, \"f\").splice(__classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbRegistrations, \"f\").indexOf(onRegistered), 1);\n          __classPrivateFieldGet(this, _BreadcrumbsController_notifyAppLayout, \"f\").call(this);\n        }\n      };\n    };\n    this.getStateForTesting = () => {\n      return {\n        appLayoutUpdateCallback: __classPrivateFieldGet(this, _BreadcrumbsController_appLayoutUpdateCallback, \"f\"),\n        breadcrumbInstances: __classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbInstances, \"f\"),\n        breadcrumbRegistrations: __classPrivateFieldGet(this, _BreadcrumbsController_breadcrumbRegistrations, \"f\")\n      };\n    };\n  }\n  installInternal(internalApi = {}) {\n    var _a, _b, _c;\n    (_a = internalApi.registerBreadcrumbs) !== null && _a !== void 0 ? _a : internalApi.registerBreadcrumbs = this.registerBreadcrumbs;\n    (_b = internalApi.registerAppLayout) !== null && _b !== void 0 ? _b : internalApi.registerAppLayout = this.registerAppLayout;\n    (_c = internalApi.getStateForTesting) !== null && _c !== void 0 ? _c : internalApi.getStateForTesting = this.getStateForTesting;\n    return internalApi;\n  }\n}\n_BreadcrumbsController_appLayoutUpdateCallback = new WeakMap(), _BreadcrumbsController_breadcrumbInstances = new WeakMap(), _BreadcrumbsController_breadcrumbRegistrations = new WeakMap(), _BreadcrumbsController_notifyAppLayout = new WeakMap(), _BreadcrumbsController_notifyBreadcrumbs = new WeakMap();","map":{"version":3,"names":["debounce","BreadcrumbsController","constructor","_BreadcrumbsController_appLayoutUpdateCallback","set","_BreadcrumbsController_breadcrumbInstances","_BreadcrumbsController_breadcrumbRegistrations","_BreadcrumbsController_notifyAppLayout","__classPrivateFieldGet","latestBreadcrumb","length","call","_a","props","_BreadcrumbsController_notifyBreadcrumbs","forEach","listener","registerAppLayout","changeCallback","__classPrivateFieldSet","registerBreadcrumbs","onRegistered","instance","push","update","cleanup","splice","indexOf","getStateForTesting","appLayoutUpdateCallback","breadcrumbInstances","breadcrumbRegistrations","installInternal","internalApi","_b","_c"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/plugins/controllers/breadcrumbs.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport debounce from '../../debounce';\n\ntype ChangeCallback<T> = (props: T | null) => void;\n\nexport interface BreadcrumbsGlobalRegistration<T> {\n  update(props: T): void;\n  cleanup(): void;\n}\n\nexport interface BreadcrumbsApiInternal<T> {\n  registerAppLayout: (changeCallback: ChangeCallback<T>) => (() => void) | void;\n  registerBreadcrumbs: (props: T, onRegistered: () => void) => BreadcrumbsGlobalRegistration<T>;\n  getStateForTesting: () => {\n    appLayoutUpdateCallback: ChangeCallback<T> | null;\n    breadcrumbInstances: Array<{ props: T }>;\n    breadcrumbRegistrations: Array<() => void>;\n  };\n}\n\nexport class BreadcrumbsController<T> {\n  #appLayoutUpdateCallback: ChangeCallback<T> | null = null;\n  #breadcrumbInstances: Array<{ props: T }> = [];\n  #breadcrumbRegistrations: Array<() => void> = [];\n\n  #notifyAppLayout = debounce(() => {\n    if (!this.#appLayoutUpdateCallback) {\n      return;\n    }\n    const latestBreadcrumb = this.#breadcrumbInstances[this.#breadcrumbInstances.length - 1];\n    this.#appLayoutUpdateCallback(latestBreadcrumb?.props ?? null);\n  }, 0);\n\n  #notifyBreadcrumbs = debounce(() => {\n    if (!this.#appLayoutUpdateCallback) {\n      return;\n    }\n    this.#breadcrumbRegistrations.forEach(listener => listener());\n  }, 0);\n\n  registerAppLayout = (changeCallback: ChangeCallback<T>) => {\n    if (this.#appLayoutUpdateCallback) {\n      return;\n    }\n    this.#appLayoutUpdateCallback = changeCallback;\n    this.#notifyBreadcrumbs();\n    return () => {\n      this.#appLayoutUpdateCallback = null;\n    };\n  };\n\n  registerBreadcrumbs = (props: T, onRegistered: () => void): BreadcrumbsGlobalRegistration<T> => {\n    const instance = { props: props };\n    this.#breadcrumbInstances.push(instance);\n    this.#breadcrumbRegistrations.push(onRegistered);\n    this.#notifyBreadcrumbs();\n    this.#notifyAppLayout();\n    return {\n      update: props => {\n        instance.props = props;\n        this.#notifyAppLayout();\n      },\n      cleanup: () => {\n        this.#breadcrumbInstances.splice(this.#breadcrumbInstances.indexOf(instance), 1);\n        this.#breadcrumbRegistrations.splice(this.#breadcrumbRegistrations.indexOf(onRegistered), 1);\n        this.#notifyAppLayout();\n      },\n    };\n  };\n\n  getStateForTesting = () => {\n    return {\n      appLayoutUpdateCallback: this.#appLayoutUpdateCallback,\n      breadcrumbInstances: this.#breadcrumbInstances,\n      breadcrumbRegistrations: this.#breadcrumbRegistrations,\n    };\n  };\n\n  installInternal(internalApi: Partial<BreadcrumbsApiInternal<T>> = {}): BreadcrumbsApiInternal<T> {\n    internalApi.registerBreadcrumbs ??= this.registerBreadcrumbs;\n    internalApi.registerAppLayout ??= this.registerAppLayout;\n    internalApi.getStateForTesting ??= this.getStateForTesting;\n\n    return internalApi as BreadcrumbsApiInternal<T>;\n  }\n}\n"],"mappings":";;AAAA;AACA;AACA,OAAOA,QAAQ,MAAM,gBAAgB;AAmBrC,OAAM,MAAOC,qBAAqB;EAAlCC,YAAA;IACEC,8CAAA,CAAAC,GAAA,OAAqD,IAAI;IACzDC,0CAAA,CAAAD,GAAA,OAA4C,EAAE;IAC9CE,8CAAA,CAAAF,GAAA,OAA8C,EAAE;IAEhDG,sCAAA,CAAAH,GAAA,OAAmBJ,QAAQ,CAAC,MAAK;;MAC/B,IAAI,CAACQ,sBAAA,KAAI,EAAAL,8CAAA,MAAyB,EAAE;QAClC;;MAEF,MAAMM,gBAAgB,GAAGD,sBAAA,KAAI,EAAAH,0CAAA,MAAqB,CAACG,sBAAA,KAAI,EAAAH,0CAAA,MAAqB,CAACK,MAAM,GAAG,CAAC,CAAC;MACxFF,sBAAA,KAAI,EAAAL,8CAAA,MAAyB,CAAAQ,IAAA,CAA7B,IAAI,EAA0B,CAAAC,EAAA,GAAAH,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEI,KAAK,cAAAD,EAAA,cAAAA,EAAA,GAAI,IAAI,CAAC;IAChE,CAAC,EAAE,CAAC,CAAC;IAELE,wCAAA,CAAAV,GAAA,OAAqBJ,QAAQ,CAAC,MAAK;MACjC,IAAI,CAACQ,sBAAA,KAAI,EAAAL,8CAAA,MAAyB,EAAE;QAClC;;MAEFK,sBAAA,KAAI,EAAAF,8CAAA,MAAyB,CAACS,OAAO,CAACC,QAAQ,IAAIA,QAAQ,EAAE,CAAC;IAC/D,CAAC,EAAE,CAAC,CAAC;IAEL,KAAAC,iBAAiB,GAAIC,cAAiC,IAAI;MACxD,IAAIV,sBAAA,KAAI,EAAAL,8CAAA,MAAyB,EAAE;QACjC;;MAEFgB,sBAAA,KAAI,EAAAhB,8CAAA,EAA4Be,cAAc;MAC9CV,sBAAA,KAAI,EAAAM,wCAAA,MAAmB,CAAAH,IAAA,CAAvB,IAAI,CAAqB;MACzB,OAAO,MAAK;QACVQ,sBAAA,KAAI,EAAAhB,8CAAA,EAA4B,IAAI;MACtC,CAAC;IACH,CAAC;IAED,KAAAiB,mBAAmB,GAAG,CAACP,KAAQ,EAAEQ,YAAwB,KAAsC;MAC7F,MAAMC,QAAQ,GAAG;QAAET,KAAK,EAAEA;MAAK,CAAE;MACjCL,sBAAA,KAAI,EAAAH,0CAAA,MAAqB,CAACkB,IAAI,CAACD,QAAQ,CAAC;MACxCd,sBAAA,KAAI,EAAAF,8CAAA,MAAyB,CAACiB,IAAI,CAACF,YAAY,CAAC;MAChDb,sBAAA,KAAI,EAAAM,wCAAA,MAAmB,CAAAH,IAAA,CAAvB,IAAI,CAAqB;MACzBH,sBAAA,KAAI,EAAAD,sCAAA,MAAiB,CAAAI,IAAA,CAArB,IAAI,CAAmB;MACvB,OAAO;QACLa,MAAM,EAAEX,KAAK,IAAG;UACdS,QAAQ,CAACT,KAAK,GAAGA,KAAK;UACtBL,sBAAA,KAAI,EAAAD,sCAAA,MAAiB,CAAAI,IAAA,CAArB,IAAI,CAAmB;QACzB,CAAC;QACDc,OAAO,EAAEA,CAAA,KAAK;UACZjB,sBAAA,KAAI,EAAAH,0CAAA,MAAqB,CAACqB,MAAM,CAAClB,sBAAA,KAAI,EAAAH,0CAAA,MAAqB,CAACsB,OAAO,CAACL,QAAQ,CAAC,EAAE,CAAC,CAAC;UAChFd,sBAAA,KAAI,EAAAF,8CAAA,MAAyB,CAACoB,MAAM,CAAClB,sBAAA,KAAI,EAAAF,8CAAA,MAAyB,CAACqB,OAAO,CAACN,YAAY,CAAC,EAAE,CAAC,CAAC;UAC5Fb,sBAAA,KAAI,EAAAD,sCAAA,MAAiB,CAAAI,IAAA,CAArB,IAAI,CAAmB;QACzB;OACD;IACH,CAAC;IAED,KAAAiB,kBAAkB,GAAG,MAAK;MACxB,OAAO;QACLC,uBAAuB,EAAErB,sBAAA,KAAI,EAAAL,8CAAA,MAAyB;QACtD2B,mBAAmB,EAAEtB,sBAAA,KAAI,EAAAH,0CAAA,MAAqB;QAC9C0B,uBAAuB,EAAEvB,sBAAA,KAAI,EAAAF,8CAAA;OAC9B;IACH,CAAC;EASH;EAPE0B,eAAeA,CAACC,WAAA,GAAkD,EAAE;;IAClE,CAAArB,EAAA,GAAAqB,WAAW,CAACb,mBAAmB,cAAAR,EAAA,cAAAA,EAAA,GAA/BqB,WAAW,CAACb,mBAAmB,GAAK,IAAI,CAACA,mBAAmB;IAC5D,CAAAc,EAAA,GAAAD,WAAW,CAAChB,iBAAiB,cAAAiB,EAAA,cAAAA,EAAA,GAA7BD,WAAW,CAAChB,iBAAiB,GAAK,IAAI,CAACA,iBAAiB;IACxD,CAAAkB,EAAA,GAAAF,WAAW,CAACL,kBAAkB,cAAAO,EAAA,cAAAA,EAAA,GAA9BF,WAAW,CAACL,kBAAkB,GAAK,IAAI,CAACA,kBAAkB;IAE1D,OAAOK,WAAwC;EACjD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}