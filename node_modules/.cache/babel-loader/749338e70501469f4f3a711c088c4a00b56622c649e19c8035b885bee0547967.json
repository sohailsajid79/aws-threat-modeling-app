{"ast":null,"code":"const searchableFields = ['value', 'label', 'description', 'labelTag'];\nexport const matchesString = (value, searchText, strictMatching) => {\n  if (!value) {\n    return false;\n  }\n  const index = value.toLowerCase().indexOf(searchText);\n  return strictMatching ? index === 0 : index > -1;\n};\nconst matchesSingleOption = (dropdownOption, text, strictMatching) => {\n  const searchText = text.toLowerCase();\n  const option = dropdownOption.option;\n  const searchStrFields = attr => matchesString(option[attr], searchText, strictMatching);\n  const searchTagsFields = attr => {\n    var _a;\n    return (_a = option[attr]) === null || _a === void 0 ? void 0 : _a.some(value => matchesString(value, searchText, strictMatching));\n  };\n  const searchableTagFields = ['tags'];\n  if (!strictMatching) {\n    searchableTagFields.push('filteringTags');\n  }\n  return searchableFields.some(searchStrFields) || searchableTagFields.some(searchTagsFields);\n};\nexport const filterOptions = (options, searchText, strictMatching = false) => {\n  if (searchText === '') {\n    return options;\n  }\n  let currentGroup = null;\n  let parentMatched = false;\n  return options.reduce((acc, option) => {\n    if (option.type === 'parent') {\n      parentMatched = false;\n      currentGroup = option;\n      if (matchesSingleOption(option, searchText, strictMatching)) {\n        parentMatched = true;\n        acc.push(currentGroup);\n      }\n      return acc;\n    }\n    if (option.type !== 'child') {\n      currentGroup = null;\n      parentMatched = false;\n    }\n    if (parentMatched) {\n      acc.push(option);\n    } else if (matchesSingleOption(option, searchText, strictMatching)) {\n      if (currentGroup) {\n        acc.push(currentGroup);\n        currentGroup = null;\n      }\n      acc.push(option);\n    }\n    return acc;\n  }, []);\n};\nexport const isInteractive = option => !!option && !option.disabled && option.type !== 'parent';\nexport const isGroupInteractive = option => !!option && !option.disabled;\nexport const isGroup = option => !!option && 'options' in option;","map":{"version":3,"names":["searchableFields","matchesString","value","searchText","strictMatching","index","toLowerCase","indexOf","matchesSingleOption","dropdownOption","text","option","searchStrFields","attr","searchTagsFields","_a","some","searchableTagFields","push","filterOptions","options","currentGroup","parentMatched","reduce","acc","type","isInteractive","disabled","isGroupInteractive","isGroup"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/components/option/utils/filter-options.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { DropdownOption, OptionDefinition, OptionGroup } from '../interfaces';\n\ntype SearchableField = 'value' | 'label' | 'description' | 'labelTag';\ntype SearchableTagField = 'tags' | 'filteringTags';\n\nconst searchableFields: SearchableField[] = ['value', 'label', 'description', 'labelTag'];\n\nexport const matchesString = (value: string | undefined, searchText: string, strictMatching: boolean): boolean => {\n  if (!value) {\n    return false;\n  }\n  const index = value.toLowerCase().indexOf(searchText);\n  return strictMatching ? index === 0 : index > -1;\n};\n\nconst matchesSingleOption = (dropdownOption: DropdownOption, text: string, strictMatching: boolean): boolean => {\n  const searchText = text.toLowerCase();\n\n  const option: OptionDefinition = dropdownOption.option;\n  const searchStrFields = (attr: SearchableField) => matchesString(option[attr], searchText, strictMatching);\n  const searchTagsFields = (attr: SearchableTagField) =>\n    option[attr]?.some(value => matchesString(value, searchText, strictMatching));\n\n  const searchableTagFields: SearchableTagField[] = ['tags'];\n  if (!strictMatching) {\n    searchableTagFields.push('filteringTags');\n  }\n\n  return searchableFields.some(searchStrFields) || searchableTagFields.some(searchTagsFields);\n};\n\nexport const filterOptions = (\n  options: ReadonlyArray<DropdownOption>,\n  searchText: string,\n  strictMatching = false\n): ReadonlyArray<DropdownOption> => {\n  if (searchText === '') {\n    return options;\n  }\n\n  let currentGroup: DropdownOption | null = null;\n  let parentMatched = false;\n  return options.reduce<DropdownOption[]>((acc, option) => {\n    if (option.type === 'parent') {\n      parentMatched = false;\n      currentGroup = option;\n      if (matchesSingleOption(option, searchText, strictMatching)) {\n        parentMatched = true;\n        acc.push(currentGroup);\n      }\n      return acc;\n    }\n    if (option.type !== 'child') {\n      currentGroup = null;\n      parentMatched = false;\n    }\n    if (parentMatched) {\n      acc.push(option);\n    } else if (matchesSingleOption(option, searchText, strictMatching)) {\n      if (currentGroup) {\n        acc.push(currentGroup);\n        currentGroup = null;\n      }\n      acc.push(option);\n    }\n    return acc;\n  }, []);\n};\n\nexport const isInteractive = (option?: DropdownOption) => !!option && !option.disabled && option.type !== 'parent';\n\nexport const isGroupInteractive = (option?: DropdownOption) => !!option && !option.disabled;\n\nexport const isGroup = (option?: OptionDefinition | OptionGroup): option is OptionGroup =>\n  !!option && 'options' in option;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}