{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\nimport { InternalButton } from '../button/internal';\nimport { useInternalI18n } from '../i18n/context';\nimport { getAllFocusables } from '../internal/components/focus-lock/utils';\nimport Tooltip from '../internal/components/tooltip';\nimport { SingleTabStopNavigationProvider, useSingleTabStopNavigation } from '../internal/context/single-tab-stop-navigation-context';\nimport { hasModifierKeys, isPlainLeftClick } from '../internal/events';\nimport useHiddenDescription from '../internal/hooks/use-hidden-description';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { KeyCode } from '../internal/keycode';\nimport { circleIndex } from '../internal/utils/circle-index';\nimport handleKey from '../internal/utils/handle-key';\nimport { hasHorizontalOverflow, hasInlineEndOverflow, hasInlineStartOverflow, onPaginationClick, scrollIntoView } from './scroll-utils';\nimport analyticsSelectors from './analytics-metadata/styles.css.js';\nimport styles from './styles.css.js';\nimport testUtilStyles from './test-classes/styles.css.js';\nconst tabSelector = `.${styles['tabs-tab-link']}`;\nconst focusedTabSelector = `[role=\"tab\"].${styles['tabs-tab-focused']}`;\nconst focusableTabSelector = `.${styles['tabs-tab-focusable']}`;\nfunction dismissButton(_ref) {\n  let {\n    dismissLabel,\n    dismissDisabled,\n    onDismiss,\n    tabId\n  } = _ref;\n  return React.createElement(InternalButton, {\n    onClick: onDismiss,\n    variant: \"icon\",\n    iconName: \"close\",\n    formAction: \"none\",\n    ariaLabel: dismissLabel,\n    disabled: dismissDisabled,\n    className: clsx(testUtilStyles['tab-dismiss-button'], analyticsSelectors['tab-dismiss-button']),\n    \"data-testid\": `awsui-tab-dismiss-button-${tabId}`\n  });\n}\nexport function TabHeaderBar(_ref2) {\n  let {\n    onChange,\n    activeTabId,\n    tabs,\n    variant,\n    idNamespace,\n    ariaLabel,\n    ariaLabelledby,\n    i18nStrings\n  } = _ref2;\n  const headerBarRef = useRef(null);\n  const activeTabHeaderRef = useRef(null);\n  const inlineStartOverflowButton = useRef(null);\n  const i18n = useInternalI18n('tabs');\n  const isVisualRefresh = useVisualRefresh();\n  const containerObjectRef = useRef(null);\n  const [widthChange, containerMeasureRef] = useContainerQuery(rect => rect.contentBoxWidth);\n  const containerRef = useMergeRefs(containerObjectRef, containerMeasureRef);\n  const tabRefs = useRef(new Map());\n  const [horizontalOverflow, setHorizontalOverflow] = useState(false);\n  const [inlineStartOverflow, setInlineStartOverflow] = useState(false);\n  const [inlineEndOverflow, setInlineEndOverflow] = useState(false);\n  const [focusedTabId, setFocusedTabId] = useState(activeTabId);\n  const [previousActiveTabId, setPreviousActiveTabId] = useState(activeTabId);\n  const hasActionOrDismissible = tabs.some(tab => tab.action || tab.dismissible);\n  const tabActionAttributes = hasActionOrDismissible ? {\n    role: 'application',\n    'aria-roledescription': i18n('i18nStrings.tabsWithActionsAriaRoleDescription', i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.tabsWithActionsAriaRoleDescription)\n  } : {\n    role: 'tablist'\n  };\n  useEffect(() => {\n    if (headerBarRef.current) {\n      setHorizontalOverflow(hasHorizontalOverflow(headerBarRef.current, inlineStartOverflowButton));\n      setInlineStartOverflow(hasInlineStartOverflow(headerBarRef.current));\n      setInlineEndOverflow(hasInlineEndOverflow(headerBarRef.current));\n    }\n  }, [widthChange, tabs]);\n  const scrollIntoViewIfPossible = smooth => {\n    if (!activeTabId) {\n      return;\n    }\n    const activeTabRef = tabRefs.current.get(activeTabId);\n    if (activeTabRef && headerBarRef.current) {\n      scrollIntoView(activeTabRef, headerBarRef.current, smooth);\n    }\n  };\n  useEffect(() => {\n    // Delay scrollIntoView as the position is depending on parent elements\n    // (effects are called inside-out in the component tree).\n    // Wait one frame to allow parents to complete it's calculation.\n    requestAnimationFrame(() => {\n      scrollIntoViewIfPossible(false);\n    });\n    // Non-smooth scrolling should not be called upon activeId change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [horizontalOverflow, widthChange, tabs.length]);\n  useEffect(() => {\n    scrollIntoViewIfPossible(true);\n    // Smooth scrolling should only be called upon activeId change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeTabId]);\n  useEffect(() => {\n    var _a, _b;\n    /*\n     When the selected tab changes and we are currently already focused on a tab,\n     move the focus to the newly selected tab.\n    */\n    if ((_a = headerBarRef.current) === null || _a === void 0 ? void 0 : _a.contains(document.activeElement)) {\n      if (document.activeElement !== activeTabHeaderRef.current) {\n        (_b = activeTabHeaderRef.current) === null || _b === void 0 ? void 0 : _b.focus({\n          preventScroll: true\n        });\n      }\n    }\n  }, [activeTabId]);\n  const onScroll = () => {\n    if (headerBarRef.current) {\n      setInlineStartOverflow(hasInlineStartOverflow(headerBarRef.current));\n      setInlineEndOverflow(hasInlineEndOverflow(headerBarRef.current));\n    }\n  };\n  const classes = clsx({\n    [styles['tabs-header']]: true,\n    [styles['tabs-header-with-divider']]: variant === 'default' || isVisualRefresh\n  });\n  const leftButtonClasses = clsx({\n    [styles['pagination-button']]: true,\n    [styles['pagination-button-left']]: true,\n    [styles['pagination-button-left-scrollable']]: inlineStartOverflow\n  });\n  const rightButtonClasses = clsx({\n    [styles['pagination-button']]: true,\n    [styles['pagination-button-right']]: true,\n    [styles['pagination-button-right-scrollable']]: inlineEndOverflow\n  });\n  const navigationAPI = useRef(null);\n  function getNextFocusTarget() {\n    var _a, _b;\n    if (!containerObjectRef.current) {\n      return null;\n    }\n    const tabElements = Array.from(containerObjectRef.current.querySelectorAll(tabSelector));\n    return (_b = (_a = tabElements.find(tab => tab.matches(focusedTabSelector))) !== null && _a !== void 0 ? _a : tabElements.find(tab => !tab.disabled)) !== null && _b !== void 0 ? _b : null;\n  }\n  function onUnregisterActive(focusableElement) {\n    var _a;\n    const isFocusableActionOrDismissible = !focusableElement.classList.contains(styles['tabs-tab-link']);\n    if (!isFocusableActionOrDismissible) {\n      const nextFocusTarget = (_a = navigationAPI.current) === null || _a === void 0 ? void 0 : _a.getFocusTarget();\n      const tabLinkButton = nextFocusTarget === null || nextFocusTarget === void 0 ? void 0 : nextFocusTarget.querySelector(`.${styles['tabs-tab-link']}`);\n      tabLinkButton === null || tabLinkButton === void 0 ? void 0 : tabLinkButton.focus();\n    }\n  }\n  useEffect(() => {\n    var _a;\n    (_a = navigationAPI.current) === null || _a === void 0 ? void 0 : _a.updateFocusTarget();\n  });\n  function onFocus() {\n    var _a;\n    (_a = navigationAPI.current) === null || _a === void 0 ? void 0 : _a.updateFocusTarget();\n  }\n  function onBlur() {\n    var _a;\n    (_a = navigationAPI.current) === null || _a === void 0 ? void 0 : _a.updateFocusTarget();\n  }\n  function onKeyDown(event) {\n    const focusTarget = document.activeElement;\n    const specialKeys = [KeyCode.right, KeyCode.left, KeyCode.end, KeyCode.home, KeyCode.pageUp, KeyCode.pageDown];\n    const isActionOpen = document.querySelector(`.${styles['tabs-tab-action']} [aria-expanded=\"true\"]`);\n    const isDismissOrActionFocused = !(focusTarget === null || focusTarget === void 0 ? void 0 : focusTarget.classList.contains(styles['tabs-tab-link']));\n    if (isActionOpen) {\n      return;\n    }\n    if (event.key === 'Tab' && !event.shiftKey && isDismissOrActionFocused) {\n      event.preventDefault();\n      const panelId = `${idNamespace}-${activeTabId}-panel`;\n      const panel = document.getElementById(panelId);\n      panel === null || panel === void 0 ? void 0 : panel.focus();\n    }\n    if (hasModifierKeys(event) || specialKeys.indexOf(event.keyCode) === -1) {\n      return;\n    }\n    if (!containerObjectRef.current || !focusTarget) {\n      return;\n    }\n    event.preventDefault();\n    const focusables = getFocusablesFrom(containerObjectRef.current);\n    const activeIndex = document.activeElement instanceof HTMLElement ? focusables.indexOf(document.activeElement) : -1;\n    handleKey(event, {\n      onHome: () => focusElement(focusables[0]),\n      onEnd: () => focusElement(focusables[focusables.length - 1]),\n      onInlineStart: () => focusElement(focusables[circleIndex(activeIndex - 1, [0, focusables.length - 1])]),\n      onInlineEnd: () => focusElement(focusables[circleIndex(activeIndex + 1, [0, focusables.length - 1])]),\n      onPageDown: () => inlineEndOverflow && onPaginationClick(headerBarRef, 'forward'),\n      onPageUp: () => inlineStartOverflow && onPaginationClick(headerBarRef, 'backward')\n    });\n  }\n  function focusElement(element) {\n    var _a, _b;\n    element.focus();\n    // If focusable element is a tab - fire the onChange for it.\n    const tabsById = tabs.reduce((map, tab) => map.set(tab.id, tab), new Map());\n    for (const [tabId, focusTargetTabTriggerElement] of tabRefs.current.entries()) {\n      const focusTargetTabLabelElement = focusTargetTabTriggerElement === null || focusTargetTabTriggerElement === void 0 ? void 0 : focusTargetTabTriggerElement.querySelector(`.${styles['tabs-tab-link']}`);\n      if (tabId !== activeTabId && focusTargetTabLabelElement === element) {\n        setPreviousActiveTabId(tabId);\n        setFocusedTabId(tabId);\n        if (!((_a = tabsById.get(tabId)) === null || _a === void 0 ? void 0 : _a.disabled)) {\n          onChange({\n            activeTabId: tabId,\n            activeTabHref: (_b = tabsById.get(tabId)) === null || _b === void 0 ? void 0 : _b.href\n          });\n        }\n        break;\n      }\n    }\n  }\n  // List all non-disabled and registered focusables: those are eligible for keyboard navigation.\n  function getFocusablesFrom(target) {\n    function isElementRegistered(element) {\n      var _a, _b;\n      return (_b = (_a = navigationAPI.current) === null || _a === void 0 ? void 0 : _a.isRegistered(element)) !== null && _b !== void 0 ? _b : false;\n    }\n    function isElementFocusable(element) {\n      if (element instanceof HTMLButtonElement) {\n        return !element.disabled || element.closest(focusableTabSelector);\n      }\n      return element.matches(focusableTabSelector);\n    }\n    return getAllFocusables(target).filter(el => isElementRegistered(el) && isElementFocusable(el));\n  }\n  const TabList = hasActionOrDismissible ? 'div' : 'ul';\n  return (\n    //converted span to div as list should not be a child of span for HTML validation\n    React.createElement(\"div\", {\n      className: classes,\n      ref: containerRef\n    }, horizontalOverflow && React.createElement(\"span\", {\n      ref: inlineStartOverflowButton,\n      className: leftButtonClasses\n    }, React.createElement(InternalButton, {\n      formAction: \"none\",\n      variant: \"icon\",\n      iconName: \"angle-left\",\n      disabled: !inlineStartOverflow,\n      __focusable: true,\n      onClick: () => onPaginationClick(headerBarRef, 'backward'),\n      ariaLabel: i18n('i18nStrings.scrollLeftAriaLabel', i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.scrollLeftAriaLabel)\n    })), React.createElement(SingleTabStopNavigationProvider, {\n      ref: navigationAPI,\n      navigationActive: true,\n      getNextFocusTarget: getNextFocusTarget,\n      onUnregisterActive: onUnregisterActive\n    }, React.createElement(TabList, Object.assign({}, tabActionAttributes, {\n      className: clsx(styles['tabs-header-list'], analyticsSelectors['tabs-header-list']),\n      \"aria-label\": ariaLabel,\n      \"aria-labelledby\": ariaLabelledby,\n      ref: headerBarRef,\n      onScroll: onScroll,\n      onKeyDown: onKeyDown,\n      onFocus: onFocus,\n      onBlur: onBlur\n    }), tabs.map(renderTabHeader))), horizontalOverflow && React.createElement(\"span\", {\n      className: rightButtonClasses\n    }, React.createElement(InternalButton, {\n      formAction: \"none\",\n      variant: \"icon\",\n      iconName: \"angle-right\",\n      disabled: !inlineEndOverflow,\n      __focusable: true,\n      onClick: () => onPaginationClick(headerBarRef, 'forward'),\n      ariaLabel: i18n('i18nStrings.scrollRightAriaLabel', i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.scrollRightAriaLabel)\n    })))\n  );\n  function renderTabHeader(tab, index) {\n    const {\n      dismissible,\n      dismissLabel,\n      dismissDisabled,\n      action,\n      onDismiss\n    } = tab;\n    const isActive = activeTabId === tab.id && !tab.disabled;\n    const clickTab = event => {\n      if (tab.disabled) {\n        event.preventDefault();\n        return;\n      }\n      // if the primary mouse button is clicked with a modifier key, the browser will handle opening a new tab\n      const specialKey = !isPlainLeftClick(event);\n      if (specialKey && tab.href) {\n        return;\n      }\n      event.preventDefault();\n      // for browsers that do not focus buttons on button click\n      if (!tab.href) {\n        const clickedTabRef = tabRefs.current.get(tab.id);\n        if (clickedTabRef) {\n          if (clickedTabRef && clickedTabRef !== document.activeElement) {\n            clickedTabRef.focus({\n              preventScroll: true\n            });\n          }\n        }\n      }\n      if (tab.id === activeTabId) {\n        return;\n      }\n      setFocusedTabId(tab.id);\n      setPreviousActiveTabId(tab.id);\n      onChange({\n        activeTabId: tab.id,\n        activeTabHref: tab.href\n      });\n    };\n    const classes = clsx({\n      [styles['tabs-tab-link']]: true,\n      [styles.refresh]: isVisualRefresh,\n      [styles['tabs-tab-active']]: activeTabId === tab.id && !tab.disabled,\n      [styles['tabs-tab-focused']]: focusedTabId === tab.id,\n      [styles['tabs-tab-active']]: isActive,\n      [analyticsSelectors['active-tab-header']]: isActive,\n      [styles['tabs-tab-disabled']]: tab.disabled,\n      [styles['tabs-tab-focusable']]: !tab.disabled || tab.disabled && !!tab.disabledReason\n    });\n    const tabHeaderContainerClasses = clsx({\n      [styles['tabs-tab-header-container']]: true,\n      [styles.refresh]: isVisualRefresh,\n      [styles['tabs-tab-active']]: isActive,\n      [styles['tabs-tab-disabled']]: tab.disabled,\n      [styles['tabs-tab-focusable']]: !tab.disabled || tab.disabled && !!tab.disabledReason\n    });\n    const tabActionClasses = clsx({\n      [styles['tabs-tab-action']]: true,\n      [styles['tabs-tab-active']]: isActive\n    });\n    const commonProps = {\n      className: classes,\n      'aria-controls': `${idNamespace}-${tab.id}-panel`,\n      'data-testid': tab.id,\n      id: getTabElementId({\n        namespace: idNamespace,\n        tabId: tab.id\n      }),\n      onClick: clickTab\n    };\n    const tabHeaderContainerAriaProps = hasActionOrDismissible ? {\n      role: 'group',\n      'aria-labelledby': commonProps.id\n    } : {};\n    if (!hasActionOrDismissible) {\n      commonProps['aria-selected'] = activeTabId === tab.id;\n      commonProps.role = 'tab';\n    } else {\n      commonProps['aria-expanded'] = activeTabId === tab.id;\n    }\n    if (tab.disabled) {\n      commonProps['aria-disabled'] = 'true';\n    }\n    const setElement = tabElement => {\n      if (tab.id === activeTabId) {\n        activeTabHeaderRef.current = tabElement;\n      }\n      tabRefs.current.set(tab.id, tabElement);\n    };\n    const handleDismiss = event => {\n      if (!containerObjectRef.current || !onDismiss) {\n        return;\n      }\n      const tabElements = getFocusablesFrom(containerObjectRef.current).filter(el => el.classList.contains(styles['tabs-tab-link']));\n      const activeTabIndex = tabElements.findIndex(el => el.dataset.testid === tab.id);\n      tabElements.splice(activeTabIndex, 1);\n      let nextActive;\n      if (previousActiveTabId && previousActiveTabId !== tab.id) {\n        nextActive = tabElements.find(el => el.dataset.testid === previousActiveTabId);\n      } else {\n        nextActive = tabElements[Math.min(tabElements.length - 1, activeTabIndex)];\n      }\n      if (nextActive && nextActive.dataset.testid) {\n        onChange({\n          activeTabId: nextActive.dataset.testid\n        });\n        nextActive.focus();\n      }\n      onDismiss(event);\n    };\n    const TabItem = hasActionOrDismissible ? 'div' : 'li';\n    const analyticsDismissMetadata = {\n      action: 'dismiss',\n      detail: {\n        id: tab.id,\n        label: `.${analyticsSelectors['tab-dismiss-button']}`,\n        position: `${index + 1}`\n      }\n    };\n    const analyticsComponentMetadataInnerContext = {\n      innerContext: {\n        tabId: tab.id,\n        tabLabel: `.${analyticsSelectors['tab-label']}`,\n        tabPosition: `${index + 1}`\n      }\n    };\n    return React.createElement(TabItem, {\n      ref: element => tabRefs.current.set(tab.id, element),\n      className: styles['tabs-tab'],\n      role: \"presentation\",\n      key: tab.id\n    }, React.createElement(\"div\", Object.assign({\n      className: tabHeaderContainerClasses\n    }, tabHeaderContainerAriaProps, getAnalyticsMetadataAttribute({\n      component: analyticsComponentMetadataInnerContext\n    })), React.createElement(TabTrigger, {\n      ref: setElement,\n      tab: tab,\n      elementProps: commonProps,\n      activeTabId: activeTabId,\n      index: index\n    }), action && React.createElement(\"span\", {\n      className: tabActionClasses\n    }, action), dismissible && React.createElement(\"span\", Object.assign({\n      className: styles['tabs-tab-dismiss']\n    }, getAnalyticsMetadataAttribute(analyticsDismissMetadata)), dismissButton({\n      dismissLabel,\n      dismissDisabled,\n      onDismiss: handleDismiss,\n      tabId: tab.id\n    }))));\n  }\n}\nconst TabTrigger = forwardRef((_ref3, ref) => {\n  let {\n    tab,\n    elementProps,\n    activeTabId,\n    index\n  } = _ref3;\n  const refObject = useRef(null);\n  const tabLabelRefObject = useRef(null);\n  const mergedRef = useMergeRefs(refObject, ref);\n  const {\n    tabIndex\n  } = useSingleTabStopNavigation(refObject);\n  const isDisabledWithReason = tab.disabled && !!tab.disabledReason;\n  const [showTooltip, setShowTooltip] = useState(false);\n  const {\n    targetProps,\n    descriptionEl\n  } = useHiddenDescription(tab.disabledReason);\n  const children = React.createElement(React.Fragment, null, React.createElement(\"span\", {\n    className: clsx(styles['tabs-tab-label'], analyticsSelectors['tab-label']),\n    ref: tabLabelRefObject\n  }, React.createElement(\"span\", null, tab.label)), isDisabledWithReason && React.createElement(React.Fragment, null, descriptionEl, showTooltip && React.createElement(Tooltip, {\n    className: styles['disabled-reason-tooltip'],\n    trackRef: tabLabelRefObject,\n    value: tab.disabledReason\n  })));\n  const handlers = {\n    onFocus: () => setShowTooltip(true),\n    onBlur: () => setShowTooltip(false),\n    onMouseEnter: () => setShowTooltip(true),\n    onMouseLeave: () => setShowTooltip(false)\n  };\n  const analyticsSelectMetadata = {\n    action: 'select',\n    detail: {\n      id: tab.id,\n      label: `.${analyticsSelectors['tab-label']}`,\n      position: `${index + 1}`,\n      originTabId: activeTabId || ''\n    }\n  };\n  const commonProps = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, elementProps), isDisabledWithReason ? targetProps : {}), isDisabledWithReason ? handlers : {}), {\n    ref: mergedRef,\n    tabIndex: tabIndex\n  }), tab.disabled || tab.id === activeTabId ? {} : getAnalyticsMetadataAttribute(analyticsSelectMetadata));\n  return tab.href ? React.createElement(\"a\", Object.assign({}, commonProps, {\n    href: tab.href\n  }), children) : React.createElement(\"button\", Object.assign({}, commonProps, {\n    type: \"button\",\n    disabled: tab.disabled && !isDisabledWithReason\n  }), children);\n});\nexport function getTabElementId(_ref4) {\n  let {\n    namespace,\n    tabId\n  } = _ref4;\n  return namespace + '-' + tabId;\n}","map":{"version":3,"names":["React","forwardRef","useEffect","useRef","useState","clsx","useContainerQuery","getAnalyticsMetadataAttribute","InternalButton","useInternalI18n","getAllFocusables","Tooltip","SingleTabStopNavigationProvider","useSingleTabStopNavigation","hasModifierKeys","isPlainLeftClick","useHiddenDescription","useMergeRefs","useVisualRefresh","KeyCode","circleIndex","handleKey","hasHorizontalOverflow","hasInlineEndOverflow","hasInlineStartOverflow","onPaginationClick","scrollIntoView","analyticsSelectors","styles","testUtilStyles","tabSelector","focusedTabSelector","focusableTabSelector","dismissButton","_ref","dismissLabel","dismissDisabled","onDismiss","tabId","createElement","onClick","variant","iconName","formAction","ariaLabel","disabled","className","TabHeaderBar","_ref2","onChange","activeTabId","tabs","idNamespace","ariaLabelledby","i18nStrings","headerBarRef","activeTabHeaderRef","inlineStartOverflowButton","i18n","isVisualRefresh","containerObjectRef","widthChange","containerMeasureRef","rect","contentBoxWidth","containerRef","tabRefs","Map","horizontalOverflow","setHorizontalOverflow","inlineStartOverflow","setInlineStartOverflow","inlineEndOverflow","setInlineEndOverflow","focusedTabId","setFocusedTabId","previousActiveTabId","setPreviousActiveTabId","hasActionOrDismissible","some","tab","action","dismissible","tabActionAttributes","role","tabsWithActionsAriaRoleDescription","current","scrollIntoViewIfPossible","smooth","activeTabRef","get","requestAnimationFrame","length","_a","contains","document","activeElement","_b","focus","preventScroll","onScroll","classes","leftButtonClasses","rightButtonClasses","navigationAPI","getNextFocusTarget","tabElements","Array","from","querySelectorAll","find","matches","onUnregisterActive","focusableElement","isFocusableActionOrDismissible","classList","nextFocusTarget","getFocusTarget","tabLinkButton","querySelector","updateFocusTarget","onFocus","onBlur","onKeyDown","event","focusTarget","specialKeys","right","left","end","home","pageUp","pageDown","isActionOpen","isDismissOrActionFocused","key","shiftKey","preventDefault","panelId","panel","getElementById","indexOf","keyCode","focusables","getFocusablesFrom","activeIndex","HTMLElement","onHome","focusElement","onEnd","onInlineStart","onInlineEnd","onPageDown","onPageUp","element","tabsById","reduce","map","set","id","focusTargetTabTriggerElement","entries","focusTargetTabLabelElement","activeTabHref","href","target","isElementRegistered","isRegistered","isElementFocusable","HTMLButtonElement","closest","filter","el","TabList","ref","__focusable","scrollLeftAriaLabel","navigationActive","Object","assign","renderTabHeader","scrollRightAriaLabel","index","isActive","clickTab","specialKey","clickedTabRef","refresh","disabledReason","tabHeaderContainerClasses","tabActionClasses","commonProps","getTabElementId","namespace","tabHeaderContainerAriaProps","setElement","tabElement","handleDismiss","activeTabIndex","findIndex","dataset","testid","splice","nextActive","Math","min","TabItem","analyticsDismissMetadata","detail","label","position","analyticsComponentMetadataInnerContext","innerContext","tabLabel","tabPosition","component","TabTrigger","elementProps","_ref3","refObject","tabLabelRefObject","mergedRef","tabIndex","isDisabledWithReason","showTooltip","setShowTooltip","targetProps","descriptionEl","children","Fragment","trackRef","value","handlers","onMouseEnter","onMouseLeave","analyticsSelectMetadata","originTabId","type","_ref4"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/tabs/tab-header-bar.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\n\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\n\nimport { ButtonProps } from '../button/interfaces';\nimport { InternalButton } from '../button/internal';\nimport { useInternalI18n } from '../i18n/context';\nimport { getAllFocusables } from '../internal/components/focus-lock/utils';\nimport Tooltip from '../internal/components/tooltip';\nimport {\n  SingleTabStopNavigationAPI,\n  SingleTabStopNavigationProvider,\n  useSingleTabStopNavigation,\n} from '../internal/context/single-tab-stop-navigation-context';\nimport { hasModifierKeys, isPlainLeftClick } from '../internal/events';\nimport useHiddenDescription from '../internal/hooks/use-hidden-description';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { KeyCode } from '../internal/keycode';\nimport { circleIndex } from '../internal/utils/circle-index';\nimport handleKey from '../internal/utils/handle-key';\nimport {\n  GeneratedAnalyticsMetadataTabsComponent,\n  GeneratedAnalyticsMetadataTabsDismiss,\n  GeneratedAnalyticsMetadataTabsSelect,\n} from './analytics-metadata/interfaces';\nimport { TabsProps } from './interfaces';\nimport {\n  hasHorizontalOverflow,\n  hasInlineEndOverflow,\n  hasInlineStartOverflow,\n  onPaginationClick,\n  scrollIntoView,\n} from './scroll-utils';\n\nimport analyticsSelectors from './analytics-metadata/styles.css.js';\nimport styles from './styles.css.js';\nimport testUtilStyles from './test-classes/styles.css.js';\n\nconst tabSelector = `.${styles['tabs-tab-link']}`;\nconst focusedTabSelector = `[role=\"tab\"].${styles['tabs-tab-focused']}`;\nconst focusableTabSelector = `.${styles['tabs-tab-focusable']}`;\n\nfunction dismissButton({\n  dismissLabel,\n  dismissDisabled,\n  onDismiss,\n  tabId,\n}: {\n  dismissLabel?: string;\n  dismissDisabled?: boolean;\n  onDismiss: ButtonProps['onClick'];\n  tabId: string;\n}) {\n  return (\n    <InternalButton\n      onClick={onDismiss}\n      variant=\"icon\"\n      iconName=\"close\"\n      formAction=\"none\"\n      ariaLabel={dismissLabel}\n      disabled={dismissDisabled}\n      className={clsx(testUtilStyles['tab-dismiss-button'], analyticsSelectors['tab-dismiss-button'])}\n      data-testid={`awsui-tab-dismiss-button-${tabId}`}\n    />\n  );\n}\n\nexport interface TabHeaderBarProps {\n  onChange: (changeDetail: TabsProps.ChangeDetail) => void;\n  activeTabId: TabsProps['activeTabId'];\n  tabs: TabsProps['tabs'];\n  variant: TabsProps['variant'];\n  idNamespace: string;\n  ariaLabel?: string;\n  ariaLabelledby?: string;\n  i18nStrings?: TabsProps.I18nStrings;\n}\n\nexport function TabHeaderBar({\n  onChange,\n  activeTabId,\n  tabs,\n  variant,\n  idNamespace,\n  ariaLabel,\n  ariaLabelledby,\n  i18nStrings,\n}: TabHeaderBarProps) {\n  const headerBarRef = useRef<HTMLUListElement>(null);\n  const activeTabHeaderRef = useRef<null | HTMLElement>(null);\n  const inlineStartOverflowButton = useRef<HTMLElement>(null);\n  const i18n = useInternalI18n('tabs');\n\n  const isVisualRefresh = useVisualRefresh();\n\n  const containerObjectRef = useRef<HTMLDivElement>(null);\n  const [widthChange, containerMeasureRef] = useContainerQuery<number>(rect => rect.contentBoxWidth);\n  const containerRef = useMergeRefs(containerObjectRef, containerMeasureRef);\n  const tabRefs = useRef<Map<string, HTMLElement>>(new Map());\n  const [horizontalOverflow, setHorizontalOverflow] = useState(false);\n  const [inlineStartOverflow, setInlineStartOverflow] = useState(false);\n  const [inlineEndOverflow, setInlineEndOverflow] = useState(false);\n  const [focusedTabId, setFocusedTabId] = useState(activeTabId);\n  const [previousActiveTabId, setPreviousActiveTabId] = useState<string | undefined>(activeTabId);\n  const hasActionOrDismissible = tabs.some(tab => tab.action || tab.dismissible);\n  const tabActionAttributes = hasActionOrDismissible\n    ? {\n        role: 'application',\n        'aria-roledescription': i18n(\n          'i18nStrings.tabsWithActionsAriaRoleDescription',\n          i18nStrings?.tabsWithActionsAriaRoleDescription\n        ),\n      }\n    : {\n        role: 'tablist',\n      };\n\n  useEffect(() => {\n    if (headerBarRef.current) {\n      setHorizontalOverflow(hasHorizontalOverflow(headerBarRef.current, inlineStartOverflowButton));\n      setInlineStartOverflow(hasInlineStartOverflow(headerBarRef.current));\n      setInlineEndOverflow(hasInlineEndOverflow(headerBarRef.current));\n    }\n  }, [widthChange, tabs]);\n\n  const scrollIntoViewIfPossible = (smooth: boolean) => {\n    if (!activeTabId) {\n      return;\n    }\n    const activeTabRef = tabRefs.current.get(activeTabId);\n    if (activeTabRef && headerBarRef.current) {\n      scrollIntoView(activeTabRef, headerBarRef.current, smooth);\n    }\n  };\n\n  useEffect(() => {\n    // Delay scrollIntoView as the position is depending on parent elements\n    // (effects are called inside-out in the component tree).\n    // Wait one frame to allow parents to complete it's calculation.\n    requestAnimationFrame(() => {\n      scrollIntoViewIfPossible(false);\n    });\n    // Non-smooth scrolling should not be called upon activeId change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [horizontalOverflow, widthChange, tabs.length]);\n\n  useEffect(() => {\n    scrollIntoViewIfPossible(true);\n    // Smooth scrolling should only be called upon activeId change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeTabId]);\n\n  useEffect(() => {\n    /*\n     When the selected tab changes and we are currently already focused on a tab,\n     move the focus to the newly selected tab.\n    */\n    if (headerBarRef.current?.contains(document.activeElement)) {\n      if (document.activeElement !== activeTabHeaderRef.current) {\n        activeTabHeaderRef.current?.focus({ preventScroll: true });\n      }\n    }\n  }, [activeTabId]);\n\n  const onScroll = () => {\n    if (headerBarRef.current) {\n      setInlineStartOverflow(hasInlineStartOverflow(headerBarRef.current));\n      setInlineEndOverflow(hasInlineEndOverflow(headerBarRef.current));\n    }\n  };\n\n  const classes = clsx({\n    [styles['tabs-header']]: true,\n    [styles['tabs-header-with-divider']]: variant === 'default' || isVisualRefresh,\n  });\n\n  const leftButtonClasses = clsx({\n    [styles['pagination-button']]: true,\n    [styles['pagination-button-left']]: true,\n    [styles['pagination-button-left-scrollable']]: inlineStartOverflow,\n  });\n\n  const rightButtonClasses = clsx({\n    [styles['pagination-button']]: true,\n    [styles['pagination-button-right']]: true,\n    [styles['pagination-button-right-scrollable']]: inlineEndOverflow,\n  });\n\n  const navigationAPI = useRef<SingleTabStopNavigationAPI>(null);\n\n  function getNextFocusTarget(): null | HTMLElement {\n    if (!containerObjectRef.current) {\n      return null;\n    }\n    const tabElements: HTMLButtonElement[] = Array.from(containerObjectRef.current.querySelectorAll(tabSelector));\n    return tabElements.find(tab => tab.matches(focusedTabSelector)) ?? tabElements.find(tab => !tab.disabled) ?? null;\n  }\n\n  function onUnregisterActive(focusableElement: HTMLElement) {\n    const isFocusableActionOrDismissible = !focusableElement.classList.contains(styles['tabs-tab-link']);\n    if (!isFocusableActionOrDismissible) {\n      const nextFocusTarget = navigationAPI.current?.getFocusTarget();\n      const tabLinkButton = nextFocusTarget?.querySelector(`.${styles['tabs-tab-link']}`) as HTMLElement;\n      tabLinkButton?.focus();\n    }\n  }\n\n  useEffect(() => {\n    navigationAPI.current?.updateFocusTarget();\n  });\n  function onFocus() {\n    navigationAPI.current?.updateFocusTarget();\n  }\n  function onBlur() {\n    navigationAPI.current?.updateFocusTarget();\n  }\n\n  function onKeyDown(event: React.KeyboardEvent) {\n    const focusTarget = document.activeElement;\n    const specialKeys = [KeyCode.right, KeyCode.left, KeyCode.end, KeyCode.home, KeyCode.pageUp, KeyCode.pageDown];\n    const isActionOpen = document.querySelector(`.${styles['tabs-tab-action']} [aria-expanded=\"true\"]`);\n    const isDismissOrActionFocused = !focusTarget?.classList.contains(styles['tabs-tab-link']);\n\n    if (isActionOpen) {\n      return;\n    }\n    if (event.key === 'Tab' && !event.shiftKey && isDismissOrActionFocused) {\n      event.preventDefault();\n      const panelId = `${idNamespace}-${activeTabId}-panel`;\n      const panel = document.getElementById(panelId);\n      panel?.focus();\n    }\n    if (hasModifierKeys(event) || specialKeys.indexOf(event.keyCode) === -1) {\n      return;\n    }\n    if (!containerObjectRef.current || !focusTarget) {\n      return;\n    }\n    event.preventDefault();\n\n    const focusables = getFocusablesFrom(containerObjectRef.current);\n    const activeIndex = document.activeElement instanceof HTMLElement ? focusables.indexOf(document.activeElement) : -1;\n    handleKey(event as any, {\n      onHome: () => focusElement(focusables[0]),\n      onEnd: () => focusElement(focusables[focusables.length - 1]),\n      onInlineStart: () => focusElement(focusables[circleIndex(activeIndex - 1, [0, focusables.length - 1])]),\n      onInlineEnd: () => focusElement(focusables[circleIndex(activeIndex + 1, [0, focusables.length - 1])]),\n      onPageDown: () => inlineEndOverflow && onPaginationClick(headerBarRef, 'forward'),\n      onPageUp: () => inlineStartOverflow && onPaginationClick(headerBarRef, 'backward'),\n    });\n  }\n  function focusElement(element: HTMLElement) {\n    element.focus();\n    // If focusable element is a tab - fire the onChange for it.\n    const tabsById = tabs.reduce((map, tab) => map.set(tab.id, tab), new Map<string, TabsProps.Tab>());\n    for (const [tabId, focusTargetTabTriggerElement] of tabRefs.current.entries()) {\n      const focusTargetTabLabelElement = focusTargetTabTriggerElement?.querySelector(`.${styles['tabs-tab-link']}`);\n      if (tabId !== activeTabId && focusTargetTabLabelElement === element) {\n        setPreviousActiveTabId(tabId);\n        setFocusedTabId(tabId);\n\n        if (!tabsById.get(tabId)?.disabled) {\n          onChange({ activeTabId: tabId, activeTabHref: tabsById.get(tabId)?.href });\n        }\n        break;\n      }\n    }\n  }\n  // List all non-disabled and registered focusables: those are eligible for keyboard navigation.\n  function getFocusablesFrom(target: HTMLElement) {\n    function isElementRegistered(element: HTMLElement) {\n      return navigationAPI.current?.isRegistered(element) ?? false;\n    }\n    function isElementFocusable(element: HTMLElement) {\n      if (element instanceof HTMLButtonElement) {\n        return !element.disabled || element.closest(focusableTabSelector);\n      }\n\n      return element.matches(focusableTabSelector);\n    }\n    return getAllFocusables(target).filter(el => isElementRegistered(el) && isElementFocusable(el));\n  }\n\n  const TabList = hasActionOrDismissible ? 'div' : 'ul';\n\n  return (\n    //converted span to div as list should not be a child of span for HTML validation\n    <div className={classes} ref={containerRef}>\n      {horizontalOverflow && (\n        <span ref={inlineStartOverflowButton} className={leftButtonClasses}>\n          <InternalButton\n            formAction=\"none\"\n            variant=\"icon\"\n            iconName=\"angle-left\"\n            disabled={!inlineStartOverflow}\n            __focusable={true}\n            onClick={() => onPaginationClick(headerBarRef, 'backward')}\n            ariaLabel={i18n('i18nStrings.scrollLeftAriaLabel', i18nStrings?.scrollLeftAriaLabel)}\n          />\n        </span>\n      )}\n      <SingleTabStopNavigationProvider\n        ref={navigationAPI}\n        navigationActive={true}\n        getNextFocusTarget={getNextFocusTarget}\n        onUnregisterActive={onUnregisterActive}\n      >\n        <TabList\n          {...tabActionAttributes}\n          className={clsx(styles['tabs-header-list'], analyticsSelectors['tabs-header-list'])}\n          aria-label={ariaLabel}\n          aria-labelledby={ariaLabelledby}\n          ref={headerBarRef as never}\n          onScroll={onScroll}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n        >\n          {tabs.map(renderTabHeader)}\n        </TabList>\n      </SingleTabStopNavigationProvider>\n      {horizontalOverflow && (\n        <span className={rightButtonClasses}>\n          <InternalButton\n            formAction=\"none\"\n            variant=\"icon\"\n            iconName=\"angle-right\"\n            disabled={!inlineEndOverflow}\n            __focusable={true}\n            onClick={() => onPaginationClick(headerBarRef, 'forward')}\n            ariaLabel={i18n('i18nStrings.scrollRightAriaLabel', i18nStrings?.scrollRightAriaLabel)}\n          />\n        </span>\n      )}\n    </div>\n  );\n\n  function renderTabHeader(tab: TabsProps.Tab, index: number) {\n    const { dismissible, dismissLabel, dismissDisabled, action, onDismiss } = tab;\n    const isActive = activeTabId === tab.id && !tab.disabled;\n\n    const clickTab = (event: React.MouseEvent) => {\n      if (tab.disabled) {\n        event.preventDefault();\n        return;\n      }\n\n      // if the primary mouse button is clicked with a modifier key, the browser will handle opening a new tab\n      const specialKey = !isPlainLeftClick(event);\n      if (specialKey && tab.href) {\n        return;\n      }\n\n      event.preventDefault();\n      // for browsers that do not focus buttons on button click\n      if (!tab.href) {\n        const clickedTabRef = tabRefs.current.get(tab.id) as undefined | HTMLButtonElement;\n        if (clickedTabRef) {\n          if (clickedTabRef && clickedTabRef !== document.activeElement) {\n            clickedTabRef.focus({ preventScroll: true });\n          }\n        }\n      }\n\n      if (tab.id === activeTabId) {\n        return;\n      }\n\n      setFocusedTabId(tab.id);\n      setPreviousActiveTabId(tab.id);\n      onChange({ activeTabId: tab.id, activeTabHref: tab.href });\n    };\n\n    const classes = clsx({\n      [styles['tabs-tab-link']]: true,\n      [styles.refresh]: isVisualRefresh,\n      [styles['tabs-tab-active']]: activeTabId === tab.id && !tab.disabled,\n      [styles['tabs-tab-focused']]: focusedTabId === tab.id,\n      [styles['tabs-tab-active']]: isActive,\n      [analyticsSelectors['active-tab-header']]: isActive,\n      [styles['tabs-tab-disabled']]: tab.disabled,\n      [styles['tabs-tab-focusable']]: !tab.disabled || (tab.disabled && !!tab.disabledReason),\n    });\n\n    const tabHeaderContainerClasses = clsx({\n      [styles['tabs-tab-header-container']]: true,\n      [styles.refresh]: isVisualRefresh,\n      [styles['tabs-tab-active']]: isActive,\n      [styles['tabs-tab-disabled']]: tab.disabled,\n      [styles['tabs-tab-focusable']]: !tab.disabled || (tab.disabled && !!tab.disabledReason),\n    });\n\n    const tabActionClasses = clsx({\n      [styles['tabs-tab-action']]: true,\n      [styles['tabs-tab-active']]: isActive,\n    });\n\n    const commonProps: (JSX.IntrinsicElements['a'] | JSX.IntrinsicElements['button']) & { 'data-testid': string } = {\n      className: classes,\n      'aria-controls': `${idNamespace}-${tab.id}-panel`,\n      'data-testid': tab.id,\n      id: getTabElementId({ namespace: idNamespace, tabId: tab.id }),\n      onClick: clickTab,\n    };\n\n    const tabHeaderContainerAriaProps = hasActionOrDismissible\n      ? {\n          role: 'group',\n          'aria-labelledby': commonProps.id,\n        }\n      : {};\n\n    if (!hasActionOrDismissible) {\n      commonProps['aria-selected'] = activeTabId === tab.id;\n      commonProps.role = 'tab';\n    } else {\n      commonProps['aria-expanded'] = activeTabId === tab.id;\n    }\n\n    if (tab.disabled) {\n      commonProps['aria-disabled'] = 'true';\n    }\n\n    const setElement = (tabElement: null | HTMLElement) => {\n      if (tab.id === activeTabId) {\n        activeTabHeaderRef.current = tabElement;\n      }\n      tabRefs.current.set(tab.id, tabElement as HTMLElement);\n    };\n\n    const handleDismiss: ButtonProps['onClick'] = event => {\n      if (!containerObjectRef.current || !onDismiss) {\n        return;\n      }\n      const tabElements = getFocusablesFrom(containerObjectRef.current).filter(el =>\n        el.classList.contains(styles['tabs-tab-link'])\n      );\n      const activeTabIndex = tabElements.findIndex(el => el.dataset.testid === tab.id);\n      tabElements.splice(activeTabIndex, 1);\n      let nextActive: HTMLElement | undefined;\n      if (previousActiveTabId && previousActiveTabId !== tab.id) {\n        nextActive = tabElements.find(el => el.dataset.testid === previousActiveTabId);\n      } else {\n        nextActive = tabElements[Math.min(tabElements.length - 1, activeTabIndex)];\n      }\n      if (nextActive && nextActive.dataset.testid) {\n        onChange({ activeTabId: nextActive.dataset.testid });\n        nextActive.focus();\n      }\n      onDismiss(event);\n    };\n\n    const TabItem = hasActionOrDismissible ? 'div' : 'li';\n\n    const analyticsDismissMetadata: GeneratedAnalyticsMetadataTabsDismiss = {\n      action: 'dismiss',\n      detail: {\n        id: tab.id,\n        label: `.${analyticsSelectors['tab-dismiss-button']}`,\n        position: `${index + 1}`,\n      },\n    };\n\n    const analyticsComponentMetadataInnerContext: Partial<GeneratedAnalyticsMetadataTabsComponent> = {\n      innerContext: {\n        tabId: tab.id,\n        tabLabel: `.${analyticsSelectors['tab-label']}`,\n        tabPosition: `${index + 1}`,\n      },\n    };\n\n    return (\n      <TabItem\n        ref={(element: any) => tabRefs.current.set(tab.id, element as HTMLElement)}\n        className={styles['tabs-tab']}\n        role=\"presentation\"\n        key={tab.id}\n      >\n        <div\n          className={tabHeaderContainerClasses}\n          {...tabHeaderContainerAriaProps}\n          {...getAnalyticsMetadataAttribute({ component: analyticsComponentMetadataInnerContext })}\n        >\n          <TabTrigger ref={setElement} tab={tab} elementProps={commonProps} activeTabId={activeTabId} index={index} />\n          {action && <span className={tabActionClasses}>{action}</span>}\n          {dismissible && (\n            <span className={styles['tabs-tab-dismiss']} {...getAnalyticsMetadataAttribute(analyticsDismissMetadata)}>\n              {dismissButton({ dismissLabel, dismissDisabled, onDismiss: handleDismiss, tabId: tab.id })}\n            </span>\n          )}\n        </div>\n      </TabItem>\n    );\n  }\n}\n\ninterface TabTriggerProps {\n  tab: TabsProps.Tab;\n  elementProps: React.HTMLAttributes<HTMLAnchorElement | HTMLButtonElement>;\n  activeTabId?: string;\n  index: number;\n}\nconst TabTrigger = forwardRef(\n  ({ tab, elementProps, activeTabId, index }: TabTriggerProps, ref: React.Ref<HTMLElement>) => {\n    const refObject = useRef<HTMLElement>(null);\n    const tabLabelRefObject = useRef<HTMLElement>(null);\n    const mergedRef = useMergeRefs(refObject, ref);\n    const { tabIndex } = useSingleTabStopNavigation(refObject);\n    const isDisabledWithReason = tab.disabled && !!tab.disabledReason;\n    const [showTooltip, setShowTooltip] = useState(false);\n    const { targetProps, descriptionEl } = useHiddenDescription(tab.disabledReason);\n    const children = (\n      <>\n        <span className={clsx(styles['tabs-tab-label'], analyticsSelectors['tab-label'])} ref={tabLabelRefObject}>\n          {/* The label is wrapped with span so that whitespaces inside don't get trimmed. */}\n          <span>{tab.label}</span>\n        </span>\n        {isDisabledWithReason && (\n          <>\n            {descriptionEl}\n            {showTooltip && (\n              <Tooltip\n                className={styles['disabled-reason-tooltip']}\n                trackRef={tabLabelRefObject}\n                value={tab.disabledReason!}\n              />\n            )}\n          </>\n        )}\n      </>\n    );\n\n    const handlers = {\n      onFocus: () => setShowTooltip(true),\n      onBlur: () => setShowTooltip(false),\n      onMouseEnter: () => setShowTooltip(true),\n      onMouseLeave: () => setShowTooltip(false),\n    };\n\n    const analyticsSelectMetadata: GeneratedAnalyticsMetadataTabsSelect = {\n      action: 'select',\n      detail: {\n        id: tab.id,\n        label: `.${analyticsSelectors['tab-label']}`,\n        position: `${index + 1}`,\n        originTabId: activeTabId || '',\n      },\n    };\n\n    const commonProps = {\n      ...elementProps,\n      ...(isDisabledWithReason ? targetProps : {}),\n      ...(isDisabledWithReason ? handlers : {}),\n      ref: mergedRef,\n      tabIndex: tabIndex,\n      ...(tab.disabled || tab.id === activeTabId ? {} : getAnalyticsMetadataAttribute(analyticsSelectMetadata)),\n    };\n\n    return tab.href ? (\n      <a {...commonProps} href={tab.href}>\n        {children}\n      </a>\n    ) : (\n      <button {...commonProps} type=\"button\" disabled={tab.disabled && !isDisabledWithReason}>\n        {children}\n      </button>\n    );\n  }\n);\n\nexport function getTabElementId({ namespace, tabId }: { namespace: string; tabId: string }) {\n  return namespace + '-' + tabId;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}