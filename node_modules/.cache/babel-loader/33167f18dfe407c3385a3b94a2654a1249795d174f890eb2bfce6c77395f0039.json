{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport clsx from 'clsx';\nimport { useResizeObserver } from '@cloudscape-design/component-toolkit/internal';\nimport { getLogicalBoundingClientRect } from '@cloudscape-design/component-toolkit/internal';\nimport { fireNonCancelableEvent } from '../../events';\nimport customCssProps from '../../generated/custom-css-properties';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\nimport { useMobile } from '../../hooks/use-mobile';\nimport { usePortalModeClasses } from '../../hooks/use-portal-mode-classes';\nimport { useUniqueId } from '../../hooks/use-unique-id/index.js';\nimport { useVisualRefresh } from '../../hooks/use-visual-mode';\nimport { nodeBelongs } from '../../utils/node-belongs';\nimport { getFirstFocusable, getLastFocusable } from '../focus-lock/utils.js';\nimport TabTrap from '../tab-trap/index.js';\nimport { Transition } from '../transition';\nimport { DropdownContextProvider } from './context';\nimport { calculatePosition, defaultMaxDropdownWidth, hasEnoughSpaceToStretchBeyondTriggerWidth } from './dropdown-fit-handler';\nimport styles from './styles.css.js';\nconst DropdownContainer = ({\n  triggerRef,\n  children,\n  renderWithPortal,\n  id,\n  referrerId,\n  open\n}) => {\n  var _a, _b;\n  if (!renderWithPortal) {\n    return React.createElement(React.Fragment, null, children);\n  }\n  if (!open) {\n    return null;\n  }\n  const currentDocument = (_b = (_a = triggerRef.current) === null || _a === void 0 ? void 0 : _a.ownerDocument) !== null && _b !== void 0 ? _b : document;\n  return createPortal(React.createElement(\"div\", {\n    id: id,\n    \"data-awsui-referrer-id\": referrerId\n  }, children), currentDocument.body);\n};\nconst TransitionContent = ({\n  state,\n  transitionRef,\n  dropdownClasses,\n  stretchWidth,\n  interior,\n  isRefresh,\n  dropdownRef,\n  verticalContainerRef,\n  expandToViewport,\n  stretchBeyondTriggerWidth,\n  header,\n  children,\n  footer,\n  position,\n  open,\n  onMouseDown,\n  id,\n  role,\n  ariaLabelledby,\n  ariaDescribedby\n}) => {\n  const contentRef = useMergeRefs(dropdownRef, transitionRef);\n  return React.createElement(\"div\", {\n    className: clsx(styles.dropdown, dropdownClasses, {\n      [styles.open]: open,\n      [styles['with-limited-width']]: !stretchWidth,\n      [styles['hide-block-border']]: stretchWidth,\n      [styles.interior]: interior,\n      [styles.refresh]: isRefresh,\n      [styles['use-portal']]: expandToViewport && !interior,\n      [styles['stretch-beyond-trigger-width']]: stretchBeyondTriggerWidth\n    }),\n    ref: contentRef,\n    id: id,\n    role: role,\n    \"aria-labelledby\": ariaLabelledby,\n    \"aria-describedby\": ariaDescribedby,\n    \"data-open\": open,\n    \"data-animating\": state !== 'exited',\n    \"aria-hidden\": !open,\n    style: stretchBeyondTriggerWidth ? {\n      [customCssProps.dropdownDefaultMaxWidth]: `${defaultMaxDropdownWidth}px`\n    } : {},\n    onMouseDown: onMouseDown\n  }, React.createElement(\"div\", {\n    className: clsx(styles['dropdown-content-wrapper'], !header && !children && styles['is-empty'], isRefresh && styles.refresh)\n  }, React.createElement(\"div\", {\n    ref: verticalContainerRef,\n    className: styles['dropdown-content']\n  }, React.createElement(DropdownContextProvider, {\n    position: position\n  }, header, children, footer))));\n};\nconst Dropdown = ({\n  children,\n  trigger,\n  open,\n  onDropdownClose,\n  onMouseDown,\n  header,\n  footer,\n  dropdownId,\n  stretchTriggerHeight = false,\n  stretchWidth = true,\n  stretchHeight = false,\n  stretchToTriggerWidth = true,\n  stretchBeyondTriggerWidth = false,\n  expandToViewport = false,\n  preferCenter = false,\n  interior = false,\n  minWidth,\n  scrollable = true,\n  loopFocus = expandToViewport,\n  onFocus,\n  onBlur,\n  contentKey,\n  dropdownContentId,\n  dropdownContentRole,\n  ariaLabelledby,\n  ariaDescribedby\n}) => {\n  const wrapperRef = useRef(null);\n  const triggerRef = useRef(null);\n  const dropdownRef = useRef(null);\n  const dropdownContainerRef = useRef(null);\n  const verticalContainerRef = useRef(null);\n  // To keep track of the initial position (drop up/down) which is kept the same during fixed repositioning\n  const fixedPosition = useRef(null);\n  const isRefresh = useVisualRefresh();\n  const dropdownClasses = usePortalModeClasses(triggerRef);\n  const [position, setPosition] = useState('bottom-right');\n  const isMobile = useMobile();\n  const setDropdownPosition = (position, triggerBox, target, verticalContainer) => {\n    const entireWidth = !interior && stretchWidth;\n    if (!stretchWidth) {\n      // 1px offset for dropdowns where the dropdown itself needs a border, rather than on the items\n      verticalContainer.style.maxBlockSize = `${parseInt(position.blockSize) + 1}px`;\n    } else {\n      verticalContainer.style.maxBlockSize = position.blockSize;\n    }\n    if (entireWidth && !expandToViewport) {\n      if (stretchToTriggerWidth) {\n        target.classList.add(styles['occupy-entire-width']);\n      }\n    } else {\n      target.style.inlineSize = position.inlineSize;\n    }\n    // Using styles for main dropdown to adjust its position as preferred alternative\n    if (position.dropBlockStart && !interior) {\n      target.classList.add(styles['dropdown-drop-up']);\n      if (!expandToViewport) {\n        target.style.insetBlockEnd = '100%';\n      }\n    } else {\n      target.classList.remove(styles['dropdown-drop-up']);\n    }\n    target.classList.add(position.dropInlineStart ? styles['dropdown-drop-left'] : styles['dropdown-drop-right']);\n    if (position.insetInlineStart && position.insetInlineStart !== 'auto') {\n      target.style.insetInlineStart = position.insetInlineStart;\n    }\n    // Position normal overflow dropdowns with fixed positioning relative to viewport\n    if (expandToViewport && !interior) {\n      target.style.position = 'fixed';\n      if (position.dropBlockStart) {\n        target.style.insetBlockEnd = `calc(100% - ${triggerBox.top}px)`;\n      } else {\n        target.style.insetBlockStart = `${triggerBox.bottom}px`;\n      }\n      if (position.dropInlineStart) {\n        target.style.insetInlineStart = `calc(${triggerBox.right}px - ${position.inlineSize})`;\n      } else {\n        target.style.insetInlineStart = `${triggerBox.left}px`;\n      }\n      // Keep track of the initial dropdown position and direction.\n      // Dropdown direction doesn't need to change as the user scrolls, just needs to stay attached to the trigger.\n      fixedPosition.current = position;\n      return;\n    }\n    // For an interior dropdown (the fly out) we need exact values for positioning\n    // and classes are not enough\n    // usage of relative position is impossible due to overwrite of overflow-x\n    if (interior && isInteriorPosition(position)) {\n      if (position.dropBlockStart) {\n        target.style.insetBlockEnd = position.insetBlockEnd;\n      } else {\n        target.style.insetBlockStart = position.insetBlockStart;\n      }\n      target.style.insetInlineStart = position.insetInlineStart;\n    }\n    if (position.dropBlockStart && position.dropInlineStart) {\n      setPosition('top-left');\n    } else if (position.dropBlockStart) {\n      setPosition('top-right');\n    } else if (position.dropInlineStart) {\n      setPosition('bottom-left');\n    } else {\n      setPosition('bottom-right');\n    }\n  };\n  const isOutsideDropdown = element => (!wrapperRef.current || !nodeBelongs(wrapperRef.current, element)) && (!dropdownContainerRef.current || !nodeBelongs(dropdownContainerRef.current, element));\n  const focusHandler = event => {\n    if (!event.relatedTarget || isOutsideDropdown(event.relatedTarget)) {\n      fireNonCancelableEvent(onFocus, event);\n    }\n  };\n  const blurHandler = event => {\n    if (!event.relatedTarget || isOutsideDropdown(event.relatedTarget)) {\n      fireNonCancelableEvent(onBlur, event);\n    }\n  };\n  // Prevent the dropdown width from stretching beyond the trigger width\n  // if that is going to cause the dropdown to be cropped because of overflow\n  const fixStretching = () => {\n    const classNameToRemove = styles['stretch-beyond-trigger-width'];\n    if (open && stretchBeyondTriggerWidth && dropdownRef.current && triggerRef.current && dropdownRef.current.classList.contains(classNameToRemove) && !hasEnoughSpaceToStretchBeyondTriggerWidth({\n      triggerElement: triggerRef.current,\n      dropdownElement: dropdownRef.current,\n      desiredMinWidth: minWidth,\n      expandToViewport,\n      stretchWidth,\n      stretchHeight,\n      isMobile\n    })) {\n      dropdownRef.current.classList.remove(classNameToRemove);\n    }\n  };\n  useResizeObserver(() => dropdownRef.current, fixStretching);\n  useLayoutEffect(() => {\n    const onDropdownOpen = () => {\n      if (open && dropdownRef.current && triggerRef.current && verticalContainerRef.current) {\n        // calculate scroll width only for dropdowns that has a scrollbar and ignore it for date picker components\n        if (scrollable) {\n          dropdownRef.current.classList.add(styles.nowrap);\n        }\n        setDropdownPosition(...calculatePosition(dropdownRef.current, triggerRef.current, verticalContainerRef.current, interior, expandToViewport, preferCenter, stretchWidth, stretchHeight, isMobile, minWidth, stretchBeyondTriggerWidth), dropdownRef.current, verticalContainerRef.current);\n        if (scrollable) {\n          dropdownRef.current.classList.remove(styles.nowrap);\n        }\n      }\n    };\n    onDropdownOpen();\n    if (open) {\n      // window may scroll when dropdown opens, for example when soft keyboard shows up\n      window.addEventListener('scroll', onDropdownOpen);\n      // only listen to window scroll within very short time after the dropdown opens\n      // do not want to interfere dropdown position on scroll afterwards\n      const timeoutId = setTimeout(() => {\n        window.removeEventListener('scroll', onDropdownOpen);\n      }, 500);\n      return () => {\n        clearTimeout(timeoutId);\n        window.removeEventListener('scroll', onDropdownOpen);\n      };\n    }\n    // See AWSUI-13040\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open, dropdownRef, triggerRef, verticalContainerRef, interior, stretchWidth, isMobile, contentKey]);\n  // subscribe to outside click\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n    const clickListener = event => {\n      // Since the listener is registered on the window, `event.target` will incorrectly point at the\n      // shadow root if the component is rendered inside shadow DOM.\n      const target = event.composedPath ? event.composedPath()[0] : event.target;\n      if (!nodeBelongs(dropdownRef.current, target) && !nodeBelongs(triggerRef.current, target)) {\n        fireNonCancelableEvent(onDropdownClose);\n      }\n    };\n    window.addEventListener('click', clickListener, true);\n    return () => {\n      window.removeEventListener('click', clickListener, true);\n    };\n  }, [open, onDropdownClose]);\n  // sync dropdown position on scroll and resize\n  useLayoutEffect(() => {\n    if (!expandToViewport || !open) {\n      return;\n    }\n    const updateDropdownPosition = () => {\n      if (triggerRef.current && dropdownRef.current && verticalContainerRef.current) {\n        const triggerRect = getLogicalBoundingClientRect(triggerRef.current);\n        const target = dropdownRef.current;\n        if (fixedPosition.current) {\n          if (fixedPosition.current.dropBlockStart) {\n            dropdownRef.current.style.insetBlockEnd = `calc(100% - ${triggerRect.insetBlockStart}px)`;\n          } else {\n            target.style.insetBlockStart = `${triggerRect.insetBlockEnd}px`;\n          }\n          if (fixedPosition.current.dropInlineStart) {\n            target.style.insetInlineStart = `calc(${triggerRect.insetInlineEnd}px - ${fixedPosition.current.inlineSize})`;\n          } else {\n            target.style.insetInlineStart = `${triggerRect.insetInlineStart}px`;\n          }\n        }\n      }\n    };\n    updateDropdownPosition();\n    window.addEventListener('scroll', updateDropdownPosition, true);\n    window.addEventListener('resize', updateDropdownPosition, true);\n    return () => {\n      window.removeEventListener('scroll', updateDropdownPosition, true);\n      window.removeEventListener('resize', updateDropdownPosition, true);\n    };\n  }, [open, expandToViewport]);\n  const referrerId = useUniqueId();\n  return React.createElement(\"div\", {\n    className: clsx(styles.root, interior && styles.interior, stretchTriggerHeight && styles['stretch-trigger-height']),\n    ref: wrapperRef,\n    onFocus: focusHandler,\n    onBlur: blurHandler\n  }, React.createElement(\"div\", {\n    id: referrerId,\n    className: clsx(stretchTriggerHeight && styles['stretch-trigger-height']),\n    ref: triggerRef\n  }, trigger), React.createElement(TabTrap, {\n    focusNextCallback: () => {\n      var _a;\n      return dropdownRef.current && ((_a = getFirstFocusable(dropdownRef.current)) === null || _a === void 0 ? void 0 : _a.focus());\n    },\n    disabled: !open || !loopFocus\n  }), React.createElement(DropdownContainer, {\n    triggerRef: triggerRef,\n    renderWithPortal: expandToViewport && !interior,\n    id: dropdownId,\n    referrerId: referrerId,\n    open: open\n  }, React.createElement(Transition, {\n    in: open !== null && open !== void 0 ? open : false,\n    exit: false\n  }, (state, ref) => React.createElement(\"div\", {\n    ref: dropdownContainerRef\n  }, React.createElement(TabTrap, {\n    focusNextCallback: () => {\n      var _a;\n      return triggerRef.current && ((_a = getLastFocusable(triggerRef.current)) === null || _a === void 0 ? void 0 : _a.focus());\n    },\n    disabled: !open || !loopFocus\n  }), React.createElement(TransitionContent, {\n    state: state,\n    transitionRef: ref,\n    dropdownClasses: dropdownClasses,\n    open: open,\n    stretchWidth: stretchWidth,\n    interior: interior,\n    header: header,\n    expandToViewport: expandToViewport,\n    stretchBeyondTriggerWidth: stretchBeyondTriggerWidth,\n    footer: footer,\n    onMouseDown: onMouseDown,\n    isRefresh: isRefresh,\n    dropdownRef: dropdownRef,\n    verticalContainerRef: verticalContainerRef,\n    position: position,\n    id: dropdownContentId,\n    role: dropdownContentRole,\n    ariaLabelledby: ariaLabelledby,\n    ariaDescribedby: ariaDescribedby\n  }, children), React.createElement(TabTrap, {\n    focusNextCallback: () => {\n      var _a;\n      return triggerRef.current && ((_a = getFirstFocusable(triggerRef.current)) === null || _a === void 0 ? void 0 : _a.focus());\n    },\n    disabled: !open || !loopFocus\n  })))));\n};\nconst isInteriorPosition = position => position.insetBlockEnd !== undefined;\nexport default Dropdown;","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useRef","useState","createPortal","clsx","useResizeObserver","getLogicalBoundingClientRect","fireNonCancelableEvent","customCssProps","useMergeRefs","useMobile","usePortalModeClasses","useUniqueId","useVisualRefresh","nodeBelongs","getFirstFocusable","getLastFocusable","TabTrap","Transition","DropdownContextProvider","calculatePosition","defaultMaxDropdownWidth","hasEnoughSpaceToStretchBeyondTriggerWidth","styles","DropdownContainer","triggerRef","children","renderWithPortal","id","referrerId","open","createElement","Fragment","currentDocument","_b","_a","current","ownerDocument","document","body","TransitionContent","state","transitionRef","dropdownClasses","stretchWidth","interior","isRefresh","dropdownRef","verticalContainerRef","expandToViewport","stretchBeyondTriggerWidth","header","footer","position","onMouseDown","role","ariaLabelledby","ariaDescribedby","contentRef","className","dropdown","refresh","ref","style","dropdownDefaultMaxWidth","Dropdown","trigger","onDropdownClose","dropdownId","stretchTriggerHeight","stretchHeight","stretchToTriggerWidth","preferCenter","minWidth","scrollable","loopFocus","onFocus","onBlur","contentKey","dropdownContentId","dropdownContentRole","wrapperRef","dropdownContainerRef","fixedPosition","setPosition","isMobile","setDropdownPosition","triggerBox","target","verticalContainer","entireWidth","maxBlockSize","parseInt","blockSize","classList","add","inlineSize","dropBlockStart","insetBlockEnd","remove","dropInlineStart","insetInlineStart","top","insetBlockStart","bottom","right","left","isInteriorPosition","isOutsideDropdown","element","focusHandler","event","relatedTarget","blurHandler","fixStretching","classNameToRemove","contains","triggerElement","dropdownElement","desiredMinWidth","onDropdownOpen","nowrap","window","addEventListener","timeoutId","setTimeout","removeEventListener","clearTimeout","clickListener","composedPath","updateDropdownPosition","triggerRect","insetInlineEnd","root","focusNextCallback","focus","disabled","in","exit","undefined"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/components/dropdown/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport clsx from 'clsx';\n\nimport { useResizeObserver } from '@cloudscape-design/component-toolkit/internal';\nimport { getLogicalBoundingClientRect } from '@cloudscape-design/component-toolkit/internal';\n\nimport { fireNonCancelableEvent } from '../../events';\nimport customCssProps from '../../generated/custom-css-properties';\nimport { useMergeRefs } from '../../hooks/use-merge-refs';\nimport { useMobile } from '../../hooks/use-mobile';\nimport { usePortalModeClasses } from '../../hooks/use-portal-mode-classes';\nimport { useUniqueId } from '../../hooks/use-unique-id/index.js';\nimport { useVisualRefresh } from '../../hooks/use-visual-mode';\nimport { nodeBelongs } from '../../utils/node-belongs';\nimport { getFirstFocusable, getLastFocusable } from '../focus-lock/utils.js';\nimport TabTrap from '../tab-trap/index.js';\nimport { Transition, TransitionStatus } from '../transition';\nimport { DropdownContextProvider, DropdownContextProviderProps } from './context';\nimport {\n  calculatePosition,\n  defaultMaxDropdownWidth,\n  DropdownPosition,\n  hasEnoughSpaceToStretchBeyondTriggerWidth,\n  InteriorDropdownPosition,\n} from './dropdown-fit-handler';\nimport { DropdownProps } from './interfaces';\n\nimport styles from './styles.css.js';\n\ninterface DropdownContainerProps {\n  triggerRef: React.RefObject<HTMLElement>;\n  children?: React.ReactNode;\n  renderWithPortal: boolean;\n  id?: string;\n  referrerId?: string;\n  open?: boolean;\n}\n\nconst DropdownContainer = ({\n  triggerRef,\n  children,\n  renderWithPortal,\n  id,\n  referrerId,\n  open,\n}: DropdownContainerProps) => {\n  if (!renderWithPortal) {\n    return <>{children}</>;\n  }\n  if (!open) {\n    return null;\n  }\n  const currentDocument = triggerRef.current?.ownerDocument ?? document;\n  return createPortal(\n    <div id={id} data-awsui-referrer-id={referrerId}>\n      {children}\n    </div>,\n    currentDocument.body\n  );\n};\n\ninterface TransitionContentProps {\n  state: TransitionStatus;\n  transitionRef: React.MutableRefObject<any>;\n  dropdownClasses: string;\n  stretchWidth: boolean;\n  interior: boolean;\n  isRefresh: boolean;\n  dropdownRef: React.RefObject<HTMLDivElement>;\n  verticalContainerRef: React.RefObject<HTMLDivElement>;\n  expandToViewport?: boolean;\n  stretchBeyondTriggerWidth?: boolean;\n  header?: React.ReactNode;\n  children?: React.ReactNode;\n  footer?: React.ReactNode;\n  position?: DropdownContextProviderProps['position'];\n  open?: boolean;\n  onMouseDown?: React.MouseEventHandler<Element>;\n  id?: string;\n  role?: string;\n  ariaLabelledby?: string;\n  ariaDescribedby?: string;\n}\n\nconst TransitionContent = ({\n  state,\n  transitionRef,\n  dropdownClasses,\n  stretchWidth,\n  interior,\n  isRefresh,\n  dropdownRef,\n  verticalContainerRef,\n  expandToViewport,\n  stretchBeyondTriggerWidth,\n  header,\n  children,\n  footer,\n  position,\n  open,\n  onMouseDown,\n  id,\n  role,\n  ariaLabelledby,\n  ariaDescribedby,\n}: TransitionContentProps) => {\n  const contentRef = useMergeRefs(dropdownRef, transitionRef);\n  return (\n    <div\n      className={clsx(styles.dropdown, dropdownClasses, {\n        [styles.open]: open,\n        [styles['with-limited-width']]: !stretchWidth,\n        [styles['hide-block-border']]: stretchWidth,\n        [styles.interior]: interior,\n        [styles.refresh]: isRefresh,\n        [styles['use-portal']]: expandToViewport && !interior,\n        [styles['stretch-beyond-trigger-width']]: stretchBeyondTriggerWidth,\n      })}\n      ref={contentRef}\n      id={id}\n      role={role}\n      aria-labelledby={ariaLabelledby}\n      aria-describedby={ariaDescribedby}\n      data-open={open}\n      data-animating={state !== 'exited'}\n      aria-hidden={!open}\n      style={\n        stretchBeyondTriggerWidth ? { [customCssProps.dropdownDefaultMaxWidth]: `${defaultMaxDropdownWidth}px` } : {}\n      }\n      onMouseDown={onMouseDown}\n    >\n      <div\n        className={clsx(\n          styles['dropdown-content-wrapper'],\n          !header && !children && styles['is-empty'],\n          isRefresh && styles.refresh\n        )}\n      >\n        <div ref={verticalContainerRef} className={styles['dropdown-content']}>\n          <DropdownContextProvider position={position}>\n            {header}\n            {children}\n            {footer}\n          </DropdownContextProvider>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Dropdown = ({\n  children,\n  trigger,\n  open,\n  onDropdownClose,\n  onMouseDown,\n  header,\n  footer,\n  dropdownId,\n  stretchTriggerHeight = false,\n  stretchWidth = true,\n  stretchHeight = false,\n  stretchToTriggerWidth = true,\n  stretchBeyondTriggerWidth = false,\n  expandToViewport = false,\n  preferCenter = false,\n  interior = false,\n  minWidth,\n  scrollable = true,\n  loopFocus = expandToViewport,\n  onFocus,\n  onBlur,\n  contentKey,\n  dropdownContentId,\n  dropdownContentRole,\n  ariaLabelledby,\n  ariaDescribedby,\n}: DropdownProps) => {\n  const wrapperRef = useRef<HTMLDivElement | null>(null);\n  const triggerRef = useRef<HTMLDivElement | null>(null);\n  const dropdownRef = useRef<HTMLDivElement | null>(null);\n  const dropdownContainerRef = useRef<HTMLDivElement | null>(null);\n  const verticalContainerRef = useRef<HTMLDivElement>(null);\n  // To keep track of the initial position (drop up/down) which is kept the same during fixed repositioning\n  const fixedPosition = useRef<DropdownPosition | null>(null);\n\n  const isRefresh = useVisualRefresh();\n\n  const dropdownClasses = usePortalModeClasses(triggerRef);\n  const [position, setPosition] = useState<DropdownContextProviderProps['position']>('bottom-right');\n\n  const isMobile = useMobile();\n\n  const setDropdownPosition = (\n    position: DropdownPosition | InteriorDropdownPosition,\n    triggerBox: DOMRect,\n    target: HTMLDivElement,\n    verticalContainer: HTMLDivElement\n  ) => {\n    const entireWidth = !interior && stretchWidth;\n    if (!stretchWidth) {\n      // 1px offset for dropdowns where the dropdown itself needs a border, rather than on the items\n      verticalContainer.style.maxBlockSize = `${parseInt(position.blockSize) + 1}px`;\n    } else {\n      verticalContainer.style.maxBlockSize = position.blockSize;\n    }\n\n    if (entireWidth && !expandToViewport) {\n      if (stretchToTriggerWidth) {\n        target.classList.add(styles['occupy-entire-width']);\n      }\n    } else {\n      target.style.inlineSize = position.inlineSize;\n    }\n\n    // Using styles for main dropdown to adjust its position as preferred alternative\n    if (position.dropBlockStart && !interior) {\n      target.classList.add(styles['dropdown-drop-up']);\n      if (!expandToViewport) {\n        target.style.insetBlockEnd = '100%';\n      }\n    } else {\n      target.classList.remove(styles['dropdown-drop-up']);\n    }\n    target.classList.add(position.dropInlineStart ? styles['dropdown-drop-left'] : styles['dropdown-drop-right']);\n\n    if (position.insetInlineStart && position.insetInlineStart !== 'auto') {\n      target.style.insetInlineStart = position.insetInlineStart;\n    }\n\n    // Position normal overflow dropdowns with fixed positioning relative to viewport\n    if (expandToViewport && !interior) {\n      target.style.position = 'fixed';\n      if (position.dropBlockStart) {\n        target.style.insetBlockEnd = `calc(100% - ${triggerBox.top}px)`;\n      } else {\n        target.style.insetBlockStart = `${triggerBox.bottom}px`;\n      }\n      if (position.dropInlineStart) {\n        target.style.insetInlineStart = `calc(${triggerBox.right}px - ${position.inlineSize})`;\n      } else {\n        target.style.insetInlineStart = `${triggerBox.left}px`;\n      }\n      // Keep track of the initial dropdown position and direction.\n      // Dropdown direction doesn't need to change as the user scrolls, just needs to stay attached to the trigger.\n      fixedPosition.current = position;\n      return;\n    }\n\n    // For an interior dropdown (the fly out) we need exact values for positioning\n    // and classes are not enough\n    // usage of relative position is impossible due to overwrite of overflow-x\n    if (interior && isInteriorPosition(position)) {\n      if (position.dropBlockStart) {\n        target.style.insetBlockEnd = position.insetBlockEnd;\n      } else {\n        target.style.insetBlockStart = position.insetBlockStart;\n      }\n      target.style.insetInlineStart = position.insetInlineStart;\n    }\n\n    if (position.dropBlockStart && position.dropInlineStart) {\n      setPosition('top-left');\n    } else if (position.dropBlockStart) {\n      setPosition('top-right');\n    } else if (position.dropInlineStart) {\n      setPosition('bottom-left');\n    } else {\n      setPosition('bottom-right');\n    }\n  };\n\n  const isOutsideDropdown = (element: Element) =>\n    (!wrapperRef.current || !nodeBelongs(wrapperRef.current, element)) &&\n    (!dropdownContainerRef.current || !nodeBelongs(dropdownContainerRef.current, element));\n\n  const focusHandler = (event: React.FocusEvent) => {\n    if (!event.relatedTarget || isOutsideDropdown(event.relatedTarget)) {\n      fireNonCancelableEvent(onFocus, event);\n    }\n  };\n\n  const blurHandler = (event: React.FocusEvent) => {\n    if (!event.relatedTarget || isOutsideDropdown(event.relatedTarget)) {\n      fireNonCancelableEvent(onBlur, event);\n    }\n  };\n\n  // Prevent the dropdown width from stretching beyond the trigger width\n  // if that is going to cause the dropdown to be cropped because of overflow\n  const fixStretching = () => {\n    const classNameToRemove = styles['stretch-beyond-trigger-width'];\n    if (\n      open &&\n      stretchBeyondTriggerWidth &&\n      dropdownRef.current &&\n      triggerRef.current &&\n      dropdownRef.current.classList.contains(classNameToRemove) &&\n      !hasEnoughSpaceToStretchBeyondTriggerWidth({\n        triggerElement: triggerRef.current,\n        dropdownElement: dropdownRef.current,\n        desiredMinWidth: minWidth,\n        expandToViewport,\n        stretchWidth,\n        stretchHeight,\n        isMobile,\n      })\n    ) {\n      dropdownRef.current.classList.remove(classNameToRemove);\n    }\n  };\n\n  useResizeObserver(() => dropdownRef.current, fixStretching);\n\n  useLayoutEffect(() => {\n    const onDropdownOpen = () => {\n      if (open && dropdownRef.current && triggerRef.current && verticalContainerRef.current) {\n        // calculate scroll width only for dropdowns that has a scrollbar and ignore it for date picker components\n        if (scrollable) {\n          dropdownRef.current.classList.add(styles.nowrap);\n        }\n        setDropdownPosition(\n          ...calculatePosition(\n            dropdownRef.current,\n            triggerRef.current,\n            verticalContainerRef.current,\n            interior,\n            expandToViewport,\n            preferCenter,\n            stretchWidth,\n            stretchHeight,\n            isMobile,\n            minWidth,\n            stretchBeyondTriggerWidth\n          ),\n          dropdownRef.current,\n          verticalContainerRef.current\n        );\n        if (scrollable) {\n          dropdownRef.current.classList.remove(styles.nowrap);\n        }\n      }\n    };\n    onDropdownOpen();\n\n    if (open) {\n      // window may scroll when dropdown opens, for example when soft keyboard shows up\n      window.addEventListener('scroll', onDropdownOpen);\n      // only listen to window scroll within very short time after the dropdown opens\n      // do not want to interfere dropdown position on scroll afterwards\n      const timeoutId = setTimeout(() => {\n        window.removeEventListener('scroll', onDropdownOpen);\n      }, 500);\n\n      return () => {\n        clearTimeout(timeoutId);\n        window.removeEventListener('scroll', onDropdownOpen);\n      };\n    }\n    // See AWSUI-13040\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open, dropdownRef, triggerRef, verticalContainerRef, interior, stretchWidth, isMobile, contentKey]);\n\n  // subscribe to outside click\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n    const clickListener = (event: MouseEvent) => {\n      // Since the listener is registered on the window, `event.target` will incorrectly point at the\n      // shadow root if the component is rendered inside shadow DOM.\n      const target = event.composedPath ? event.composedPath()[0] : event.target;\n      if (!nodeBelongs(dropdownRef.current, target) && !nodeBelongs(triggerRef.current, target)) {\n        fireNonCancelableEvent(onDropdownClose);\n      }\n    };\n    window.addEventListener('click', clickListener, true);\n\n    return () => {\n      window.removeEventListener('click', clickListener, true);\n    };\n  }, [open, onDropdownClose]);\n\n  // sync dropdown position on scroll and resize\n  useLayoutEffect(() => {\n    if (!expandToViewport || !open) {\n      return;\n    }\n    const updateDropdownPosition = () => {\n      if (triggerRef.current && dropdownRef.current && verticalContainerRef.current) {\n        const triggerRect = getLogicalBoundingClientRect(triggerRef.current);\n        const target = dropdownRef.current;\n        if (fixedPosition.current) {\n          if (fixedPosition.current.dropBlockStart) {\n            dropdownRef.current.style.insetBlockEnd = `calc(100% - ${triggerRect.insetBlockStart}px)`;\n          } else {\n            target.style.insetBlockStart = `${triggerRect.insetBlockEnd}px`;\n          }\n          if (fixedPosition.current.dropInlineStart) {\n            target.style.insetInlineStart = `calc(${triggerRect.insetInlineEnd}px - ${fixedPosition.current.inlineSize})`;\n          } else {\n            target.style.insetInlineStart = `${triggerRect.insetInlineStart}px`;\n          }\n        }\n      }\n    };\n\n    updateDropdownPosition();\n\n    window.addEventListener('scroll', updateDropdownPosition, true);\n    window.addEventListener('resize', updateDropdownPosition, true);\n    return () => {\n      window.removeEventListener('scroll', updateDropdownPosition, true);\n      window.removeEventListener('resize', updateDropdownPosition, true);\n    };\n  }, [open, expandToViewport]);\n\n  const referrerId = useUniqueId();\n\n  return (\n    <div\n      className={clsx(\n        styles.root,\n        interior && styles.interior,\n        stretchTriggerHeight && styles['stretch-trigger-height']\n      )}\n      ref={wrapperRef}\n      onFocus={focusHandler}\n      onBlur={blurHandler}\n    >\n      <div id={referrerId} className={clsx(stretchTriggerHeight && styles['stretch-trigger-height'])} ref={triggerRef}>\n        {trigger}\n      </div>\n\n      <TabTrap\n        focusNextCallback={() => dropdownRef.current && getFirstFocusable(dropdownRef.current)?.focus()}\n        disabled={!open || !loopFocus}\n      />\n\n      <DropdownContainer\n        triggerRef={triggerRef}\n        renderWithPortal={expandToViewport && !interior}\n        id={dropdownId}\n        referrerId={referrerId}\n        open={open}\n      >\n        <Transition in={open ?? false} exit={false}>\n          {(state, ref) => (\n            <div ref={dropdownContainerRef}>\n              <TabTrap\n                focusNextCallback={() => triggerRef.current && getLastFocusable(triggerRef.current)?.focus()}\n                disabled={!open || !loopFocus}\n              />\n\n              <TransitionContent\n                state={state}\n                transitionRef={ref}\n                dropdownClasses={dropdownClasses}\n                open={open}\n                stretchWidth={stretchWidth}\n                interior={interior}\n                header={header}\n                expandToViewport={expandToViewport}\n                stretchBeyondTriggerWidth={stretchBeyondTriggerWidth}\n                footer={footer}\n                onMouseDown={onMouseDown}\n                isRefresh={isRefresh}\n                dropdownRef={dropdownRef}\n                verticalContainerRef={verticalContainerRef}\n                position={position}\n                id={dropdownContentId}\n                role={dropdownContentRole}\n                ariaLabelledby={ariaLabelledby}\n                ariaDescribedby={ariaDescribedby}\n              >\n                {children}\n              </TransitionContent>\n\n              <TabTrap\n                focusNextCallback={() => triggerRef.current && getFirstFocusable(triggerRef.current)?.focus()}\n                disabled={!open || !loopFocus}\n              />\n            </div>\n          )}\n        </Transition>\n      </DropdownContainer>\n    </div>\n  );\n};\n\nconst isInteriorPosition = (\n  position: DropdownPosition | InteriorDropdownPosition\n): position is InteriorDropdownPosition => (position as InteriorDropdownPosition).insetBlockEnd !== undefined;\n\nexport default Dropdown;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}