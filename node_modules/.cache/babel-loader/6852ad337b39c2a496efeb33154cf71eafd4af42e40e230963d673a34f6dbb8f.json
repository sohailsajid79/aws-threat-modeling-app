{"ast":null,"code":"var _jsxFileName = \"/Users/sohailsajid/Desktop/threat-modeling-app/src/components/generic/Flow/index.tsx\",\n  _s2 = $RefreshSig$();\nimport { useCallback, useEffect, useState } from 'react';\nimport ReactFlow, { Controls, Background, addEdge, useEdgesState, useNodesState, ConnectionMode, Panel, useReactFlow, applyEdgeChanges, applyNodeChanges, MarkerType } from 'reactflow';\nimport styled from '@emotion/styled';\nimport Container from '@cloudscape-design/components/container';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { v4 } from 'uuid';\nimport 'reactflow/dist/style.css';\nimport ActorNode from './Nodes/ActorNode';\nimport DatastoreNode from './Nodes/DatastoreNode';\nimport ProcessNode from './Nodes/ProcessNode';\nimport TrustBoundaryNode from './Nodes/TrustBoundaryNode';\nimport NodeSelector from './Nodes/NodeSelector';\nimport BiDirectionalEdge from './Edges/BiDirectionalEdge';\nimport PropertiesPanel from './Properties/PropertiesPanel';\nimport SaveButton from './SaveButton/SaveButton';\nimport ZIndexChanger from './Nodes/ZIndexChanger';\nimport ThreatList from './Threats/ThreatList';\nimport { useFlowContext, useThreatsContext } from '../../../contexts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst edgeTypes = {\n  biDirectional: BiDirectionalEdge\n};\nconst nodeTypes = {\n  actor: ActorNode,\n  datastore: DatastoreNode,\n  process: ProcessNode,\n  trustBoundary: TrustBoundaryNode\n};\nlet s;\n(function (_s) {\n  const OuterContainer = _s.OuterContainer = styled.div`\n    height: 450px;\n    display: flex;\n    border: 1px solid #000;\n\n     svg.react-flow__edges {\n      z-index: 1 !important;\n     }\n  `;\n})(s || (s = {}));\nfunction Flow() {\n  _s2();\n  const {\n    zoomTo,\n    getZoom,\n    setViewport\n  } = useReactFlow();\n\n  // Save and restore state\n  const [rfInstance, setRfInstance] = useState(null);\n  const [saveState, setSaveState] = useState(true);\n  const [nodes, setNodes] = useNodesState([]);\n  const [edges, setEdges] = useEdgesState([]);\n  const {\n    flow,\n    setFlow\n  } = useFlowContext();\n  const onSave = useCallback(() => {\n    if (rfInstance) {\n      setFlow({\n        content: JSON.stringify(rfInstance.toObject())\n      });\n      setSaveState(true);\n    }\n  }, [rfInstance, setFlow]);\n  const restoreFlow = useCallback(async () => {\n    if (flow.content) {\n      const diagram = JSON.parse(flow.content || '{}');\n      const {\n        x = 0,\n        y = 0,\n        zoom = 1\n      } = diagram.viewport;\n      setNodes(diagram.nodes || []);\n      setEdges(diagram.edges || []);\n      setViewport({\n        x,\n        y,\n        zoom\n      });\n    }\n  }, [flow.content, setNodes, setEdges, setViewport]);\n  useEffect(() => {\n    restoreFlow().catch(console.error);\n  }, [flow.content, restoreFlow]);\n  const onInit = async instance => {\n    setRfInstance(instance);\n    await restoreFlow();\n  };\n\n  // Nodes and edges state\n  const [nodeDataValue, setNodeDataValue] = useState({});\n  const [selectedComponent, setSelectedComponent] = useState(null);\n  useEffect(() => {\n    if (!selectedComponent) {\n      // If this is the first node added to the flow, zoom out to prevent an implicit max zoom (of 4)\n      // this is probably another bug in react-flow that needs to be investigated and reported\n      if (nodes.length === 1 && getZoom() === 4) {\n        zoomTo(1);\n      }\n      return;\n    }\n    setEdges(eds => eds.map(edge => {\n      if (edge.id === (selectedComponent === null || selectedComponent === void 0 ? void 0 : selectedComponent.id)) {\n        edge.data = {\n          ...edge.data,\n          ...nodeDataValue\n        };\n      }\n      return edge;\n    }));\n    setNodes(nds => nds.map(node => {\n      if (node.id === (selectedComponent === null || selectedComponent === void 0 ? void 0 : selectedComponent.id)) {\n        node.data = {\n          ...node.data,\n          ...nodeDataValue\n        };\n      }\n      return node;\n    }));\n    setSaveState(false);\n  }, [selectedComponent, nodeDataValue, setNodes, setEdges, getZoom, zoomTo, nodes.length]);\n  const onNodesChange = useCallback(changes => {\n    setNodeDataValue({});\n    setNodes(oldNodes => applyNodeChanges(changes, oldNodes));\n    for (let selection of changes.filter(c => c.type === 'select' || c.type === 'position' && c.dragging === false || c.type === 'remove')) {\n      if (selection.selected || selection.dragging === false) {\n        setSelectedComponent(nodes.find(node => node.id === selection.id));\n      } else {\n        setSelectedComponent(null);\n      }\n    }\n    ;\n  }, [nodes, setNodes]);\n  const onEdgesChange = useCallback(changes => {\n    setNodeDataValue({});\n    setEdges(oldEdges => applyEdgeChanges(changes, oldEdges));\n    setSelectedComponent(null);\n    for (let selection of changes.filter(c => c.type === 'select')) {\n      if (selection.selected) {\n        setSelectedComponent(edges.find(edge => edge.id === selection.id));\n      } else {\n        setSelectedComponent(null);\n      }\n    }\n  }, [edges, setEdges]);\n  const onConnect = useCallback(params => {\n    const newEdge = {\n      ...params,\n      id: v4(),\n      type: 'biDirectional',\n      data: {\n        name: 'Data',\n        description: '',\n        outOfScope: false,\n        scopeReason: '',\n        dataTags: [],\n        techTags: [],\n        securityTags: [],\n        tags: [],\n        selectedThreats: []\n      }\n    };\n    setEdges(eds => addEdge(addEndMarker(newEdge), eds));\n    setNodeDataValue({});\n  }, [setEdges]);\n  const onAdd = useCallback(type => {\n    setNodes(nds => {\n      // Randomize position for new nodes using a position from -100 to 100\n      let x = Math.floor(Math.random() * 200) - 100;\n      let y = Math.floor(Math.random() * 200) - 100;\n      const newNode = {\n        id: v4(),\n        data: {\n          name: type,\n          description: '',\n          outOfScope: false,\n          scopeReason: '',\n          dataTags: [],\n          techTags: [],\n          securityTags: [],\n          tags: [],\n          selectedThreats: []\n        },\n        type,\n        position: {\n          x,\n          y\n        }\n      };\n      setSaveState(false);\n      return [...nds, newNode];\n    });\n  }, [setNodes]);\n  const onZIndexChange = useCallback(direction => {\n    setNodes(nds => {\n      const selectedNode = nds.find(node => node.id === (selectedComponent === null || selectedComponent === void 0 ? void 0 : selectedComponent.id));\n      if (!selectedNode) {\n        return nds;\n      }\n      const index = nds.indexOf(selectedNode);\n      const newIndex = direction === 'last' ? 0 : direction === 'down' ? index - 1 : direction === 'up' ? index + 1 : nds.length - 1;\n      const node = nds.splice(index, 1)[0];\n      nds.splice(newIndex, 0, node);\n      setSaveState(false);\n      return [...nds];\n    });\n  }, [setNodes, selectedComponent]);\n\n  // Threats state\n  const {\n    statementList\n  } = useThreatsContext();\n  const [threatList, setThreatList] = useState(statementList);\n  useEffect(() => {\n    // update list of threats panel\n    setThreatList(statementList);\n  }, [setThreatList, statementList]);\n  const addEndMarker = edge => ({\n    ...edge,\n    markerEnd: {\n      type: MarkerType.ArrowClosed,\n      width: 20,\n      height: 20,\n      color: '#b1b1b7'\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(SpaceBetween, {\n    direction: \"vertical\",\n    size: \"s\",\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      header: /*#__PURE__*/_jsxDEV(Header, {\n        actions: /*#__PURE__*/_jsxDEV(SaveButton, {\n          saveHandler: onSave,\n          saveState: saveState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 43\n        }, this),\n        children: \"Data flow diagram\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 26\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(s.OuterContainer, {\n        children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n          nodes: nodes,\n          onNodesChange: onNodesChange,\n          edges: edges,\n          onEdgesChange: onEdgesChange,\n          onConnect: onConnect,\n          edgeTypes: edgeTypes,\n          nodeTypes: nodeTypes,\n          minZoom: 0.2,\n          maxZoom: 4,\n          fitView: true,\n          connectionMode: ConnectionMode.Loose,\n          onInit: onInit,\n          children: [/*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Panel, {\n            position: \"top-left\",\n            children: /*#__PURE__*/_jsxDEV(NodeSelector, {\n              addCallback: onAdd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Panel, {\n            position: \"top-right\",\n            children: /*#__PURE__*/_jsxDEV(ZIndexChanger, {\n              addCallback: onZIndexChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      header: /*#__PURE__*/_jsxDEV(Header, {\n        children: \"Properties\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 26\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(PropertiesPanel, {\n        component: selectedComponent,\n        changeHandler: setNodeDataValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ThreatList, {\n      threats: threatList,\n      component: selectedComponent,\n      changeHandler: setNodeDataValue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n}\n_s2(Flow, \"Xhb5diI/A0eSYuXd3d+jZi4sh+E=\", false, function () {\n  return [useReactFlow, useNodesState, useEdgesState, useFlowContext, useThreatsContext];\n});\n_c = Flow;\nexport default Flow;\nvar _c;\n$RefreshReg$(_c, \"Flow\");","map":{"version":3,"names":["useCallback","useEffect","useState","ReactFlow","Controls","Background","addEdge","useEdgesState","useNodesState","ConnectionMode","Panel","useReactFlow","applyEdgeChanges","applyNodeChanges","MarkerType","styled","Container","Header","SpaceBetween","v4","ActorNode","DatastoreNode","ProcessNode","TrustBoundaryNode","NodeSelector","BiDirectionalEdge","PropertiesPanel","SaveButton","ZIndexChanger","ThreatList","useFlowContext","useThreatsContext","jsxDEV","_jsxDEV","edgeTypes","biDirectional","nodeTypes","actor","datastore","process","trustBoundary","s","_s","OuterContainer","div","Flow","_s2","zoomTo","getZoom","setViewport","rfInstance","setRfInstance","saveState","setSaveState","nodes","setNodes","edges","setEdges","flow","setFlow","onSave","content","JSON","stringify","toObject","restoreFlow","diagram","parse","x","y","zoom","viewport","catch","console","error","onInit","instance","nodeDataValue","setNodeDataValue","selectedComponent","setSelectedComponent","length","eds","map","edge","id","data","nds","node","onNodesChange","changes","oldNodes","selection","filter","c","type","dragging","selected","find","onEdgesChange","oldEdges","onConnect","params","newEdge","name","description","outOfScope","scopeReason","dataTags","techTags","securityTags","tags","selectedThreats","addEndMarker","onAdd","Math","floor","random","newNode","position","onZIndexChange","direction","selectedNode","index","indexOf","newIndex","splice","statementList","threatList","setThreatList","markerEnd","ArrowClosed","width","height","color","size","children","header","actions","saveHandler","fileName","_jsxFileName","lineNumber","columnNumber","minZoom","maxZoom","fitView","connectionMode","Loose","addCallback","component","changeHandler","threats","_c","$RefreshReg$"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/src/components/generic/Flow/index.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport ReactFlow, {\n  Controls,\n  Background,\n  addEdge,\n  useEdgesState,\n  useNodesState,\n  ConnectionMode,\n  Panel,\n  Node,\n  Edge,\n  ReactFlowInstance,\n  useReactFlow,\n  applyEdgeChanges,\n  applyNodeChanges,\n  MarkerType,\n} from 'reactflow';\nimport styled from '@emotion/styled';\nimport Container from '@cloudscape-design/components/container';\nimport Header from '@cloudscape-design/components/header';\nimport SpaceBetween from '@cloudscape-design/components/space-between';\nimport { v4 } from 'uuid';\nimport 'reactflow/dist/style.css';\n\nimport ActorNode from './Nodes/ActorNode';\nimport DatastoreNode from './Nodes/DatastoreNode';\nimport ProcessNode from './Nodes/ProcessNode';\nimport TrustBoundaryNode from './Nodes/TrustBoundaryNode';\nimport NodeSelector from './Nodes/NodeSelector';\n\nimport BiDirectionalEdge from './Edges/BiDirectionalEdge';\n\nimport PropertiesPanel from './Properties/PropertiesPanel';\nimport SaveButton from './SaveButton/SaveButton';\nimport ZIndexChanger from './Nodes/ZIndexChanger';\n\nimport ThreatList from './Threats/ThreatList';\n\nimport { useFlowContext, useThreatsContext } from '../../../contexts';\n\nconst edgeTypes = {\n  biDirectional: BiDirectionalEdge,\n};\n\nconst nodeTypes = {\n  actor: ActorNode,\n  datastore: DatastoreNode,\n  process: ProcessNode,\n  trustBoundary: TrustBoundaryNode,\n};\n\nnamespace s {\n  export const OuterContainer = styled.div`\n    height: 450px;\n    display: flex;\n    border: 1px solid #000;\n\n     svg.react-flow__edges {\n      z-index: 1 !important;\n     }\n  `;\n}\n\nfunction Flow() {\n  const { zoomTo, getZoom, setViewport } = useReactFlow();\n\n  // Save and restore state\n  const [rfInstance, setRfInstance] = useState<ReactFlowInstance<any, any> | null>(null);\n  const [saveState, setSaveState] = useState(true);\n  const [nodes, setNodes] = useNodesState([]);\n  const [edges, setEdges] = useEdgesState([]);\n\n  const { flow, setFlow } = useFlowContext();\n\n  const onSave = useCallback(() => {\n    if (rfInstance) {\n      setFlow({ content: JSON.stringify(rfInstance.toObject()) });\n      setSaveState(true);\n    }\n  }, [rfInstance, setFlow]);\n\n  const restoreFlow = useCallback(async () => {\n    if (flow.content) {\n      const diagram = JSON.parse(flow.content || '{}');\n      const { x = 0, y = 0, zoom = 1 } = diagram.viewport;\n      setNodes(diagram.nodes || []);\n      setEdges(diagram.edges || []);\n      setViewport({ x, y, zoom });\n    }\n  }, [flow.content, setNodes, setEdges, setViewport]);\n\n  useEffect(() => {\n    restoreFlow().catch(console.error);\n  }, [flow.content, restoreFlow]);\n\n  const onInit = async (instance) => {\n    setRfInstance(instance);\n    await restoreFlow();\n  };\n\n  // Nodes and edges state\n  const [nodeDataValue, setNodeDataValue] = useState({});\n  const [selectedComponent, setSelectedComponent] = useState<Node | Edge | null>(null);\n\n  useEffect(() => {\n    if (!selectedComponent) {\n      // If this is the first node added to the flow, zoom out to prevent an implicit max zoom (of 4)\n      // this is probably another bug in react-flow that needs to be investigated and reported\n      if (nodes.length === 1 && getZoom() === 4) {\n        zoomTo(1);\n      }\n      return;\n    }\n\n    setEdges((eds) =>\n      eds.map((edge) => {\n        if (edge.id === selectedComponent?.id) {\n          edge.data = { ...edge.data, ...nodeDataValue };\n        }\n        return edge;\n      }));\n    setNodes((nds) =>\n      nds.map((node) => {\n        if (node.id === selectedComponent?.id) {\n          node.data = { ...node.data, ...nodeDataValue };\n        }\n        return node;\n      }));\n    setSaveState(false);\n  }, [selectedComponent, nodeDataValue, setNodes, setEdges, getZoom, zoomTo, nodes.length]);\n\n  const onNodesChange = useCallback(\n    (changes) => {\n      setNodeDataValue({});\n      setNodes((oldNodes) => applyNodeChanges(changes, oldNodes));\n      for (let selection of changes.filter(c => c.type === 'select' || (c.type === 'position' && c.dragging === false) || c.type ==='remove')) {\n        if (selection.selected || selection.dragging === false) {\n          setSelectedComponent(nodes.find((node) => node.id === selection.id) as Node | null);\n        } else {\n          setSelectedComponent(null);\n        }\n      };\n    },\n    [nodes, setNodes],\n  );\n\n  const onEdgesChange = useCallback(\n    (changes) => {\n      setNodeDataValue({});\n      setEdges((oldEdges) => applyEdgeChanges(changes, oldEdges));\n      setSelectedComponent(null);\n      for (let selection of changes.filter(c => c.type === 'select')) {\n        if (selection.selected) {\n          setSelectedComponent(edges.find((edge) => edge.id === selection.id) as Edge | null);\n        } else {\n          setSelectedComponent(null);\n        }\n      }\n    },\n    [edges, setEdges],\n  );\n\n  const onConnect = useCallback(\n    (params) => {\n      const newEdge =\n      {\n        ...params,\n        id: v4(),\n        type: 'biDirectional',\n        data: {\n          name: 'Data',\n          description: '',\n          outOfScope: false,\n          scopeReason: '',\n          dataTags: [],\n          techTags: [],\n          securityTags: [],\n          tags: [],\n          selectedThreats: [],\n        },\n      };\n      setEdges((eds) => addEdge(addEndMarker(newEdge), eds));\n      setNodeDataValue({});\n    }, [setEdges],\n  );\n\n  const onAdd = useCallback((type: string) => {\n    setNodes((nds) => {\n      // Randomize position for new nodes using a position from -100 to 100\n      let x = Math.floor(Math.random() * 200) - 100;\n      let y = Math.floor(Math.random() * 200) - 100;\n\n      const newNode = {\n        id: v4(),\n        data: {\n          name: type,\n          description: '',\n          outOfScope: false,\n          scopeReason: '',\n          dataTags: [],\n          techTags: [],\n          securityTags: [],\n          tags: [],\n          selectedThreats: [],\n        },\n        type,\n        position: { x, y },\n      };\n      setSaveState(false);\n      return [...nds, newNode];\n    });\n  }, [setNodes]);\n\n  const onZIndexChange = useCallback((direction: string) => {\n    setNodes((nds) => {\n      const selectedNode = nds.find((node) => node.id === selectedComponent?.id);\n      if (!selectedNode) {\n        return nds;\n      }\n      const index = nds.indexOf(selectedNode);\n      const newIndex = direction === 'last' ? 0 : direction === 'down' ? index - 1 : direction === 'up' ? index + 1 : nds.length - 1;\n      const node = nds.splice(index, 1)[0];\n      nds.splice(newIndex, 0, node);\n      setSaveState(false);\n      return [...nds];\n    });\n  }, [setNodes, selectedComponent]);\n\n  // Threats state\n  const { statementList } = useThreatsContext();\n  const [threatList, setThreatList] = useState(statementList);\n\n  useEffect(() => { // update list of threats panel\n    setThreatList(statementList);\n  }, [setThreatList, statementList]);\n\n  const addEndMarker = (edge) => ({\n    ...edge,\n    markerEnd: {\n      type: MarkerType.ArrowClosed,\n      width: 20,\n      height: 20,\n      color: '#b1b1b7',\n    },\n  });\n\n  return (\n    <SpaceBetween direction=\"vertical\" size=\"s\">\n      <Container header={<Header actions={<SaveButton saveHandler={onSave} saveState={saveState} />}>Data flow diagram</Header>}>\n        <s.OuterContainer>\n          <ReactFlow\n            nodes={nodes}\n            onNodesChange={onNodesChange}\n            edges={edges}\n            onEdgesChange={onEdgesChange}\n            onConnect={onConnect}\n            edgeTypes={edgeTypes}\n            nodeTypes={nodeTypes}\n            minZoom={0.2}\n            maxZoom={4}\n            fitView\n            connectionMode={ConnectionMode.Loose}\n            onInit={onInit}\n          >\n            <Background />\n            <Controls />\n            <Panel position=\"top-left\"><NodeSelector addCallback={onAdd} /></Panel>\n            <Panel position=\"top-right\"><ZIndexChanger addCallback={onZIndexChange} /></Panel>\n          </ReactFlow>\n        </s.OuterContainer>\n      </Container>\n      <Container header={<Header>Properties</Header>}>\n        <PropertiesPanel component={selectedComponent} changeHandler={setNodeDataValue} />\n      </Container>\n      <ThreatList\n        threats={threatList}\n        component={selectedComponent}\n        changeHandler={setNodeDataValue} />\n    </SpaceBetween>\n  );\n}\n\nexport default Flow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}