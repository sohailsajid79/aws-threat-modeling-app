{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { InternalButton } from '../button/internal';\nimport FocusLock from '../internal/components/focus-lock';\nimport { KeyCode } from '../internal/keycode';\nimport { ResizableBox } from './resizable-box';\nimport { getStatusButtonId } from './util';\nimport styles from './styles.css.js';\nconst ANNOTATION_ITEM_HEIGHT = 31;\nconst PANE_ANNOTATIONS_PADDING = 12;\nconst MIN_HEIGHT = 3 * ANNOTATION_ITEM_HEIGHT + 2 * PANE_ANNOTATIONS_PADDING;\nexport const Pane = _ref => {\n  let {\n    id,\n    paneStatus,\n    visible,\n    annotations,\n    highlighted,\n    onClose,\n    onAnnotationClick,\n    onAnnotationClear,\n    cursorPositionLabel,\n    closeButtonAriaLabel\n  } = _ref;\n  const [paneHeight, setPaneHeight] = useState(MIN_HEIGHT);\n  const listRef = useRef(null);\n  useEffect(() => {\n    var _a;\n    if (!highlighted) {\n      return;\n    }\n    const {\n      row,\n      column\n    } = highlighted;\n    const highlightedAnnotationIndex = annotations.indexOf(annotations.filter(a => a.row === row && a.column === column)[0]);\n    if (highlightedAnnotationIndex > -1) {\n      const errorItem = (_a = listRef.current) === null || _a === void 0 ? void 0 : _a.children[highlightedAnnotationIndex];\n      errorItem === null || errorItem === void 0 ? void 0 : errorItem.focus();\n    }\n  }, [highlighted, annotations]);\n  const onItemClick = annotation => {\n    onAnnotationClick(annotation);\n  };\n  const onItemKeyDown = (annotation, event) => {\n    if (event.keyCode === KeyCode.enter || event.keyCode === KeyCode.space) {\n      event.preventDefault();\n      onAnnotationClick(annotation);\n    }\n  };\n  const onEscKeyDown = event => {\n    if (event.keyCode === KeyCode.escape) {\n      event.preventDefault();\n      onClose();\n    }\n  };\n  const ariaLabelledBy = getStatusButtonId({\n    paneId: id,\n    paneStatus: paneStatus\n  });\n  if (!visible) {\n    return null;\n  }\n  return React.createElement(\"div\", {\n    id: id,\n    className: styles.pane,\n    onKeyDown: onEscKeyDown,\n    role: \"tabpanel\",\n    \"aria-labelledby\": ariaLabelledBy\n  }, React.createElement(ResizableBox, {\n    height: paneHeight,\n    minHeight: MIN_HEIGHT,\n    onResize: newHeight => setPaneHeight(newHeight)\n  }, React.createElement(FocusLock, {\n    className: styles['focus-lock'],\n    autoFocus: true,\n    restoreFocus: true\n  }, React.createElement(\"div\", {\n    className: styles.pane__list,\n    tabIndex: -1\n  }, React.createElement(\"table\", {\n    className: styles.pane__table,\n    role: \"presentation\"\n  }, React.createElement(\"colgroup\", null, React.createElement(\"col\", {\n    style: {\n      width: 1\n    } /* shrink to fit content */\n  }), React.createElement(\"col\", {\n    style: {\n      width: 'auto'\n    }\n  })), React.createElement(\"tbody\", {\n    ref: listRef\n  }, annotations.map((annotation, i) => {\n    var _a;\n    return React.createElement(\"tr\", {\n      key: i,\n      role: \"link\",\n      className: styles.pane__item,\n      onMouseOver: onAnnotationClear,\n      onClick: onItemClick.bind(null, annotation),\n      onKeyDown: onItemKeyDown.bind(null, annotation),\n      tabIndex: 0\n    }, React.createElement(\"td\", {\n      className: clsx(styles.pane__location, styles.pane__cell),\n      tabIndex: -1\n    }, (_a = cursorPositionLabel === null || cursorPositionLabel === void 0 ? void 0 : cursorPositionLabel((annotation.row || 0) + 1, (annotation.column || 0) + 1)) !== null && _a !== void 0 ? _a : ''), React.createElement(\"td\", {\n      className: clsx(styles.pane__description, styles.pane__cell),\n      tabIndex: -1\n    }, annotation.text));\n  })))), React.createElement(\"div\", {\n    className: styles['pane__close-container']\n  }, React.createElement(InternalButton, {\n    formAction: \"none\",\n    variant: \"icon\",\n    iconName: \"close\",\n    onClick: onClose,\n    ariaLabel: closeButtonAriaLabel\n  })))));\n};","map":{"version":3,"names":["React","useEffect","useRef","useState","clsx","InternalButton","FocusLock","KeyCode","ResizableBox","getStatusButtonId","styles","ANNOTATION_ITEM_HEIGHT","PANE_ANNOTATIONS_PADDING","MIN_HEIGHT","Pane","_ref","id","paneStatus","visible","annotations","highlighted","onClose","onAnnotationClick","onAnnotationClear","cursorPositionLabel","closeButtonAriaLabel","paneHeight","setPaneHeight","listRef","row","column","highlightedAnnotationIndex","indexOf","filter","a","errorItem","_a","current","children","focus","onItemClick","annotation","onItemKeyDown","event","keyCode","enter","space","preventDefault","onEscKeyDown","escape","ariaLabelledBy","paneId","createElement","className","pane","onKeyDown","role","height","minHeight","onResize","newHeight","autoFocus","restoreFocus","pane__list","tabIndex","pane__table","style","width","ref","map","i","key","pane__item","onMouseOver","onClick","bind","pane__location","pane__cell","pane__description","text","formAction","variant","iconName","ariaLabel"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/code-editor/pane.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Ace } from 'ace-builds';\nimport clsx from 'clsx';\n\nimport { InternalButton } from '../button/internal';\nimport FocusLock from '../internal/components/focus-lock';\nimport { KeyCode } from '../internal/keycode';\nimport { ResizableBox } from './resizable-box';\nimport { getStatusButtonId, PaneStatus } from './util';\n\nimport styles from './styles.css.js';\n\nconst ANNOTATION_ITEM_HEIGHT = 31;\nconst PANE_ANNOTATIONS_PADDING = 12;\nconst MIN_HEIGHT = 3 * ANNOTATION_ITEM_HEIGHT + 2 * PANE_ANNOTATIONS_PADDING;\n\nexport interface PaneProps {\n  id: string;\n  paneStatus: PaneStatus;\n\n  visible: boolean;\n  annotations: Ace.Annotation[];\n  highlighted?: Ace.Annotation;\n\n  cursorPositionLabel?: (row: number, column: number) => string;\n  closeButtonAriaLabel?: string;\n\n  onClose: () => void;\n  onAnnotationClick: (annotation: Ace.Annotation) => void;\n  onAnnotationClear: () => void;\n}\n\nexport const Pane = ({\n  id,\n  paneStatus,\n  visible,\n  annotations,\n  highlighted,\n  onClose,\n  onAnnotationClick,\n  onAnnotationClear,\n  cursorPositionLabel,\n  closeButtonAriaLabel,\n}: PaneProps) => {\n  const [paneHeight, setPaneHeight] = useState(MIN_HEIGHT);\n  const listRef = useRef<HTMLTableSectionElement>(null);\n\n  useEffect(() => {\n    if (!highlighted) {\n      return;\n    }\n    const { row, column } = highlighted;\n    const highlightedAnnotationIndex = annotations.indexOf(\n      annotations.filter(a => a.row === row && a.column === column)[0]\n    );\n\n    if (highlightedAnnotationIndex > -1) {\n      const errorItem = listRef.current?.children[highlightedAnnotationIndex] as HTMLElement | undefined;\n      errorItem?.focus();\n    }\n  }, [highlighted, annotations]);\n\n  const onItemClick = (annotation: Ace.Annotation) => {\n    onAnnotationClick(annotation);\n  };\n\n  const onItemKeyDown = (annotation: Ace.Annotation, event: React.KeyboardEvent) => {\n    if (event.keyCode === KeyCode.enter || event.keyCode === KeyCode.space) {\n      event.preventDefault();\n      onAnnotationClick(annotation);\n    }\n  };\n\n  const onEscKeyDown = (event: React.KeyboardEvent) => {\n    if (event.keyCode === KeyCode.escape) {\n      event.preventDefault();\n      onClose();\n    }\n  };\n\n  const ariaLabelledBy = getStatusButtonId({ paneId: id, paneStatus: paneStatus });\n\n  if (!visible) {\n    return null;\n  }\n\n  return (\n    <div id={id} className={styles.pane} onKeyDown={onEscKeyDown} role=\"tabpanel\" aria-labelledby={ariaLabelledBy}>\n      <ResizableBox height={paneHeight} minHeight={MIN_HEIGHT} onResize={newHeight => setPaneHeight(newHeight)}>\n        <FocusLock className={styles['focus-lock']} autoFocus={true} restoreFocus={true}>\n          <div className={styles.pane__list} tabIndex={-1}>\n            <table className={styles.pane__table} role=\"presentation\">\n              <colgroup>\n                <col style={{ width: 1 } /* shrink to fit content */} />\n                <col style={{ width: 'auto' }} />\n              </colgroup>\n              <tbody ref={listRef}>\n                {annotations.map((annotation, i) => (\n                  <tr\n                    key={i}\n                    role=\"link\"\n                    className={styles.pane__item}\n                    onMouseOver={onAnnotationClear}\n                    onClick={onItemClick.bind(null, annotation)}\n                    onKeyDown={onItemKeyDown.bind(null, annotation)}\n                    tabIndex={0}\n                  >\n                    <td className={clsx(styles.pane__location, styles.pane__cell)} tabIndex={-1}>\n                      {cursorPositionLabel?.((annotation.row || 0) + 1, (annotation.column || 0) + 1) ?? ''}\n                    </td>\n                    <td className={clsx(styles.pane__description, styles.pane__cell)} tabIndex={-1}>\n                      {annotation.text}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          <div className={styles['pane__close-container']}>\n            <InternalButton\n              formAction=\"none\"\n              variant=\"icon\"\n              iconName=\"close\"\n              onClick={onClose}\n              ariaLabel={closeButtonAriaLabel}\n            />\n          </div>\n        </FocusLock>\n      </ResizableBox>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}