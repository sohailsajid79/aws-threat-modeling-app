{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useCallback, useImperativeHandle, useRef } from 'react';\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\nimport OptionsList from '../../internal/components/options-list';\nimport { useMergeRefs } from '../../internal/hooks/use-merge-refs';\nimport { useVirtual } from '../../internal/hooks/use-virtual';\nimport { renderOptions } from '../utils/render-options';\nimport styles from './styles.css.js';\nconst VirtualList = (props, ref) => {\n  return props.menuProps.open ? React.createElement(VirtualListOpen, Object.assign({}, props, {\n    ref: ref\n  })) : React.createElement(VirtualListClosed, Object.assign({}, props, {\n    ref: ref\n  }));\n};\nconst VirtualListOpen = forwardRef(({\n  menuProps,\n  getOptionProps,\n  filteredOptions,\n  filteringValue,\n  highlightType,\n  checkboxes,\n  hasDropdownStatus,\n  listBottom,\n  useInteractiveGroups,\n  screenReaderContent\n}, ref) => {\n  // update component, when it gets wider or narrower to reposition items\n  const [width, menuMeasureRef] = useContainerQuery(rect => rect.contentBoxWidth, []);\n  const menuRefObject = useRef(null);\n  const menuRef = useMergeRefs(menuMeasureRef, menuRefObject, menuProps.ref);\n  const {\n    virtualItems,\n    totalSize,\n    scrollToIndex\n  } = useVirtual({\n    items: filteredOptions,\n    parentRef: menuRefObject,\n    // estimateSize is a dependency of measurements memo. We update it to force full recalculation\n    // when the height of any option could have changed:\n    // 1: because the component got resized (width property got updated)\n    // 2: because the option changed its content (filteringValue property controls the highlight and the visibility of hidden tags)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    estimateSize: useCallback(() => 31, [width, filteringValue])\n  });\n  useImperativeHandle(ref, () => index => {\n    if (highlightType.moveFocus) {\n      scrollToIndex(index);\n    }\n  }, [highlightType, scrollToIndex]);\n  const finalOptions = renderOptions({\n    options: virtualItems.map(({\n      index\n    }) => filteredOptions[index]),\n    getOptionProps,\n    filteringValue,\n    highlightType,\n    checkboxes,\n    hasDropdownStatus,\n    virtualItems,\n    useInteractiveGroups,\n    screenReaderContent,\n    ariaSetsize: filteredOptions.length\n  });\n  return React.createElement(OptionsList, Object.assign({}, menuProps, {\n    ref: menuRef\n  }), React.createElement(\"div\", {\n    \"aria-hidden\": \"true\",\n    key: \"total-size\",\n    className: styles['layout-strut'],\n    style: {\n      height: totalSize\n    }\n  }), finalOptions, listBottom ? React.createElement(\"li\", {\n    role: \"option\",\n    className: styles['list-bottom']\n  }, listBottom) : null);\n});\nconst VirtualListClosed = forwardRef(({\n  menuProps,\n  listBottom\n}, ref) => {\n  useImperativeHandle(ref, () => () => {}, []);\n  return React.createElement(OptionsList, Object.assign({}, menuProps, {\n    ref: menuProps.ref\n  }), listBottom ? React.createElement(\"li\", {\n    role: \"option\",\n    className: styles['list-bottom']\n  }, listBottom) : null);\n});\nexport default forwardRef(VirtualList);","map":{"version":3,"names":["React","forwardRef","useCallback","useImperativeHandle","useRef","useContainerQuery","OptionsList","useMergeRefs","useVirtual","renderOptions","styles","VirtualList","props","ref","menuProps","open","createElement","VirtualListOpen","Object","assign","VirtualListClosed","getOptionProps","filteredOptions","filteringValue","highlightType","checkboxes","hasDropdownStatus","listBottom","useInteractiveGroups","screenReaderContent","width","menuMeasureRef","rect","contentBoxWidth","menuRefObject","menuRef","virtualItems","totalSize","scrollToIndex","items","parentRef","estimateSize","index","moveFocus","finalOptions","options","map","ariaSetsize","length","key","className","style","height","role"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/select/parts/virtual-list.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useCallback, useImperativeHandle, useRef } from 'react';\n\nimport { useContainerQuery } from '@cloudscape-design/component-toolkit';\n\nimport OptionsList from '../../internal/components/options-list';\nimport { useMergeRefs } from '../../internal/hooks/use-merge-refs';\nimport { useVirtual } from '../../internal/hooks/use-virtual';\nimport { renderOptions } from '../utils/render-options';\nimport { SelectListProps } from './plain-list';\n\nimport styles from './styles.css.js';\n\nconst VirtualList = (props: SelectListProps, ref: React.Ref<SelectListProps.SelectListRef>) => {\n  return props.menuProps.open ? <VirtualListOpen {...props} ref={ref} /> : <VirtualListClosed {...props} ref={ref} />;\n};\n\nconst VirtualListOpen = forwardRef(\n  (\n    {\n      menuProps,\n      getOptionProps,\n      filteredOptions,\n      filteringValue,\n      highlightType,\n      checkboxes,\n      hasDropdownStatus,\n      listBottom,\n      useInteractiveGroups,\n      screenReaderContent,\n    }: SelectListProps,\n    ref: React.Ref<SelectListProps.SelectListRef>\n  ) => {\n    // update component, when it gets wider or narrower to reposition items\n    const [width, menuMeasureRef] = useContainerQuery(rect => rect.contentBoxWidth, []);\n    const menuRefObject = useRef(null);\n    const menuRef = useMergeRefs(menuMeasureRef, menuRefObject, menuProps.ref);\n\n    const { virtualItems, totalSize, scrollToIndex } = useVirtual({\n      items: filteredOptions,\n      parentRef: menuRefObject,\n      // estimateSize is a dependency of measurements memo. We update it to force full recalculation\n      // when the height of any option could have changed:\n      // 1: because the component got resized (width property got updated)\n      // 2: because the option changed its content (filteringValue property controls the highlight and the visibility of hidden tags)\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      estimateSize: useCallback(() => 31, [width, filteringValue]),\n    });\n\n    useImperativeHandle(\n      ref,\n      () => (index: number) => {\n        if (highlightType.moveFocus) {\n          scrollToIndex(index);\n        }\n      },\n      [highlightType, scrollToIndex]\n    );\n    const finalOptions = renderOptions({\n      options: virtualItems.map(({ index }) => filteredOptions[index]),\n      getOptionProps,\n      filteringValue,\n      highlightType,\n      checkboxes,\n      hasDropdownStatus,\n      virtualItems,\n      useInteractiveGroups,\n      screenReaderContent,\n      ariaSetsize: filteredOptions.length,\n    });\n\n    return (\n      <OptionsList {...menuProps} ref={menuRef}>\n        <div aria-hidden=\"true\" key=\"total-size\" className={styles['layout-strut']} style={{ height: totalSize }} />\n        {finalOptions}\n        {listBottom ? (\n          <li role=\"option\" className={styles['list-bottom']}>\n            {listBottom}\n          </li>\n        ) : null}\n      </OptionsList>\n    );\n  }\n);\n\nconst VirtualListClosed = forwardRef(\n  ({ menuProps, listBottom }: SelectListProps, ref: React.Ref<SelectListProps.SelectListRef>) => {\n    useImperativeHandle(ref, () => () => {}, []);\n    return (\n      <OptionsList {...menuProps} ref={menuProps.ref}>\n        {listBottom ? (\n          <li role=\"option\" className={styles['list-bottom']}>\n            {listBottom}\n          </li>\n        ) : null}\n      </OptionsList>\n    );\n  }\n);\n\nexport default forwardRef(VirtualList);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}