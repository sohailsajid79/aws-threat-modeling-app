{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport debounce from '../../debounce';\nexport class DrawersController {\n  constructor() {\n    this.drawers = [];\n    this.drawersRegistrationListener = null;\n    this.drawerOpenedListener = null;\n    this.drawerClosedListener = null;\n    this.scheduleUpdate = debounce(() => {\n      var _a;\n      (_a = this.drawersRegistrationListener) === null || _a === void 0 ? void 0 : _a.call(this, this.drawers);\n    }, 0);\n    this.registerDrawer = config => {\n      this.drawers = this.drawers.concat(config);\n      this.scheduleUpdate();\n    };\n    this.updateDrawer = config => {\n      var _a;\n      const {\n        id: drawerId,\n        resizable,\n        badge,\n        defaultSize\n      } = config;\n      const drawerIndex = this.drawers.findIndex(_ref => {\n        let {\n          id\n        } = _ref;\n        return id === drawerId;\n      });\n      const oldDrawerConfig = (_a = this.drawers) === null || _a === void 0 ? void 0 : _a[drawerIndex];\n      if (drawerIndex >= 0 && oldDrawerConfig) {\n        const drawers = this.drawers.slice();\n        const drawerConfig = Object.assign({}, oldDrawerConfig);\n        if (typeof resizable === 'boolean') {\n          drawerConfig.resizable = resizable;\n        }\n        if (typeof badge === 'boolean') {\n          drawerConfig.badge = badge;\n        }\n        if (typeof defaultSize === 'number') {\n          drawerConfig.defaultSize = defaultSize;\n        }\n        drawers[drawerIndex] = drawerConfig;\n        this.drawers = drawers;\n        this.scheduleUpdate();\n      } else {\n        throw new Error(`[AwsUi] [runtime drawers] drawer with id ${drawerId} not found`);\n      }\n    };\n    this.onDrawersRegistered = listener => {\n      if (this.drawersRegistrationListener !== null) {\n        console.warn('[AwsUi] [runtime drawers] multiple app layout instances detected');\n      }\n      this.drawersRegistrationListener = listener;\n      this.scheduleUpdate();\n      return () => {\n        this.drawersRegistrationListener = null;\n      };\n    };\n    this.clearRegisteredDrawers = () => {\n      this.drawers = [];\n    };\n    this.onDrawerOpened = listener => {\n      if (this.drawerOpenedListener !== null) {\n        console.warn('[AwsUi] [runtime drawers] multiple app layout instances detected');\n      }\n      this.drawerOpenedListener = listener;\n      return () => {\n        this.drawerOpenedListener = null;\n      };\n    };\n    this.onDrawerClosed = listener => {\n      if (this.drawerClosedListener !== null) {\n        console.warn('[AwsUi] [runtime drawers] multiple app layout instances detected');\n      }\n      this.drawerClosedListener = listener;\n      return () => {\n        this.drawerClosedListener = null;\n      };\n    };\n    this.openDrawer = drawerId => {\n      var _a;\n      (_a = this.drawerOpenedListener) === null || _a === void 0 ? void 0 : _a.call(this, drawerId);\n    };\n    this.closeDrawer = drawerId => {\n      var _a;\n      (_a = this.drawerClosedListener) === null || _a === void 0 ? void 0 : _a.call(this, drawerId);\n    };\n  }\n  installPublic() {\n    let api = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var _a, _b, _c, _d;\n    (_a = api.registerDrawer) !== null && _a !== void 0 ? _a : api.registerDrawer = this.registerDrawer;\n    (_b = api.updateDrawer) !== null && _b !== void 0 ? _b : api.updateDrawer = this.updateDrawer;\n    (_c = api.openDrawer) !== null && _c !== void 0 ? _c : api.openDrawer = this.openDrawer;\n    (_d = api.closeDrawer) !== null && _d !== void 0 ? _d : api.closeDrawer = this.closeDrawer;\n    return api;\n  }\n  installInternal() {\n    let internalApi = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var _a, _b, _c, _d;\n    (_a = internalApi.clearRegisteredDrawers) !== null && _a !== void 0 ? _a : internalApi.clearRegisteredDrawers = this.clearRegisteredDrawers;\n    (_b = internalApi.onDrawersRegistered) !== null && _b !== void 0 ? _b : internalApi.onDrawersRegistered = this.onDrawersRegistered;\n    (_c = internalApi.onDrawerOpened) !== null && _c !== void 0 ? _c : internalApi.onDrawerOpened = this.onDrawerOpened;\n    (_d = internalApi.onDrawerClosed) !== null && _d !== void 0 ? _d : internalApi.onDrawerClosed = this.onDrawerClosed;\n    return internalApi;\n  }\n}","map":{"version":3,"names":["debounce","DrawersController","constructor","drawers","drawersRegistrationListener","drawerOpenedListener","drawerClosedListener","scheduleUpdate","_a","call","registerDrawer","config","concat","updateDrawer","id","drawerId","resizable","badge","defaultSize","drawerIndex","findIndex","_ref","oldDrawerConfig","slice","drawerConfig","Object","assign","Error","onDrawersRegistered","listener","console","warn","clearRegisteredDrawers","onDrawerOpened","onDrawerClosed","openDrawer","closeDrawer","installPublic","api","arguments","length","undefined","_b","_c","_d","installInternal","internalApi"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/internal/plugins/controllers/drawers.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport debounce from '../../debounce';\nimport { NonCancelableEventHandler } from '../../events';\n\nexport type DrawerVisibilityChange = (callback: (isVisible: boolean) => void) => void;\n\nexport interface MountContentContext {\n  onVisibilityChange: DrawerVisibilityChange;\n}\n\nexport interface DrawerConfig {\n  id: string;\n  type?: 'local' | 'global';\n  ariaLabels: {\n    content?: string;\n    closeButton?: string;\n    triggerButton?: string;\n    resizeHandle?: string;\n  };\n  badge?: boolean;\n  resizable?: boolean;\n  defaultSize?: number;\n  onResize?: NonCancelableEventHandler<{ size: number; id: string }>;\n  orderPriority?: number;\n  defaultActive?: boolean;\n  trigger?: {\n    iconSvg: string;\n  };\n  mountContent: (container: HTMLElement, mountContext: MountContentContext) => void;\n  unmountContent: (container: HTMLElement) => void;\n  preserveInactiveContent?: boolean;\n}\n\nexport type UpdateDrawerConfig = Pick<DrawerConfig, 'id' | 'badge' | 'resizable' | 'defaultSize'>;\n\nexport type DrawersRegistrationListener = (drawers: Array<DrawerConfig>) => void;\n\nexport type DrawersToggledListener = (drawerId: string) => void;\n\nexport interface DrawersApiPublic {\n  registerDrawer(config: DrawerConfig): void;\n  updateDrawer(config: UpdateDrawerConfig): void;\n  openDrawer(drawerId: string): void;\n  closeDrawer(drawerId: string): void;\n}\n\nexport interface DrawersApiInternal {\n  clearRegisteredDrawers(): void;\n  onDrawersRegistered(listener: DrawersRegistrationListener): () => void;\n  onDrawerOpened(listener: DrawersToggledListener): () => void;\n  onDrawerClosed(listener: DrawersToggledListener): () => void;\n}\n\nexport class DrawersController {\n  private drawers: Array<DrawerConfig> = [];\n  private drawersRegistrationListener: DrawersRegistrationListener | null = null;\n  private drawerOpenedListener: DrawersToggledListener | null = null;\n  private drawerClosedListener: DrawersToggledListener | null = null;\n\n  scheduleUpdate = debounce(() => {\n    this.drawersRegistrationListener?.(this.drawers);\n  }, 0);\n\n  registerDrawer = (config: DrawerConfig) => {\n    this.drawers = this.drawers.concat(config);\n    this.scheduleUpdate();\n  };\n\n  updateDrawer = (config: UpdateDrawerConfig) => {\n    const { id: drawerId, resizable, badge, defaultSize } = config;\n    const drawerIndex = this.drawers.findIndex(({ id }) => id === drawerId);\n    const oldDrawerConfig = this.drawers?.[drawerIndex];\n    if (drawerIndex >= 0 && oldDrawerConfig) {\n      const drawers = this.drawers.slice();\n      const drawerConfig = { ...oldDrawerConfig };\n      if (typeof resizable === 'boolean') {\n        drawerConfig.resizable = resizable;\n      }\n      if (typeof badge === 'boolean') {\n        drawerConfig.badge = badge;\n      }\n      if (typeof defaultSize === 'number') {\n        drawerConfig.defaultSize = defaultSize;\n      }\n\n      drawers[drawerIndex] = drawerConfig;\n      this.drawers = drawers;\n      this.scheduleUpdate();\n    } else {\n      throw new Error(`[AwsUi] [runtime drawers] drawer with id ${drawerId} not found`);\n    }\n  };\n\n  onDrawersRegistered = (listener: DrawersRegistrationListener) => {\n    if (this.drawersRegistrationListener !== null) {\n      console.warn('[AwsUi] [runtime drawers] multiple app layout instances detected');\n    }\n    this.drawersRegistrationListener = listener;\n    this.scheduleUpdate();\n    return () => {\n      this.drawersRegistrationListener = null;\n    };\n  };\n\n  clearRegisteredDrawers = () => {\n    this.drawers = [];\n  };\n\n  onDrawerOpened = (listener: DrawersToggledListener) => {\n    if (this.drawerOpenedListener !== null) {\n      console.warn('[AwsUi] [runtime drawers] multiple app layout instances detected');\n    }\n\n    this.drawerOpenedListener = listener;\n\n    return () => {\n      this.drawerOpenedListener = null;\n    };\n  };\n\n  onDrawerClosed = (listener: DrawersToggledListener) => {\n    if (this.drawerClosedListener !== null) {\n      console.warn('[AwsUi] [runtime drawers] multiple app layout instances detected');\n    }\n\n    this.drawerClosedListener = listener;\n\n    return () => {\n      this.drawerClosedListener = null;\n    };\n  };\n\n  openDrawer = (drawerId: string) => {\n    this.drawerOpenedListener?.(drawerId);\n  };\n\n  closeDrawer = (drawerId: string) => {\n    this.drawerClosedListener?.(drawerId);\n  };\n\n  installPublic(api: Partial<DrawersApiPublic> = {}): DrawersApiPublic {\n    api.registerDrawer ??= this.registerDrawer;\n    api.updateDrawer ??= this.updateDrawer;\n    api.openDrawer ??= this.openDrawer;\n    api.closeDrawer ??= this.closeDrawer;\n    return api as DrawersApiPublic;\n  }\n\n  installInternal(internalApi: Partial<DrawersApiInternal> = {}): DrawersApiInternal {\n    internalApi.clearRegisteredDrawers ??= this.clearRegisteredDrawers;\n    internalApi.onDrawersRegistered ??= this.onDrawersRegistered;\n    internalApi.onDrawerOpened ??= this.onDrawerOpened;\n    internalApi.onDrawerClosed ??= this.onDrawerClosed;\n    return internalApi as DrawersApiInternal;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}