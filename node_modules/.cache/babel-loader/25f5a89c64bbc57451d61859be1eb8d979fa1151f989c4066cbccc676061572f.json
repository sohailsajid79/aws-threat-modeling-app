{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useMemo } from 'react';\nimport clsx from 'clsx';\nimport { arc } from 'd3-shape';\nimport { useInternalI18n } from '../i18n/context';\nimport styles from './styles.css.js';\nexport default function Segments(_ref) {\n  let {\n    pieData,\n    highlightedSegment,\n    dimensions,\n    variant,\n    focusedSegmentRef,\n    popoverTrackRef,\n    segmentAriaRoleDescription,\n    onMouseDown,\n    onMouseOver,\n    onTouchStart\n  } = _ref;\n  const i18n = useInternalI18n('pie-chart');\n  const {\n    arcFactory,\n    highlightedArcFactory\n  } = useMemo(() => {\n    const radius = dimensions.outerRadius;\n    const innerRadius = variant === 'pie' ? 0 : dimensions.innerRadius;\n    const cornerRadius = dimensions.cornerRadius || 0;\n    const arcFactory = arc().innerRadius(innerRadius).outerRadius(radius).cornerRadius(cornerRadius);\n    const highlightedArcFactory = arc().innerRadius(radius + 4).outerRadius(radius + 6);\n    return {\n      arcFactory,\n      highlightedArcFactory\n    };\n  }, [dimensions, variant]);\n  const centroid = useMemo(() => {\n    for (const datum of pieData) {\n      if (datum.data.datum === highlightedSegment) {\n        const [centroidLeft, centroidTop] = arcFactory.centroid(datum);\n        return {\n          cx: centroidLeft,\n          cy: centroidTop\n        };\n      }\n    }\n    return null;\n  }, [highlightedSegment, pieData, arcFactory]);\n  return React.createElement(\"g\", null, pieData.map(datum => {\n    const isHighlighted = highlightedSegment === datum.data.datum;\n    const isDimmed = highlightedSegment !== null && !isHighlighted;\n    const arcPath = arcFactory(datum) || undefined;\n    const highlightedPath = highlightedArcFactory(datum) || undefined;\n    return React.createElement(\"g\", {\n      key: datum.data.index,\n      onTouchStart: () => onTouchStart(),\n      onMouseDown: e => {\n        onMouseDown(datum.data);\n        e.preventDefault();\n      },\n      onMouseOver: () => onMouseOver(datum.data),\n      className: clsx(styles.segment, {\n        [styles['segment--highlighted']]: isHighlighted,\n        [styles['segment--dimmed']]: isDimmed\n      }),\n      ref: isHighlighted ? focusedSegmentRef : undefined,\n      \"aria-label\": `${datum.data.datum.title} (${datum.data.datum.value})`,\n      role: \"button\",\n      \"aria-roledescription\": i18n('i18nStrings.segmentAriaRoleDescription', segmentAriaRoleDescription)\n    }, React.createElement(\"path\", {\n      d: arcPath,\n      fill: datum.data.color,\n      className: styles.segment__path,\n      \"aria-hidden\": \"true\"\n    }), React.createElement(\"path\", {\n      d: highlightedPath,\n      fill: datum.data.color,\n      className: clsx(styles.segment__path, styles.segment__highlight),\n      \"aria-hidden\": \"true\"\n    }));\n  }), React.createElement(\"circle\", Object.assign({}, centroid, {\n    ref: popoverTrackRef,\n    r: \"1\",\n    opacity: \"0\",\n    \"aria-hidden\": \"true\"\n  })));\n}","map":{"version":3,"names":["React","useMemo","clsx","arc","useInternalI18n","styles","Segments","_ref","pieData","highlightedSegment","dimensions","variant","focusedSegmentRef","popoverTrackRef","segmentAriaRoleDescription","onMouseDown","onMouseOver","onTouchStart","i18n","arcFactory","highlightedArcFactory","radius","outerRadius","innerRadius","cornerRadius","centroid","datum","data","centroidLeft","centroidTop","cx","cy","createElement","map","isHighlighted","isDimmed","arcPath","undefined","highlightedPath","key","index","e","preventDefault","className","segment","ref","title","value","role","d","fill","color","segment__path","segment__highlight","Object","assign","r","opacity"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/pie-chart/segments.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useMemo } from 'react';\nimport clsx from 'clsx';\nimport { arc, PieArcDatum } from 'd3-shape';\n\nimport { useInternalI18n } from '../i18n/context';\nimport { PieChartProps } from './interfaces';\nimport { InternalChartDatum } from './pie-chart';\nimport { Dimension } from './utils';\n\nimport styles from './styles.css.js';\n\ninterface SegmentsProps<T> {\n  pieData: Array<PieArcDatum<InternalChartDatum<T>>>;\n  highlightedSegment: T | null;\n  dimensions: Dimension;\n  variant: PieChartProps['variant'];\n  focusedSegmentRef: React.RefObject<SVGGElement>;\n  popoverTrackRef: React.RefObject<SVGCircleElement>;\n  segmentAriaRoleDescription?: string;\n  onMouseDown: (datum: InternalChartDatum<T>) => void;\n  onMouseOver: (datum: InternalChartDatum<T>) => void;\n  onTouchStart: () => void;\n}\n\nexport default function Segments<T extends PieChartProps.Datum>({\n  pieData,\n  highlightedSegment,\n  dimensions,\n  variant,\n  focusedSegmentRef,\n  popoverTrackRef,\n  segmentAriaRoleDescription,\n  onMouseDown,\n  onMouseOver,\n  onTouchStart,\n}: SegmentsProps<T>) {\n  const i18n = useInternalI18n('pie-chart');\n\n  const { arcFactory, highlightedArcFactory } = useMemo(() => {\n    const radius = dimensions.outerRadius;\n    const innerRadius = variant === 'pie' ? 0 : dimensions.innerRadius;\n    const cornerRadius = dimensions.cornerRadius || 0;\n\n    const arcFactory = arc<PieArcDatum<InternalChartDatum<any>>>()\n      .innerRadius(innerRadius)\n      .outerRadius(radius)\n      .cornerRadius(cornerRadius);\n\n    const highlightedArcFactory = arc<PieArcDatum<InternalChartDatum<any>>>()\n      .innerRadius(radius + 4)\n      .outerRadius(radius + 6);\n\n    return {\n      arcFactory,\n      highlightedArcFactory,\n    };\n  }, [dimensions, variant]);\n\n  const centroid = useMemo(() => {\n    for (const datum of pieData) {\n      if (datum.data.datum === highlightedSegment) {\n        const [centroidLeft, centroidTop] = arcFactory.centroid(datum);\n        return { cx: centroidLeft, cy: centroidTop };\n      }\n    }\n    return null;\n  }, [highlightedSegment, pieData, arcFactory]);\n\n  return (\n    <g>\n      {pieData.map(datum => {\n        const isHighlighted = highlightedSegment === datum.data.datum;\n        const isDimmed = highlightedSegment !== null && !isHighlighted;\n        const arcPath = arcFactory(datum) || undefined;\n        const highlightedPath = highlightedArcFactory(datum) || undefined;\n        return (\n          <g\n            key={datum.data.index}\n            onTouchStart={() => onTouchStart()}\n            onMouseDown={e => {\n              onMouseDown(datum.data);\n              e.preventDefault();\n            }}\n            onMouseOver={() => onMouseOver(datum.data)}\n            className={clsx(styles.segment, {\n              [styles['segment--highlighted']]: isHighlighted,\n              [styles['segment--dimmed']]: isDimmed,\n            })}\n            ref={isHighlighted ? focusedSegmentRef : undefined}\n            aria-label={`${datum.data.datum.title} (${datum.data.datum.value})`}\n            role=\"button\"\n            aria-roledescription={i18n('i18nStrings.segmentAriaRoleDescription', segmentAriaRoleDescription)}\n          >\n            <path d={arcPath} fill={datum.data.color} className={styles.segment__path} aria-hidden=\"true\" />\n            <path\n              d={highlightedPath}\n              fill={datum.data.color}\n              className={clsx(styles.segment__path, styles.segment__highlight)}\n              aria-hidden=\"true\"\n            />\n          </g>\n        );\n      })}\n\n      <circle {...centroid} ref={popoverTrackRef} r=\"1\" opacity=\"0\" aria-hidden=\"true\" />\n    </g>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}