{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useCallback, useLayoutEffect } from 'react';\nimport { useResizeObserver } from '@cloudscape-design/component-toolkit/internal';\nimport { useMobile } from '../internal/hooks/use-mobile';\nimport stickyScrolling, { calculateScrollingOffset, scrollUpBy } from './sticky-scrolling';\nexport const useStickyHeader = (tableRef, theadRef, secondaryTheadRef, secondaryTableRef, tableWrapperRef) => {\n  const isMobile = useMobile();\n  // Sync the sizes of the column header copies in the sticky header with the originals\n  const syncColumnHeaderWidths = useCallback(() => {\n    if (tableRef.current && theadRef.current && secondaryTheadRef.current && secondaryTableRef.current && tableWrapperRef.current) {\n      // Using the tableRef getBoundingClientRect().width instead of the theadRef because in VR\n      // the tableRef adds extra padding to the table and by default the theadRef will have a width\n      // without the padding and will make the sticky header width incorrect.\n      secondaryTableRef.current.style.inlineSize = `${tableRef.current.getBoundingClientRect().width}px`;\n      tableWrapperRef.current.style.marginBlockStart = `-${theadRef.current.getBoundingClientRect().height}px`;\n    }\n  }, [theadRef, secondaryTheadRef, secondaryTableRef, tableWrapperRef, tableRef]);\n  useLayoutEffect(() => {\n    syncColumnHeaderWidths();\n  });\n  useResizeObserver(theadRef, syncColumnHeaderWidths);\n  const scrollToTop = () => {\n    if (!isMobile && theadRef.current && secondaryTheadRef.current && tableWrapperRef.current) {\n      const scrollDist = calculateScrollingOffset(theadRef.current, secondaryTheadRef.current);\n      if (scrollDist > 0) {\n        scrollUpBy(scrollDist, tableWrapperRef.current);\n      }\n    }\n  };\n  const {\n    scrollToItem\n  } = stickyScrolling(tableWrapperRef, secondaryTheadRef);\n  const scrollToRow = itemNode => {\n    if (!isMobile) {\n      scrollToItem(itemNode);\n    }\n  };\n  return {\n    scrollToRow,\n    scrollToTop\n  };\n};","map":{"version":3,"names":["useCallback","useLayoutEffect","useResizeObserver","useMobile","stickyScrolling","calculateScrollingOffset","scrollUpBy","useStickyHeader","tableRef","theadRef","secondaryTheadRef","secondaryTableRef","tableWrapperRef","isMobile","syncColumnHeaderWidths","current","style","inlineSize","getBoundingClientRect","width","marginBlockStart","height","scrollToTop","scrollDist","scrollToItem","scrollToRow","itemNode"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/table/use-sticky-header.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { RefObject, useCallback, useLayoutEffect } from 'react';\n\nimport { useResizeObserver } from '@cloudscape-design/component-toolkit/internal';\n\nimport { useMobile } from '../internal/hooks/use-mobile';\nimport stickyScrolling, { calculateScrollingOffset, scrollUpBy } from './sticky-scrolling';\n\nexport const useStickyHeader = (\n  tableRef: RefObject<HTMLElement>,\n  theadRef: RefObject<HTMLElement>,\n  secondaryTheadRef: RefObject<HTMLElement>,\n  secondaryTableRef: RefObject<HTMLElement>,\n  tableWrapperRef: RefObject<HTMLElement>\n) => {\n  const isMobile = useMobile();\n  // Sync the sizes of the column header copies in the sticky header with the originals\n  const syncColumnHeaderWidths = useCallback(() => {\n    if (\n      tableRef.current &&\n      theadRef.current &&\n      secondaryTheadRef.current &&\n      secondaryTableRef.current &&\n      tableWrapperRef.current\n    ) {\n      // Using the tableRef getBoundingClientRect().width instead of the theadRef because in VR\n      // the tableRef adds extra padding to the table and by default the theadRef will have a width\n      // without the padding and will make the sticky header width incorrect.\n      secondaryTableRef.current.style.inlineSize = `${tableRef.current.getBoundingClientRect().width}px`;\n\n      tableWrapperRef.current.style.marginBlockStart = `-${theadRef.current.getBoundingClientRect().height}px`;\n    }\n  }, [theadRef, secondaryTheadRef, secondaryTableRef, tableWrapperRef, tableRef]);\n  useLayoutEffect(() => {\n    syncColumnHeaderWidths();\n  });\n  useResizeObserver(theadRef, syncColumnHeaderWidths);\n  const scrollToTop = () => {\n    if (!isMobile && theadRef.current && secondaryTheadRef.current && tableWrapperRef.current) {\n      const scrollDist = calculateScrollingOffset(theadRef.current, secondaryTheadRef.current);\n      if (scrollDist > 0) {\n        scrollUpBy(scrollDist, tableWrapperRef.current);\n      }\n    }\n  };\n  const { scrollToItem } = stickyScrolling(tableWrapperRef, secondaryTheadRef);\n  const scrollToRow = (itemNode: HTMLElement | null) => {\n    if (!isMobile) {\n      scrollToItem(itemNode);\n    }\n  };\n  return { scrollToRow, scrollToTop };\n};\n"],"mappings":"AAAA;AACA;AACA,SAAoBA,WAAW,EAAEC,eAAe,QAAQ,OAAO;AAE/D,SAASC,iBAAiB,QAAQ,+CAA+C;AAEjF,SAASC,SAAS,QAAQ,8BAA8B;AACxD,OAAOC,eAAe,IAAIC,wBAAwB,EAAEC,UAAU,QAAQ,oBAAoB;AAE1F,OAAO,MAAMC,eAAe,GAAGA,CAC7BC,QAAgC,EAChCC,QAAgC,EAChCC,iBAAyC,EACzCC,iBAAyC,EACzCC,eAAuC,KACrC;EACF,MAAMC,QAAQ,GAAGV,SAAS,EAAE;EAC5B;EACA,MAAMW,sBAAsB,GAAGd,WAAW,CAAC,MAAK;IAC9C,IACEQ,QAAQ,CAACO,OAAO,IAChBN,QAAQ,CAACM,OAAO,IAChBL,iBAAiB,CAACK,OAAO,IACzBJ,iBAAiB,CAACI,OAAO,IACzBH,eAAe,CAACG,OAAO,EACvB;MACA;MACA;MACA;MACAJ,iBAAiB,CAACI,OAAO,CAACC,KAAK,CAACC,UAAU,GAAG,GAAGT,QAAQ,CAACO,OAAO,CAACG,qBAAqB,EAAE,CAACC,KAAK,IAAI;MAElGP,eAAe,CAACG,OAAO,CAACC,KAAK,CAACI,gBAAgB,GAAG,IAAIX,QAAQ,CAACM,OAAO,CAACG,qBAAqB,EAAE,CAACG,MAAM,IAAI;;EAE5G,CAAC,EAAE,CAACZ,QAAQ,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,eAAe,EAAEJ,QAAQ,CAAC,CAAC;EAC/EP,eAAe,CAAC,MAAK;IACnBa,sBAAsB,EAAE;EAC1B,CAAC,CAAC;EACFZ,iBAAiB,CAACO,QAAQ,EAAEK,sBAAsB,CAAC;EACnD,MAAMQ,WAAW,GAAGA,CAAA,KAAK;IACvB,IAAI,CAACT,QAAQ,IAAIJ,QAAQ,CAACM,OAAO,IAAIL,iBAAiB,CAACK,OAAO,IAAIH,eAAe,CAACG,OAAO,EAAE;MACzF,MAAMQ,UAAU,GAAGlB,wBAAwB,CAACI,QAAQ,CAACM,OAAO,EAAEL,iBAAiB,CAACK,OAAO,CAAC;MACxF,IAAIQ,UAAU,GAAG,CAAC,EAAE;QAClBjB,UAAU,CAACiB,UAAU,EAAEX,eAAe,CAACG,OAAO,CAAC;;;EAGrD,CAAC;EACD,MAAM;IAAES;EAAY,CAAE,GAAGpB,eAAe,CAACQ,eAAe,EAAEF,iBAAiB,CAAC;EAC5E,MAAMe,WAAW,GAAIC,QAA4B,IAAI;IACnD,IAAI,CAACb,QAAQ,EAAE;MACbW,YAAY,CAACE,QAAQ,CAAC;;EAE1B,CAAC;EACD,OAAO;IAAED,WAAW;IAAEH;EAAW,CAAE;AACrC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}