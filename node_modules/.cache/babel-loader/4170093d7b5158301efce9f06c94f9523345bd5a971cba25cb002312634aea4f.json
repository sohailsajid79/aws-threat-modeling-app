{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\nimport { isDataSeries, isXThreshold, isYThreshold, matchesX } from './utils';\n/** Formats provided x-position and its corresponding series values. */\nexport default function formatHighlighted(_ref) {\n  let {\n    position,\n    series,\n    xTickFormatter,\n    detailPopoverSeriesContent\n  } = _ref;\n  const formattedPosition = xTickFormatter ? xTickFormatter(position) : position.toString();\n  const details = [];\n  series.forEach(s => {\n    const detail = getSeriesDetail({\n      internalSeries: s,\n      targetX: position,\n      detailPopoverSeriesContent\n    });\n    if (detail) {\n      details.push(detail);\n    }\n  });\n  return {\n    position: formattedPosition,\n    details\n  };\n}\nfunction getSeriesDetail(_ref2) {\n  let {\n    internalSeries,\n    targetX,\n    detailPopoverSeriesContent\n  } = _ref2;\n  var _a;\n  const {\n    series,\n    color\n  } = internalSeries;\n  // X-thresholds are only shown when X matches.\n  if (isXThreshold(series)) {\n    return series.x === targetX ? {\n      key: series.title,\n      value: '',\n      color,\n      markerType: 'dashed'\n    } : null;\n  }\n  if (isYThreshold(series)) {\n    return {\n      key: series.title,\n      value: series.valueFormatter ? series.valueFormatter(series.y) : series.y,\n      color,\n      markerType: 'dashed'\n    };\n  }\n  if (isDataSeries(series)) {\n    for (const datum of series.data) {\n      if (matchesX(targetX, datum.x)) {\n        const customContent = detailPopoverSeriesContent ? detailPopoverSeriesContent({\n          series,\n          x: targetX,\n          y: datum.y\n        }) : undefined;\n        const hasSubItems = !!((_a = customContent === null || customContent === void 0 ? void 0 : customContent.subItems) === null || _a === void 0 ? void 0 : _a.length);\n        const isExpandable = (customContent === null || customContent === void 0 ? void 0 : customContent.expandable) && hasSubItems;\n        const isKeyString = typeof (customContent === null || customContent === void 0 ? void 0 : customContent.key) === 'string';\n        const key = (customContent === null || customContent === void 0 ? void 0 : customContent.key) && (!isExpandable || isKeyString) ? customContent.key : series.title;\n        if ((customContent === null || customContent === void 0 ? void 0 : customContent.expandable) && !hasSubItems) {\n          warnOnce('MixedLineBarChart', '`expandable` was set to `true` for a series without sub-items. This property will be ignored.');\n        }\n        if (isExpandable && !isKeyString) {\n          warnOnce('MixedLineBarChart', 'A ReactNode was used for the key of an expandable series. The series title will be used instead because nested interactive elements can cause accessiblity issues.');\n        }\n        if (!isKeyString && !isExpandable && (customContent === null || customContent === void 0 ? void 0 : customContent.value) && typeof customContent.value !== 'string') {\n          warnOnce('MixedLineBarChart', 'Use a ReactNode for the key or the value of a series, but not for both. It is not recommended to use links for key and value at the same time.');\n        }\n        return {\n          key,\n          value: (customContent === null || customContent === void 0 ? void 0 : customContent.value) || (series.valueFormatter ? series.valueFormatter(datum.y, targetX) : datum.y),\n          color,\n          markerType: series.type === 'line' ? 'line' : 'rectangle',\n          subItems: customContent === null || customContent === void 0 ? void 0 : customContent.subItems,\n          expandableId: isExpandable ? series.title : undefined\n        };\n      }\n    }\n  }\n  return null;\n}","map":{"version":3,"names":["warnOnce","isDataSeries","isXThreshold","isYThreshold","matchesX","formatHighlighted","_ref","position","series","xTickFormatter","detailPopoverSeriesContent","formattedPosition","toString","details","forEach","s","detail","getSeriesDetail","internalSeries","targetX","push","_ref2","color","x","key","title","value","markerType","valueFormatter","y","datum","data","customContent","undefined","hasSubItems","_a","subItems","length","isExpandable","expandable","isKeyString","type","expandableId"],"sources":["/Users/sohailsajid/Desktop/threat-modeling-app/node_modules/src/mixed-line-bar-chart/format-highlighted.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\n\nimport { CartesianChartProps } from '../internal/components/cartesian-chart/interfaces';\nimport { ChartSeriesDetailItem } from '../internal/components/chart-series-details';\nimport { ChartDataTypes, InternalChartSeries, MixedLineBarChartProps } from './interfaces';\nimport { isDataSeries, isXThreshold, isYThreshold, matchesX } from './utils';\n\nexport interface HighlightDetails {\n  position: string;\n  details: ChartSeriesDetailItem[];\n}\n\n/** Formats provided x-position and its corresponding series values. */\nexport default function formatHighlighted<T extends ChartDataTypes>({\n  position,\n  series,\n  xTickFormatter,\n  detailPopoverSeriesContent,\n}: {\n  position: T;\n  series: readonly InternalChartSeries<T>[];\n  xTickFormatter?: CartesianChartProps.TickFormatter<T>;\n  detailPopoverSeriesContent?: MixedLineBarChartProps.DetailPopoverSeriesContent<T>;\n}): HighlightDetails {\n  const formattedPosition = xTickFormatter ? xTickFormatter(position) : position.toString();\n\n  const details: ChartSeriesDetailItem[] = [];\n  series.forEach(s => {\n    const detail = getSeriesDetail({ internalSeries: s, targetX: position, detailPopoverSeriesContent });\n    if (detail) {\n      details.push(detail);\n    }\n  });\n\n  return { position: formattedPosition, details };\n}\n\nfunction getSeriesDetail<T>({\n  internalSeries,\n  targetX,\n  detailPopoverSeriesContent,\n}: {\n  internalSeries: InternalChartSeries<T>;\n  targetX: T;\n  detailPopoverSeriesContent?: MixedLineBarChartProps.DetailPopoverSeriesContent<T>;\n}): ChartSeriesDetailItem | null {\n  const { series, color } = internalSeries;\n\n  // X-thresholds are only shown when X matches.\n  if (isXThreshold(series)) {\n    return series.x === targetX\n      ? {\n          key: series.title,\n          value: '',\n          color,\n          markerType: 'dashed',\n        }\n      : null;\n  }\n\n  if (isYThreshold(series)) {\n    return {\n      key: series.title,\n      value: series.valueFormatter ? series.valueFormatter(series.y) : series.y,\n      color,\n      markerType: 'dashed',\n    };\n  }\n\n  if (isDataSeries(series)) {\n    for (const datum of series.data) {\n      if (matchesX(targetX, datum.x)) {\n        const customContent = detailPopoverSeriesContent\n          ? detailPopoverSeriesContent({ series, x: targetX, y: datum.y })\n          : undefined;\n        const hasSubItems = !!customContent?.subItems?.length;\n        const isExpandable = customContent?.expandable && hasSubItems;\n        const isKeyString = typeof customContent?.key === 'string';\n        const key = customContent?.key && (!isExpandable || isKeyString) ? customContent.key : series.title;\n\n        if (customContent?.expandable && !hasSubItems) {\n          warnOnce(\n            'MixedLineBarChart',\n            '`expandable` was set to `true` for a series without sub-items. This property will be ignored.'\n          );\n        }\n        if (isExpandable && !isKeyString) {\n          warnOnce(\n            'MixedLineBarChart',\n            'A ReactNode was used for the key of an expandable series. The series title will be used instead because nested interactive elements can cause accessiblity issues.'\n          );\n        }\n        if (!isKeyString && !isExpandable && customContent?.value && typeof customContent.value !== 'string') {\n          warnOnce(\n            'MixedLineBarChart',\n            'Use a ReactNode for the key or the value of a series, but not for both. It is not recommended to use links for key and value at the same time.'\n          );\n        }\n\n        return {\n          key,\n          value: customContent?.value || (series.valueFormatter ? series.valueFormatter(datum.y, targetX) : datum.y),\n          color,\n          markerType: series.type === 'line' ? 'line' : 'rectangle',\n          subItems: customContent?.subItems,\n          expandableId: isExpandable ? series.title : undefined,\n        };\n      }\n    }\n  }\n\n  return null;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}